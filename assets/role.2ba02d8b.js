import{d as E,Z as u,r as l,c as p,f as d,F as I,j as e,g as c,B as P,I as v}from"./index.e5e6c754.js";import{M as S}from"./index.6f73eb32.js";import"./index.67bc873e.js";import{P as w}from"./index.6fa46df0.js";import{T as y}from"./Table.08c4f5f5.js";import"./index.3e81d184.js";import"./conductUtil.03f406cc.js";import"./index.5e1fa168.js";import"./iconUtil.31c13224.js";import"./index.8958a719.js";import"./index.0cfa4828.js";import"./Tree.4b4dd3c6.js";import{T as z}from"./index.94b2fb2c.js";import{l as V}from"./Editor.c970b515.js";import{i as f}from"./use-immer.module.1d9a0526.js";import{g as R,I as U}from"./index.9c69eadb.js";import{s as o}from"./subs.module.83a5a1f8.js";import"./DialogWrap.947e0e2f.js";import"./KeyCode.9c493596.js";import"./pickAttrs.c5bbb5fc.js";import"./css.7dd30b7b.js";import"./useForceUpdate.09faac07.js";import"./RightOutlined.73e4cc97.js";import"./index.daad23d2.js";import"./DownOutlined.75881d1e.js";import"./index.e54b5c9c.js";import"./Overflow.321ca619.js";import"./getDataOrAriaProps.e48b8c96.js";import"./PlusOutlined.5b3e3b8c.js";import"./path.2dc76f8c.js";import"./difference.6d57e3ed.js";import"./_baseUniq.d23dbdee.js";import"./flatten.8e198855.js";import"./omit.afdf8a34.js";import"./_baseClone.e2094da0.js";import"./_baseGet.6a7418c9.js";import"./get.131f9f4f.js";import"./workbenchContext.a6b76e3b.js";import"./index.6926b693.js";import"./dayjs.min.fccffbb3.js";V.config({paths:{vs:"/modules/monaco-editor/min/vs"}});const C={postAuthentication:"auth/postAuthentication",revalidate:"auth/revalidate",postLogout:"auth/postLogout",mutatingPostAuthentication:"auth/mutatingPostAuthentication"};function Be(){const a=E(),[i]=u.useForm(),D=u.useWatch("id",i),[b,m]=f(!1),[g,x]=f([]),[n,h]=l.exports.useState(),[r,L]=l.exports.useState("postAuthentication");f([]),l.exports.useState();const[M,k]=l.exports.useState({});l.exports.useEffect(()=>{p.get("/role").then(t=>{x(t)})},[n]);const B=async t=>{await p[t.id?"put":"post"]("/role",{...t}),m(!1),h(!n)},N=async t=>{await p.delete(`/role/${t}`),h(!n)},F=[{title:a.formatMessage({id:"ViVQNi",defaultMessage:[{type:0,value:"\u89D2\u8272"}]}),dataIndex:"code",key:"code"},{title:a.formatMessage({id:"k+zCG7",defaultMessage:[{type:0,value:"\u89D2\u8272\u63CF\u8FF0"}]}),dataIndex:"remark",key:"remark"},{title:a.formatMessage({id:"R2D5Dv",defaultMessage:[{type:0,value:"\u521B\u5EFA\u65F6\u95F4"}]}),dataIndex:"createTime",key:"createTime"},{title:a.formatMessage({id:"UtE0dS",defaultMessage:[{type:0,value:"\u64CD\u4F5C"}]}),key:4,render:(t,s)=>d(I,{children:[e("span",{className:"cursor-pointer mr-1 pl-0 text-red-500",onClick:()=>{i.setFieldsValue(s),m(!0)},children:e(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"\u7F16\u8F91"}]})}),e(w,{title:a.formatMessage({id:"nS8PfW",defaultMessage:[{type:0,value:"\u786E\u5B9A\u8981\u5220\u9664?"}]}),okText:a.formatMessage({id:"r0/TUu",defaultMessage:[{type:0,value:"\u786E\u5B9A"}]}),cancelText:a.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"\u53D6\u6D88"}]}),onConfirm:()=>{N(s.id)},children:e("span",{className:"cursor-pointer pl-0 text-red-500",children:e(c,{id:"XeiAal",defaultMessage:[{type:0,value:"\u5220\u9664"}]})})})]})}];l.exports.useEffect(()=>{R(`auth.${r}`).then(t=>{k({...M,[r]:t})})},[r]);const[A,T]=l.exports.useState("role");return e("div",{className:"bg-[#fbfbfc] h-full p-3",children:d("div",{className:"relative h-full flex "+o.roleContainer,children:[A==="role"?e("div",{className:"top-2px right-0 absolute",children:e(P,{className:"h-7.5 py-0 px-4",onClick:()=>{i.setFieldsValue({id:void 0,code:"",remark:""}),m(!0)},children:e("span",{className:"text-sm text-gray",children:e(c,{id:"UH1kCc",defaultMessage:[{type:0,value:"\u6DFB\u52A0"}]})})})}):"",e(z,{className:"h-full w-full",renderTabBar:(t,s)=>e(s,{className:o.pillTab,...t}),onChange:T,items:[{label:a.formatMessage({id:"/F5ua7",defaultMessage:[{type:0,value:"\u89D2\u8272\u7BA1\u7406"}]}),key:"role",children:d("div",{className:o.tabContent,children:[b&&e(S,{open:!0,mask:!1,title:D?a.formatMessage({id:"H4GEbT",defaultMessage:[{type:0,value:"\u7F16\u8F91\u89D2\u8272"}]}):a.formatMessage({id:"THkRPD",defaultMessage:[{type:0,value:"\u6DFB\u52A0\u89D2\u8272"}]}),style:{top:"200px"},width:549,transitionName:"",onOk:()=>{i.submit()},onCancel:()=>m(!1),okText:a.formatMessage({id:"b5l2vN",defaultMessage:[{type:0,value:"\u4FDD\u5B58"}]}),okButtonProps:{className:o["save-btn"]},okType:"text",cancelText:a.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"\u53D6\u6D88"}]}),children:d(u,{name:"roleList",form:i,labelCol:{span:6},wrapperCol:{span:16},onFinish:t=>{B({...t})},autoComplete:"off",labelAlign:"left",className:"h-30 mt-8 ml-8",children:[e(u.Item,{label:a.formatMessage({id:"z1UqSC",defaultMessage:[{type:0,value:"\u89D2\u8272code"}]}),name:"code",rules:[{required:!0,message:a.formatMessage({id:"53xMJk",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u7801"}]})},{pattern:/^[_a-zA-Z][_a-zA-Z\d]*$/g,message:a.formatMessage({id:"C/vpUV",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165\u6570\u5B57\u3001\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\uFF0C\u7B2C\u4E00\u4F4D\u4E0D\u80FD\u662F\u6570\u5B57"}]})}],children:e(v,{})}),e(u.Item,{label:a.formatMessage({id:"k+zCG7",defaultMessage:[{type:0,value:"\u89D2\u8272\u63CF\u8FF0"}]}),name:"remark",children:e(v,{})}),e(u.Item,{name:"id"}),e(u.Item,{name:"createTime"})]})}),e("div",{className:o["role-container-table"],children:g.length>0?e(y,{columns:F,dataSource:g,rowKey:t=>t.id,rowClassName:(t,s)=>s%2===1?o["role-table"]:"",pagination:!1}):e(y,{columns:F,dataSource:[],rowKey:t=>t.id,rowClassName:(t,s)=>s%2===1?o["role-table"]:"",pagination:!1})})]})},{label:a.formatMessage({id:"ho6kY0",defaultMessage:[{type:0,value:"\u8EAB\u4EFD\u9274\u6743"}]}),key:"auth",children:e("div",{className:o.tabContent,children:e("div",{children:e(U,{hookPath:C[r],defaultLanguage:"typescript",onChange:console.log,defaultCode:M[r]},C[r])})})}]})]})})}export{Be as default,C as hookPath};
