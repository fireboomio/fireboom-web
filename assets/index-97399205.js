import{r as g,aA as ae,l as re,u as oe,j as a,Q as u,k as B,a6 as ne,a0 as he,$ as le,M as de,a7 as pe,K as ce}from"./index-8fcf9617.js";import{u as Z,Q as N}from"./workbench-d42b307a.js";import{g as ue}from"./datasource-1fc2b5d7.js";import{E as I}from"./index-2832b555.js";import"./dayjs.min-52ba4e17.js";import"./use-immer.module-e08025f6.js";import"./globalContext-cecb5145.js";import"./workbenchContext-03a1363c.js";import"./interface-41bd3122.js";import"./engine-ee22426b.js";import"./db-05fb80ee.js";import"./index-5dc5912e.js";import"./variable-336fe699.js";import"./common-7ac8785d.js";import"./auth-99bd141f.js";import"./hotkey-3a258436.js";import"./index-47514322.js";import"./PurePanel-43f1e3ae.js";import"./index-c6d5171d.js";import"./PrismaSchemaContext-8ddcfa64.js";import"./index-e75fb219.js";import"./LeftOutlined-1d6a1c51.js";import"./index-232bd61d.js";import"./index-28a5ab96.js";import"./useShowArrow-48f750eb.js";import"./DownOutlined-477a4df2.js";import"./conductUtil-59c07978.js";import"./index-ac0270f4.js";import"./validate-69f93ee9.js";import"./store-e0c4a083.js";import"./parser-0b83345b.js";import"./index-47715de1.js";import"./index-0b48f0c3.js";import"./addEventListener-cfbf19c4.js";import"./index-0784887c.js";import"./index-1dd4ef3f.js";import"./index-bdd08a45.js";import"./WarningOutlined-386a6b9c.js";import"./index-3bc588a2.js";import"./calcTime-0485a90e.js";import"./index-2d29a6ca.js";import"./utils-9b986f1e.js";import"./ServiceDiscovery-0b7fc560.js";import"./CopyOutlined-17705508.js";import"./index-f236deb7.js";var fe=globalThis&&globalThis.__extends||function(){var i=function(o,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])},i(o,e)};return function(o,e){i(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(i){for(var o,e=1,t=arguments.length;e<t;e++){o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},f.apply(this,arguments)},q={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},G={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},A={width:"20px",height:"20px",position:"absolute"},ge={top:f(f({},q),{top:"-5px"}),right:f(f({},G),{left:void 0,right:"-5px"}),bottom:f(f({},q),{top:void 0,bottom:"-5px"}),left:f(f({},G),{left:"-5px"}),topRight:f(f({},A),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:f(f({},A),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:f(f({},A),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:f(f({},A),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ve=function(i){fe(o,i);function o(){var e=i!==null&&i.apply(this,arguments)||this;return e.onMouseDown=function(t){e.props.onResizeStart(t,e.props.direction)},e.onTouchStart=function(t){e.props.onResizeStart(t,e.props.direction)},e}return o.prototype.render=function(){return g.createElement("div",{className:this.props.className||"",style:f(f({position:"absolute",userSelect:"none"},ge[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},o}(g.PureComponent),me=globalThis&&globalThis.__extends||function(){var i=function(o,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])},i(o,e)};return function(o,e){i(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),S=globalThis&&globalThis.__assign||function(){return S=Object.assign||function(i){for(var o,e=1,t=arguments.length;e<t;e++){o=arguments[e];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},S.apply(this,arguments)},we={width:"auto",height:"auto"},T=function(i,o,e){return Math.max(Math.min(i,e),o)},X=function(i,o){return Math.round(i/o)*o},E=function(i,o){return new RegExp(i,"i").test(o)},P=function(i){return!!(i.touches&&i.touches.length)},be=function(i){return!!((i.clientX||i.clientX===0)&&(i.clientY||i.clientY===0))},Y=function(i,o,e){e===void 0&&(e=0);var t=o.reduce(function(r,h,n){return Math.abs(h-i)<Math.abs(o[r]-i)?n:r},0),s=Math.abs(o[t]-i);return e===0||s<e?o[t]:i},H=function(i){return i=i.toString(),i==="auto"||i.endsWith("px")||i.endsWith("%")||i.endsWith("vh")||i.endsWith("vw")||i.endsWith("vmax")||i.endsWith("vmin")?i:i+"px"},F=function(i,o,e,t){if(i&&typeof i=="string"){if(i.endsWith("px"))return Number(i.replace("px",""));if(i.endsWith("%")){var s=Number(i.replace("%",""))/100;return o*s}if(i.endsWith("vw")){var s=Number(i.replace("vw",""))/100;return e*s}if(i.endsWith("vh")){var s=Number(i.replace("vh",""))/100;return t*s}}return i},xe=function(i,o,e,t,s,r,h){return t=F(t,i.width,o,e),s=F(s,i.height,o,e),r=F(r,i.width,o,e),h=F(h,i.height,o,e),{maxWidth:typeof t>"u"?void 0:Number(t),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof r>"u"?void 0:Number(r),minHeight:typeof h>"u"?void 0:Number(h)}},ye=function(i){return Array.isArray(i)?i:[i,i]},ze=["as","ref","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Q="__resizable_base__",je=function(i){me(o,i);function o(e){var t,s,r,h,n=i.call(this,e)||this;return n.ratio=1,n.resizable=null,n.parentLeft=0,n.parentTop=0,n.resizableLeft=0,n.resizableRight=0,n.resizableTop=0,n.resizableBottom=0,n.targetLeft=0,n.targetTop=0,n.appendBase=function(){if(!n.resizable||!n.window)return null;var l=n.parentNode;if(!l)return null;var p=n.window.document.createElement("div");return p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.transform="scale(0, 0)",p.style.left="0",p.style.flex="0 0 100%",p.classList?p.classList.add(Q):p.className+=Q,l.appendChild(p),p},n.removeBase=function(l){var p=n.parentNode;p&&p.removeChild(l)},n.state={isResizing:!1,width:(s=(t=n.propsSize)===null||t===void 0?void 0:t.width)!==null&&s!==void 0?s:"auto",height:(h=(r=n.propsSize)===null||r===void 0?void 0:r.height)!==null&&h!==void 0?h:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n}return Object.defineProperty(o.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||we},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,r=this.resizable.offsetHeight,h=this.resizable.style.position;h!=="relative"&&(this.resizable.style.position="relative"),e=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,t=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:r,this.resizable.style.position=h}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,s=function(n){var l;if(typeof e.state[n]>"u"||e.state[n]==="auto")return"auto";if(e.propsSize&&e.propsSize[n]&&(!((l=e.propsSize[n])===null||l===void 0)&&l.toString().endsWith("%"))){if(e.state[n].toString().endsWith("%"))return e.state[n].toString();var p=e.getParentSize(),d=Number(e.state[n].toString().replace("px","")),c=d/p[n]*100;return c+"%"}return H(e.state[n])},r=t&&typeof t.width<"u"&&!this.state.isResizing?H(t.width):s("width"),h=t&&typeof t.height<"u"&&!this.state.isResizing?H(t.height):s("height");return{width:r,height:h}},enumerable:!1,configurable:!0}),o.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=s),this.removeBase(e),r},o.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},o.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},o.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:e.flexBasis!=="auto"?e.flexBasis:void 0})}},o.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},o.prototype.createSizeForCssProperty=function(e,t){var s=this.propsSize&&this.propsSize[t];return this.state[t]==="auto"&&this.state.original[t]===e&&(typeof s>"u"||s==="auto")?"auto":e},o.prototype.calculateNewMaxFromBoundary=function(e,t){var s=this.props.boundsByDirection,r=this.state.direction,h=s&&E("left",r),n=s&&E("top",r),l,p;if(this.props.bounds==="parent"){var d=this.parentNode;d&&(l=h?this.resizableRight-this.parentLeft:d.offsetWidth+(this.parentLeft-this.resizableLeft),p=n?this.resizableBottom-this.parentTop:d.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=h?this.resizableRight:this.window.innerWidth-this.resizableLeft,p=n?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=h?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),p=n?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(e=e&&e<l?e:l),p&&Number.isFinite(p)&&(t=t&&t<p?t:p),{maxWidth:e,maxHeight:t}},o.prototype.calculateNewSizeFromDirection=function(e,t){var s=this.props.scale||1,r=ye(this.props.resizeRatio||1),h=r[0],n=r[1],l=this.state,p=l.direction,d=l.original,c=this.props,j=c.lockAspectRatio,M=c.lockAspectRatioExtraHeight,y=c.lockAspectRatioExtraWidth,v=d.width,x=d.height,z=M||0,R=y||0;return E("right",p)&&(v=d.width+(e-d.x)*h/s,j&&(x=(v-R)/this.ratio+z)),E("left",p)&&(v=d.width-(e-d.x)*h/s,j&&(x=(v-R)/this.ratio+z)),E("bottom",p)&&(x=d.height+(t-d.y)*n/s,j&&(v=(x-z)*this.ratio+R)),E("top",p)&&(x=d.height-(t-d.y)*n/s,j&&(v=(x-z)*this.ratio+R)),{newWidth:v,newHeight:x}},o.prototype.calculateNewSizeFromAspectRatio=function(e,t,s,r){var h=this.props,n=h.lockAspectRatio,l=h.lockAspectRatioExtraHeight,p=h.lockAspectRatioExtraWidth,d=typeof r.width>"u"?10:r.width,c=typeof s.width>"u"||s.width<0?e:s.width,j=typeof r.height>"u"?10:r.height,M=typeof s.height>"u"||s.height<0?t:s.height,y=l||0,v=p||0;if(n){var x=(j-y)*this.ratio+v,z=(M-y)*this.ratio+v,R=(d-v)/this.ratio+y,m=(c-v)/this.ratio+y,w=Math.max(d,x),C=Math.min(c,z),W=Math.max(j,R),L=Math.min(M,m);e=T(e,w,C),t=T(t,W,L)}else e=T(e,d,c),t=T(t,j,M);return{newWidth:e,newHeight:t}},o.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left,this.targetTop=s.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),h=r.left,n=r.top,l=r.right,p=r.bottom;this.resizableLeft=h,this.resizableRight=l,this.resizableTop=n,this.resizableBottom=p}},o.prototype.onResizeStart=function(e,t){if(!(!this.resizable||!this.window)){var s=0,r=0;if(e.nativeEvent&&be(e.nativeEvent)?(s=e.nativeEvent.clientX,r=e.nativeEvent.clientY):e.nativeEvent&&P(e.nativeEvent)&&(s=e.nativeEvent.touches[0].clientX,r=e.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var h=this.props.onResizeStart(e,t,this.resizable);if(h===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var n,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var p=this.parentNode;if(p){var d=this.window.getComputedStyle(p).flexDirection;this.flexDir=d.startsWith("row")?"row":"column",n=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var c={original:{x:s,y:r,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:S(S({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(c)}},o.prototype.onMouseMove=function(e){var t=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&P(e))try{e.preventDefault(),e.stopPropagation()}catch{}var s=this.props,r=s.maxWidth,h=s.maxHeight,n=s.minWidth,l=s.minHeight,p=P(e)?e.touches[0].clientX:e.clientX,d=P(e)?e.touches[0].clientY:e.clientY,c=this.state,j=c.direction,M=c.original,y=c.width,v=c.height,x=this.getParentSize(),z=xe(x,this.window.innerWidth,this.window.innerHeight,r,h,n,l);r=z.maxWidth,h=z.maxHeight,n=z.minWidth,l=z.minHeight;var R=this.calculateNewSizeFromDirection(p,d),m=R.newHeight,w=R.newWidth,C=this.calculateNewMaxFromBoundary(r,h);this.props.snap&&this.props.snap.x&&(w=Y(w,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(m=Y(m,this.props.snap.y,this.props.snapGap));var W=this.calculateNewSizeFromAspectRatio(w,m,{width:C.maxWidth,height:C.maxHeight},{width:n,height:l});if(w=W.newWidth,m=W.newHeight,this.props.grid){var L=X(w,this.props.grid[0]),K=X(m,this.props.grid[1]),k=this.props.snapGap||0,J=k===0||Math.abs(L-w)<=k?L:w,V=k===0||Math.abs(K-m)<=k?K:m;w=J,m=V}var ee={width:w-M.width,height:m-M.height};if(y&&typeof y=="string"){if(y.endsWith("%")){var D=w/x.width*100;w=D+"%"}else if(y.endsWith("vw")){var O=w/this.window.innerWidth*100;w=O+"vw"}else if(y.endsWith("vh")){var U=w/this.window.innerHeight*100;w=U+"vh"}}if(v&&typeof v=="string"){if(v.endsWith("%")){var D=m/x.height*100;m=D+"%"}else if(v.endsWith("vw")){var O=m/this.window.innerWidth*100;m=O+"vw"}else if(v.endsWith("vh")){var U=m/this.window.innerHeight*100;m=U+"vh"}}var _={width:this.createSizeForCssProperty(w,"width"),height:this.createSizeForCssProperty(m,"height")};this.flexDir==="row"?_.flexBasis=_.width:this.flexDir==="column"&&(_.flexBasis=_.height);var te=this.state.width!==_.width,ie=this.state.height!==_.height,se=this.state.flexBasis!==_.flexBasis,$=te||ie||se;$&&ae.flushSync(function(){t.setState(_)}),this.props.onResize&&$&&this.props.onResize(e,j,this.resizable,ee)}},o.prototype.onMouseUp=function(e){var t,s,r=this.state,h=r.isResizing,n=r.direction,l=r.original;if(!(!h||!this.resizable)){var p={width:this.size.width-l.width,height:this.size.height-l.height};this.props.onResizeStop&&this.props.onResizeStop(e,n,this.resizable,p),this.props.size&&this.setState({width:(t=this.props.size.width)!==null&&t!==void 0?t:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:S(S({},this.state.backgroundStyle),{cursor:"auto"})})}},o.prototype.updateSize=function(e){var t,s;this.setState({width:(t=e.width)!==null&&t!==void 0?t:"auto",height:(s=e.height)!==null&&s!==void 0?s:"auto"})},o.prototype.renderResizer=function(){var e=this,t=this.props,s=t.enable,r=t.handleStyles,h=t.handleClasses,n=t.handleWrapperStyle,l=t.handleWrapperClass,p=t.handleComponent;if(!s)return null;var d=Object.keys(s).map(function(c){return s[c]!==!1?g.createElement(ve,{key:c,direction:c,onResizeStart:e.onResizeStart,replaceStyles:r&&r[c],className:h&&h[c]},p&&p[c]?p[c]:null):null});return g.createElement("div",{className:l,style:n},d)},o.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce(function(h,n){return ze.indexOf(n)!==-1||(h[n]=e.props[n]),h},{}),s=S(S(S({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return g.createElement(r,S({style:s,className:this.props.className},t,{ref:function(h){h&&(e.resizable=h)}}),this.state.isResizing&&g.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},o.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},o}(g.PureComponent);const Se="_block_tmwd5_1",Re="_line_tmwd5_8",Me="_icon_tmwd5_16",_e="_name_tmwd5_21",Ne="_desc_tmwd5_26",Ee="_action_tmwd5_38",b={block:Se,line:Re,icon:Me,name:_e,desc:Ne,action:Ee};function Ce(){const[i,o]=g.useState([]),{questions:e}=Z(l=>({questions:l.questions,setQuestions:l.setQuestions}));g.useEffect(()=>{const l=re.groupBy(e,"model"),p=Object.keys(l).map(d=>({key:d,list:l[d].map(c=>(d===N.DataSource?c.icon=ue(c.extra):d===N.Authentication?c.icon="./assets/icon/oidc.svg":(N.Storage,c.icon="./assets/icon/file.svg"),c))}));o(p)},[e]);const t=oe();async function s(l){await B.put("/datasource",{name:l,enabled:!1}),ne()}async function r(l){await B.put("/operation",{path:l,enabled:!1}),he.emit({event:"apiEnableChange",data:{pathList:[l],enabled:!1}}),le()}async function h(l){await B.put("/authentication",{name:l,enabled:!1}),de()}async function n(l){await B.put("/storage",{name:l,enabled:!1}),pe()}return a.jsxs("div",{children:[!i.length&&a.jsx(I,{className:"pt-2",image:I.PRESENTED_IMAGE_SIMPLE,description:a.jsx(u,{id:"LwwUFT",defaultMessage:[{type:0,value:"暂无问题"}]})}),i.map((l,p)=>a.jsx("div",{className:b.block,children:l.list.map(d=>a.jsxs("div",{className:b.line,children:[a.jsx("img",{src:d.icon,className:b.icon,alt:""}),a.jsx("div",{className:b.name,children:d.name}),a.jsxs("div",{className:b.desc,children:[a.jsx("span",{children:d.msg}),l.key==N.DataSource&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(u,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:b.action,onClick:()=>t(`/workbench/data-source/${d.name}`),children:a.jsx(u,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(u,{id:"3+qPlN",defaultMessage:[{type:0,value:"排查, 或"}]}),a.jsx("span",{className:b.action,onClick:()=>s(d.name),children:a.jsx(u,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(u,{id:"z487Zy",defaultMessage:[{type:0,value:"该数据源"}]})]})}),l.key==N.Operation&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(u,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:b.action,onClick:()=>t(`/workbench/apimanage/${d.name}`),children:a.jsx(u,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(u,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),d.enabled&&a.jsxs(a.Fragment,{children:[", ",a.jsx(u,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),a.jsx("span",{className:b.action,onClick:()=>r(d.name),children:a.jsx(u,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(u,{id:"f5XT1C",defaultMessage:[{type:0,value:"该API"}]})]})]})}),l.key==N.Authentication&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(u,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:b.action,onClick:()=>t(`/workbench/auth/${d.name}`),children:a.jsx(u,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(u,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),d.enabled&&a.jsxs(a.Fragment,{children:[", ",a.jsx(u,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),a.jsx("span",{className:b.action,onClick:()=>h(d.name),children:a.jsx(u,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(u,{id:"Ytievw",defaultMessage:[{type:0,value:"该验证器"}]})]})]})}),l.key==N.Storage&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(u,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:b.action,onClick:()=>t(`/workbench/storage/${d.name}`),children:a.jsx(u,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(u,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),d.enabled&&a.jsxs(a.Fragment,{children:[", ",a.jsx(u,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),a.jsx("span",{className:b.action,onClick:()=>n(d.name),children:a.jsx(u,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(u,{id:"n8v1qP",defaultMessage:[{type:0,value:"该对象存储"}]})]})]})}),l.key===N.Storage&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(u,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:b.action,onClick:()=>t(`/workbench/storage/${d.name}`),children:a.jsx(u,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(u,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),d.enabled&&a.jsxs(a.Fragment,{children:[", ",a.jsx(u,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),a.jsx("span",{className:b.action,onClick:()=>n(d.name),children:a.jsx(u,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(u,{id:"n8v1qP",defaultMessage:[{type:0,value:"该对象存储"}]})]})]})})]})]},d.name))},p))]})}const We=({actionRef:i})=>{const o=g.useRef(null),e=g.useRef(null),{logs:t,setLogs:s}=Z(r=>({logs:r.logs,setLogs:r.setLogs}));return g.useEffect(()=>{i&&(i.current={clearLogs(){s([])},downloadLogs(){const r=new File([t.map(l=>JSON.stringify(l)).join(`
`)],"logs.txt",{type:"text/plain"}),h=document.createElement("a"),n=URL.createObjectURL(r);h.href=n,h.download=r.name,document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(n)}}),e.current&&(e.current.scrollTop=1e10)},[i,t]),a.jsx("div",{className:"flex flex-1 w-full h-full overflow-hidden",children:a.jsxs("div",{className:"h-full mb-0 w-10/10 overflow-auto",ref:e,children:[t.map((r,h)=>a.jsxs("div",{className:"font-normal text-xs text-[#333333] leading-25px hover:bg-gray-100",children:[a.jsx("span",{className:"mr-8",children:r.time})," ",a.jsx("span",{className:"mr-1 w-100",style:{color:{INFO:"blue",WARN:"#ffae00",ERROR:"magenta",DPANIC:"red",PANIC:"red",FATAL:"red",DEBUG:"red"}[r.level]||"#333"},children:r.level})," ",a.jsx("span",{style:{whiteSpace:"pre-line"},children:r.msg})]},h)),a.jsx("div",{ref:o})]})})},Le="_active_1cb5p_1",ke="_divider_1cb5p_17",Be={active:Le,divider:ke},Ae=i=>{const[o,e]=g.useState(i.activeKey??i.tabs[0].key),t=g.useCallback(r=>{var h;e(r),(h=i.onTabClick)==null||h.call(i,r)},[i]),s=g.useCallback(r=>i.activeKey?i.activeKey===r:o===r,[i.activeKey,o]);return a.jsx("div",{className:i.className,children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("div",{className:"flex space-x-6",children:i.tabs.map(r=>a.jsx("div",{className:`text-[#252B3A]  cursor-pointer leading-20px ${s(r.key)?Be.active:""}`,onClick:()=>t(r.key),children:r.title},r.key))}),i.extra]})})},Nt=({style:i,toggleWindow:o,defaultTab:e})=>{var p;const t=ce(),s=g.useMemo(()=>[{title:t.formatMessage({id:"608d8o",defaultMessage:[{type:0,value:"日志"}]}),key:"0"},{title:t.formatMessage({id:"gpEzjP",defaultMessage:[{type:0,value:"问题"}]}),key:"1"}],[t]),[r,h]=g.useState(e??"0"),n=g.useRef();g.useRef();const l=a.jsxs("div",{className:"cursor-pointer flex justify-end",children:[a.jsx("div",{onClick:()=>{var d;return(d=n.current)==null?void 0:d.clearLogs()},children:a.jsx("img",{src:"./assets/clear.svg",height:20,width:20,alt:"清空"})}),a.jsx("div",{className:"ml-4",onClick:(p=n.current)==null?void 0:p.downloadLogs,children:a.jsx("img",{src:"./assets/download2.svg",height:20,width:20,alt:"下载"})}),a.jsx("div",{className:"ml-4",onClick:o,children:a.jsx("img",{src:"./assets/close2.svg",height:20,width:20,alt:"关闭"})})]});return a.jsx("div",{className:"bg-[#fff] border-gray-500/50 min-h-80px px-7 pb-5 bottom-36px z-1200  absolute",style:{borderTop:"1px solid #EFEFEFFF",borderRadius:"12px 12px 0 0",overflow:"hidden",...i},children:a.jsxs(je,{className:"flex flex-col h-full pt-2.5",defaultSize:{width:"100%",height:348},minWidth:"100%",maxWidth:"100%",enable:{top:!0},children:[a.jsx(Ae,{tabs:s,onTabClick:h,activeKey:r,extra:l,className:"pb-2.5"}),a.jsxs("div",{className:`w-full overflow-auto ${r==="0"?"":"hidden"}`,children:[a.jsx(We,{actionRef:n})," "]}),a.jsx("div",{className:`w-full overflow-auto ${r==="1"?"":"hidden"}`,children:a.jsx(Ce,{})})]})})};export{Nt as default};
