import{k as c}from"./index-8780653b.js";import{D as i}from"./datasource-559e57f6.js";async function U(s,e,a){let r=new FormData;e instanceof File?r.append("content",e):r.append("content",new File([e],a)),r.append("uri",s),r.append("create","true"),r.append("overwrite","true");let o={headers:{"Content-Type":"multipart/form-data"}};return await c.post("/vscode/writeFile",r,o)}function C(s){if(s.startsWith("sqlserver://")){const a=s.split(";"),[r,o]=a[0].replace(/^sqlserver:\/\//,"").split(":"),n=a.slice(1).reduce((t,l)=>{const[w,$]=l.split("=");return t[w]=$,t},{}),{user:d,password:m,database:u,...p}=n;return{schema:"sqlserver",host:r,port:+o,dbName:u,username:d,password:m,args:Object.keys(p).map(t=>`${t}=${p[t]}`).join(";")}}const e=s.match(/^(\w+):\/\/([\w\d-_]+)(:(.+))?@([\w\d.]+)(:(.+))?\/([\w\d-_]+)(\?(.+))?/);if(e)return{schema:e[1],username:decodeURIComponent(e[2]),password:decodeURIComponent(e[4]),host:e[5],port:+e[7],dbName:decodeURIComponent(e[8]),args:decodeURIComponent(e[10])}}function I(s,e){return s===i.SQLServer?`sqlserver://${e.host}:${e.port??1443};database=${e.dbName};user=${e.username??"sa"};password=${e.password};${e.args??""}`:`${e.schema}://${encodeURIComponent(e.username)}${e.password?`:${encodeURIComponent(e.password)}`:""}@${e.host}:${e.port}/${encodeURIComponent(e.dbName)}${e.args?`?${e.args}`:""}`}export{I as g,C as p,U as w};
