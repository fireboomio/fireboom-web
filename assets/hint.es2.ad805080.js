import{C as f}from"./codemirror.es.fa31b7d8.js";import{f as j}from"./forEachState.es.d8431927.js";import"./index.e309cc4c.js";import"./index.e5e6c754.js";import{v as g,R as b,M as N,N as y,w as O,s as D}from"./index.07d786b1.js";import"./index.94b2fb2c.js";import"./index.e54b5c9c.js";import"./KeyCode.9c493596.js";import"./Overflow.321ca619.js";import"./PlusOutlined.5b3e3b8c.js";import"./index.3e81d184.js";import"./index.8958a719.js";import"./getDataOrAriaProps.e48b8c96.js";import"./printer.b0e2956d.js";import"./DownOutlined.75881d1e.js";import"./index.b6cece06.js";import"./index.6926b693.js";import"./index.esm.0df65c6e.js";import"./index.esm.e5edd667.js";import"./workbenchContext.a6b76e3b.js";import"./keyBy.400ebaf7.js";import"./_baseGet.6a7418c9.js";import"./_createAggregator.87a98d7b.js";import"./get.131f9f4f.js";import"./utils.aecd68b7.js";import"./DialogWrap.947e0e2f.js";import"./pickAttrs.c5bbb5fc.js";import"./index.9c69eadb.js";import"./path.2dc76f8c.js";import"./Editor.c970b515.js";import"./use-immer.module.1d9a0526.js";import"./difference.6d57e3ed.js";import"./_baseUniq.d23dbdee.js";import"./flatten.8e198855.js";import"./omit.afdf8a34.js";import"./_baseClone.e2094da0.js";import"./iconUtil.31c13224.js";import"./index.5e1fa168.js";import"./index.0cfa4828.js";import"./Tree.4b4dd3c6.js";import"./conductUtil.03f406cc.js";import"./RightOutlined.73e4cc97.js";import"./index.daad23d2.js";import"./index.6f73eb32.js";import"./dayjs.min.fccffbb3.js";import"./index.5f2defea.js";import"./EditFilled.960b3a16.js";import"./main.6509447f.js";import"./index.8cc7621e.js";import"./index.1d15c994.js";import"./DeleteOutlined.d0f28ba8.js";import"./index.dfde5764.js";import"./main.70523ff0.js";var M=Object.defineProperty,a=(o,i)=>M(o,"name",{value:i,configurable:!0});function c(o,i,e){const r=x(e,d(i.string));if(!r)return;const t=i.type!==null&&/"|\w/.test(i.string[0])?i.start:i.end;return{list:r,from:{line:o.line,ch:t},to:{line:o.line,ch:i.end}}}a(c,"hintList");function x(o,i){if(!i)return u(o,n=>!n.isDeprecated);const e=o.map(n=>({proximity:T(d(n.text),i),entry:n}));return u(u(e,n=>n.proximity<=2),n=>!n.entry.isDeprecated).sort((n,p)=>(n.entry.isDeprecated?1:0)-(p.entry.isDeprecated?1:0)||n.proximity-p.proximity||n.entry.text.length-p.entry.text.length).map(n=>n.entry)}a(x,"filterAndSortList");function u(o,i){const e=o.filter(i);return e.length===0?o:e}a(u,"filterNonEmpty");function d(o){return o.toLowerCase().replace(/\W/g,"")}a(d,"normalizeText");function T(o,i){let e=v(i,o);return o.length>i.length&&(e-=o.length-i.length-1,e+=o.indexOf(i)===0?0:.5),e}a(T,"getProximity");function v(o,i){let e,r;const t=[],n=o.length,p=i.length;for(e=0;e<=n;e++)t[e]=[e];for(r=1;r<=p;r++)t[0][r]=r;for(e=1;e<=n;e++)for(r=1;r<=p;r++){const m=o[e-1]===i[r-1]?0:1;t[e][r]=Math.min(t[e-1][r]+1,t[e][r-1]+1,t[e-1][r-1]+m),e>1&&r>1&&o[e-1]===i[r-2]&&o[e-2]===i[r-1]&&(t[e][r]=Math.min(t[e][r],t[e-2][r-2]+m))}return t[n][p]}a(v,"lexicalDistance");f.registerHelper("hint","graphql-variables",(o,i)=>{const e=o.getCursor(),r=o.getTokenAt(e),t=L(e,r,i);return(t==null?void 0:t.list)&&t.list.length>0&&(t.from=f.Pos(t.from.line,t.from.ch),t.to=f.Pos(t.to.line,t.to.ch),f.signal(o,"hasCompletion",o,t,r)),t});function L(o,i,e){const r=i.state.kind==="Invalid"?i.state.prevState:i.state,t=r.kind,n=r.step;if(t==="Document"&&n===0)return c(o,i,[{text:"{"}]);const p=e.variableToType;if(!p)return;const m=V(p,i.state);if(t==="Document"||t==="Variable"&&n===0){const s=Object.keys(p);return c(o,i,s.map(l=>({text:`"${l}": `,type:p[l]})))}if((t==="ObjectValue"||t==="ObjectField"&&n===0)&&m.fields){const s=Object.keys(m.fields).map(l=>m.fields[l]);return c(o,i,s.map(l=>({text:`"${l.name}": `,type:l.type,description:l.description})))}if(t==="StringValue"||t==="NumberValue"||t==="BooleanValue"||t==="NullValue"||t==="ListValue"&&n===1||t==="ObjectField"&&n===2||t==="Variable"&&n===2){const s=m.type?g(m.type):void 0;if(s instanceof b)return c(o,i,[{text:"{"}]);if(s instanceof N){const l=s.getValues();return c(o,i,l.map(h=>({text:`"${h.name}"`,type:s,description:h.description})))}else if(s===y)return c(o,i,[{text:"true",type:y,description:"Not false."},{text:"false",type:y,description:"Not true."}])}}a(L,"getVariablesHint");function V(o,i){const e={type:null,fields:null};return j(i,r=>{if(r.kind==="Variable")e.type=o[r.name];else if(r.kind==="ListValue"){const t=e.type?O(e.type):void 0;e.type=t instanceof D?t.ofType:null}else if(r.kind==="ObjectValue"){const t=e.type?g(e.type):void 0;e.fields=t instanceof b?t.getFields():null}else if(r.kind==="ObjectField"){const t=r.name&&e.fields?e.fields[r.name]:null;e.type=t==null?void 0:t.type}}),e}a(V,"getTypeInfo");
