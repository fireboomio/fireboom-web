import{d as Me,r as A,u as Fe,Z as M,c as X,j as t,f as F,I as U,g as x,F as xe,B as _,m as de}from"./index.e5e6c754.js";import{C as P}from"./index.3e81d184.js";import{C as ce}from"./Collapse.3bf6cf6c.js";import{M as De}from"./index.6f73eb32.js";import{P as Ie}from"./index.67bc873e.js";import{R as O}from"./index.8958a719.js";import"./iconUtil.31c13224.js";import"./index.5e1fa168.js";import{T as Ee}from"./Table.08c4f5f5.js";import"./conductUtil.03f406cc.js";import"./index.0cfa4828.js";import"./Tree.4b4dd3c6.js";import{S as H}from"./index.daad23d2.js";import{c as me}from"./cloneDeep.308f58db.js";import{A as ae,K as h,a as y,b as G,c as Q,k as Ce}from"./keyBy.400ebaf7.js";import{i as Be}from"./index.esm.0df65c6e.js";import{i as ee}from"./use-immer.module.1d9a0526.js";import{R as Z}from"./index.dfde5764.js";import{W as Ne}from"./workbenchContext.a6b76e3b.js";import{a as Ae}from"./get.131f9f4f.js";import{_ as ke}from"./_baseSet.aed078ba.js";import{s as J}from"./index.module.e663a310.js";import"./RightOutlined.73e4cc97.js";import"./DialogWrap.947e0e2f.js";import"./KeyCode.9c493596.js";import"./pickAttrs.c5bbb5fc.js";import"./getDataOrAriaProps.e48b8c96.js";import"./Overflow.321ca619.js";import"./DownOutlined.75881d1e.js";import"./css.7dd30b7b.js";import"./useForceUpdate.09faac07.js";import"./index.e54b5c9c.js";import"./_baseClone.e2094da0.js";import"./_baseGet.6a7418c9.js";import"./_createAggregator.87a98d7b.js";import"./index.esm.e5edd667.js";var Se=ke;function Oe(e,a,u){return e==null?e:Se(e,a,u)}var Ke=Oe;function we(e){let a;return e.auth===ae.enable?a='{"enable":true,"authenticationRequired":true,"settingType":1}':e.auth===ae.disable&&(a='{"enable":true,"authenticationRequired":false,"settingType":1}'),e.apiList.map(u=>({...Te[u](e),setting:e.authApiList.includes(u)?a:void 0}))}const q=(e,a)=>{const{authType:u,authApiList:i,roleList:c}=e;return i.includes(a)&&c.length?` @rbac(${u}: [${c.join(", ")}])`:""},z=(e,a)=>{const u={};return Object.keys(e.table).forEach(i=>{e.table[i][a]&&(Ae(u,i)||Ke(u,i,!0))}),oe(u)};function oe(e,a=0){const u=`
`+"  ".repeat(a+2);return Object.keys(e).map(i=>e[i]===!0?u+i:`${u}${i} {${oe(e[i],a+1)}${u}}`).join("")}const Te={create(e){const a=Object.keys(e.table).filter(p=>e.table[p].create!==h.Hidden),u=a.filter(p=>e.table[p].isDirectField).map(p=>{const I=e.table[p].createType;return`$${p}: ${I.name}${e.table[p].create===h.Required?"!":""}${e.table[p].directive}`}).join(", "),i=a.filter(p=>e.table[p].isDirectField).map(p=>`${p}: $${p}`).join(", "),c=z(e,"detail"),r=`/${e.prefix}CreateOne${e.alias}`,g=`
mutation ${e.prefix}CreateOne${e.alias}(${u})${q(e,y.Create)} {
  data: ${e.dbName}_createOne${e.modelName}(data: {${i}}) {
    ${c}
  }
}`.trim();return{path:r,content:g}},delete(e){const a=e.primaryKey,u=e.table[a].type,i=`/${e.prefix}DeleteOne${e.alias}`,c=`
mutation ${e.prefix}DeleteOne${e.alias}($${a}: ${u}!)${q(e,y.Delete)} {
  data: ${e.dbName}_deleteOne${e.modelName}(where: {${a}: $${a}}) {
    ${a}
  }
}`.trim();return{path:i,content:c}},update(e){const a=e.primaryKey,u=Object.keys(e.table).filter(d=>e.table[d].update!==h.Hidden&&e.table[d].isDirectField).map(d=>({key:d,...e.table[d].updateType})),i=`$${a}: ${e.table[a].type}!, `+u.map(d=>`$${d.key}: ${d.name}${e.table[d.key].update===h.Required?"!":""}${e.table[d.key].directive}`).join(", "),c=u.map(d=>`${d.key}: ${d.isSet?`{set: $${d.key}}`:`$${d.key}`}`).join(", "),r=z(e,"detail"),g=`/${e.prefix}UpdateOne${e.alias}`,p=`
mutation ${e.prefix}UpdateOne${e.alias}(${i})${q(e,y.Update)} {
  data: ${e.dbName}_updateOne${e.modelName}(
    data: {${c}}
    where: {${a}: $${a}}
  ) {
    ${r}
  }
}`.trim();return{path:g,content:p}},detail(e){const a=e.primaryKey,u=e.table[a].type,i=z(e,"detail"),c=`/${e.prefix}GetOne${e.alias}`,r=`
query ${e.prefix}GetOne${e.alias}($${a}: ${u}!)${q(e,y.Detail)} {
  data: ${e.dbName}_findFirst${e.modelName}(where: {${a}: {equals: $${a}}}) {
    ${i}
  }
}`.trim();return{path:c,content:r}},list(e){const a=e.primaryKey,u=z(e,"list"),i=Object.keys(e.table).some(j=>e.table[j].sort),c=Object.keys(e.table).some(j=>e.table[j].filter),r=i?`, $orderBy: [${e.dbName}_${e.modelName}OrderByWithRelationInput]`:"",g=i?`
  orderBy: $orderBy`:"",p=c?`, $query: ${e.dbName}_${e.modelName}WhereInput`:"",d=c?`
    where: {AND: $query}`:"",I=c?"(where: {AND: $query})":"",R=`/${e.prefix}Get${e.alias}List`,Y=`
query ${e.prefix}Get${e.alias}List($take: Int = 10, $skip: Int = 0${r}${p})${q(e,y.List)} {
  data: ${e.dbName}_findMany${e.modelName}(
    skip: $skip
    take: $take${g}${d}) {
    ${u}
  }
  total: ${e.dbName}_aggregate${e.modelName}${I} @transform(get: "_count.${a}") {
    _count {
      ${a}
    }
  }
}`.trim();return{path:R,content:Y}},batchDelete(e){const a=e.primaryKey,u=e.table[a].type,i=`/${e.prefix}DeleteMany${e.alias}`,c=`
mutation ${e.prefix}DeleteMany${e.alias}($${a}s: [${u}]!)${q(e,y.BatchDelete)} {
  data: ${e.dbName}_deleteMany${e.modelName}(where: {${a}: {in: $${a}s}}) {
    count
  }
}`.trim();return{path:i,content:c}},export(e){const a=z(e,"list"),u=`/${e.prefix}GetMany${e.alias}`,i=`
query ${e.prefix}GetMany${e.alias}${q(e,y.Export)} {
  data: ${e.dbName}_findMany${e.modelName} {
    ${a}
  }
}`.trim();return{path:u,content:i}}},qe="/assets/fail-icon.ab0b5984.svg",je="/assets/fail-pic.f5fc5ada.svg",Pe="/assets/success-icon.668656a8.svg",Re="/assets/success-pic.b9a704a1.svg";function Le(e,a){e.fields.forEach(u=>(a.obj2key[u.name]&&(u.originField=e.fields.find(i=>i.name===a.obj2key[i.name])),!0))}function _e(e,a){var c;const u={};for(const[r,g]of e.matchAll(/input (\w+)\s\{\n[\s\S]*?\n}/g)){const p={};((c=r.match(/(\w+):\s(\w+)/g))!=null?c:[]).forEach(d=>{const[I,R]=d.split(": ");p[I.trim()]={isSet:!1,name:R.trim()}}),u[g]=p}const i={};for(const[r,g]of e.matchAll(/enum (\w+)\s\{\n[\s\S]*?\n}/g))i[g]=!0;return Object.keys(u).forEach(r=>{const g=u[r];Object.keys(g).forEach(p=>{const d=g[p],I=u[d.name];I&&I.set&&(d.isSet=!0,d.name=I.set.name),(u[d.name]||i[d.name])&&(d.name=a+d.name)})}),u}function fe(e,a,u=1,i){const c=!!i;e.fields=e.fields.filter(r=>{if(r.tableId=r.name,i&&(r.tableId=(i==null?void 0:i.tableId)+"."+r.tableId),r.isForeign=c,r.parentField=i,r.isPrimaryKey=r.name===e.idField,r.kind!=="object")return!0;let g=a.find(p=>p.name===r.type);return g?(g=me(g),u>0&&fe(g,a,u-1,r),r.children=g.fields,!0):!1})}function Ia(e){const a=Me(),u=A.exports.useMemo(()=>[{label:a.formatMessage({id:"1Spi9T",defaultMessage:[{type:0,value:"\u589E\u52A0"}]}),value:y.Create},{label:a.formatMessage({id:"XeiAal",defaultMessage:[{type:0,value:"\u5220\u9664"}]}),value:y.Delete},{label:a.formatMessage({id:"t2iHNJ",defaultMessage:[{type:0,value:"\u66F4\u65B0"}]}),value:y.Update},{label:a.formatMessage({id:"s4hJju",defaultMessage:[{type:0,value:"\u8BE6\u60C5"}]}),value:y.Detail},{label:a.formatMessage({id:"vA8Nfy",defaultMessage:[{type:0,value:"\u5206\u9875\u67E5\u8BE2"}]}),value:y.List},{label:a.formatMessage({id:"2+X2n8",defaultMessage:[{type:0,value:"\u6279\u91CF\u5220\u9664"}]}),value:y.BatchDelete},{label:a.formatMessage({id:"UOrOkX",defaultMessage:[{type:0,value:"\u67E5\u8BE2\u5168\u90E8"}]}),value:y.Export}],[a]),i=Fe(),[c]=M.useForm(),r=M.useWatch("table",c),[g,p]=ee(void 0),[d,I]=A.exports.useState(),[R,Y]=ee([]),[j,te]=ee([]),[pe,le]=A.exports.useState(),[re,L]=A.exports.useState(),[se,ye]=A.exports.useState(),[V,he]=A.exports.useState(),N=A.exports.useRef(),{data:W}=Be("/role",s=>X.get(s).then(l=>(l.forEach(n=>{n.full=n.code+" "+n.remark}),l))),{onRefreshMenu:ge}=A.exports.useContext(Ne);if(A.exports.useEffect(()=>{var w,T,D,b;if(!e.model)return;Y(((w=e.model)==null?void 0:w.fields.map(C=>({value:C.name,label:C.name})))||[]);const s=me(e.model);Le(s,e.relationMap),fe(s,e.modelList||[],3);const l=_e((T=e.dmf)!=null?T:"",`${e.dbName}_`),n=l[`${s.name}CreateInput`],m={...l[`${s.name}UpdateInput`]},$={};(C=>{C.forEach(f=>{var k,B,S;f.children;let o;f.kind==="object"?o={isDirectField:!0,kind:f.kind,name:f.name,type:f.type,createType:n[f.name],updateType:m[f.name],detail:!1,filter:!1,list:!1,sort:!1,create:f.required?h.Required:h.Optional,update:h.Optional,createDisableFlag:!1,updateDisableFlag:!1,directive:"",sortDirection:Q.Asc}:(o={isDirectField:!0,kind:f.kind,name:f.name,type:f.type,createType:n[f.name],updateType:m[f.name],sort:!0,detail:!0,list:!0,filter:!0,sortDirection:Q.Asc,create:f.required?h.Required:h.Optional,update:f.name===((k=e.model)==null?void 0:k.idField)?h.Hidden:h.Optional,createDisableFlag:!1,updateDisableFlag:!1,directive:""},f.name===((B=e.model)==null?void 0:B.idField)&&(f.hasDefault?o.create=h.Hidden:o.create=h.Required),o.createType===void 0&&(o.create=h.Hidden),o.updateType===void 0&&(o.update=h.Hidden)),f.tableId===s.idField&&(o.createDisableFlag=!0,o.updateDisableFlag=!0),f.required&&(o.createDisableFlag=!0),o.createType===void 0&&(o.createDisableFlag=!0),o.updateType===void 0&&(o.updateDisableFlag=!0),(f.name==="createdAt"||f.name==="created_at")&&(o.createDisableFlag=!0,o.updateDisableFlag=!0,o.create=h.Hidden,o.update=h.Hidden),(f.name==="updatedAt"||f.name==="updated_at")&&(o.createDisableFlag=!0,o.updateDisableFlag=!0,o.create=h.Required,o.update=h.Required,o.directive=" @injectCurrentDateTime(format: UnixDate)"),$[(S=f.tableId)!=null?S:""]=o})})(s.fields),I({dbName:e.dbName,apiList:Object.values(y),authApiList:[y.Create,y.Update,y.Delete],roleList:[],auth:ae.default,authType:G.RequireMatchAll,table:$,prefix:"",alias:(D=e==null?void 0:e.model)==null?void 0:D.name,modelName:(b=e==null?void 0:e.model)==null?void 0:b.name,primaryKey:e.model.idField}),ue(Object.values(y)),p(s),le(void 0)},[e.model]),A.exports.useEffect(()=>{c.resetFields()},[d]),!g)return null;const be=async s=>{let l=we(s);const n=l.map(b=>b.path),m=de.loading(a.formatMessage({id:"p/NHCA",defaultMessage:[{type:0,value:"\u6821\u9A8C\u4E2D"}]})),$=await X.get("/operateApi/operationByPaths",{params:{paths:JSON.stringify(n)}}),K=Ce($,"Path");m();const w=await new Promise(b=>{N.current=b,ye(!!$.length),L(n.map(C=>F("div",{className:"flex",children:[t("span",{className:"w-3/5",children:C}),K[C]?t("span",{className:"text-[#f21212]",children:t(x,{id:"G1Nhzp",defaultMessage:[{type:0,value:"\u5DF2\u5B58\u5728"}]})}):t("span",{children:t(x,{id:"vcG1mv",defaultMessage:[{type:0,value:"\u4E0D\u5B58\u5728"}]})})]},C)))});if(w===0||(w===1&&(l=l.filter(b=>!K[b.path])),l.length===0))return;const T=de.loading(a.formatMessage({id:"xaND3c",defaultMessage:[{type:0,value:"\u6B63\u5728\u751F\u6210"}]}));let D;try{D=await X.post("/operateApi/batch",{list:l})}catch(b){console.error(b)}T(),ge("api"),le(F("div",{className:J.successInfo,children:[t("img",{src:D?Re:je,alt:"",className:"m-auto mt-30 left-3 block relative"}),t("div",{className:"font-500 mt-8 text-center text-default",children:D?t(x,{id:"2y+Dze",defaultMessage:[{type:0,value:"\u672C\u6B21\u6210\u529F\u751F\u6210"},{type:1,value:"count"},{type:0,value:"\u6761API"}],values:{count:D.filter(b=>!b.Code).length}}):"\u751F\u6210\u5931\u8D25"}),D&&t("div",{className:"bg-[#FAFAFC] mx-auto rounded-2 mt-6 py-4 w-140",children:D.map(b=>F("div",{className:"flex my-2.5 pr-27 pl-21 leading-5 items-center",children:[t("img",{src:b.Code===0?Pe:qe,alt:"",className:"flex-0"}),t("span",{className:"flex-1 text-default ml-1.5",children:b.Path}),t("a",{className:"text-default ml-1.5 text-[#649FFF]",onClick:()=>i(`/workbench/apimanage/${b.ID}`),children:t(x,{id:"cDZ00w",defaultMessage:[{type:0,value:"\u67E5\u770B"}]})})]},b.Path))})]}))};function ue(s){const l={};s.forEach(n=>{switch(n){case y.Create:l.create=!0;break;case y.Update:l.update=!0;break;case y.Detail:l.detail=!0;break;case y.List:l.list=!0,l.filter=!0,l.sort=!0;break;case y.Export:l.list=!0;break;case y.Delete:case y.BatchDelete:break}}),he(l)}const E=(s,l,n)=>{const m=c.getFieldValue("table");m[s]||(m[s]={}),m[s][l]=n,c.setFieldValue("table",{...m})},ie=(s,l,n)=>{var m,$,K,w,T,D,b,C,f,o;if(E((m=l.tableId)!=null?m:"",s,n),n){let k=l.parentField;for(;k;)E(($=k.tableId)!=null?$:"",s,n),k=k.parentField;if(l.children){j.includes(l.tableId)||te(v=>{v.push(l.tableId)});const B=(K=l.children)==null?void 0:K.find(v=>!v.isPrimaryKey),S=(w=l.children)==null?void 0:w.find(v=>v.isPrimaryKey);B&&E((T=B.tableId)!=null?T:"",s,n),S&&E((D=S.tableId)!=null?D:"",s,n)}}else{const k=c.getFieldValue("table");let B=l.parentField;for(;B;){const v=(b=B.children)==null?void 0:b.some(ve=>{var ne;return k[(ne=ve.tableId)!=null?ne:""][s]});E((C=B.tableId)!=null?C:"",s,v),B=B.parentField}const S=[...(f=l.children)!=null?f:[]];for(;S.length;){const v=S.pop();E((o=v==null?void 0:v.tableId)!=null?o:"",s,!1),v!=null&&v.children&&S.push(...v.children)}}},$e=[{title:a.formatMessage({id:"z0QaYJ",defaultMessage:[{type:0,value:"\u5B57\u6BB5"}]}),dataIndex:"name",render:s=>t(Ie,{content:s,children:t("span",{children:s})})},{title:a.formatMessage({id:"5FboZ/",defaultMessage:[{type:0,value:"\u7C7B\u578B"}]}),dataIndex:"type"},{title:a.formatMessage({id:"Hxs6Qn",defaultMessage:[{type:0,value:"\u5217\u8868"}]}),dataIndex:"list",filterKey:"list",render:(s,l)=>{var n;return t(P,{checked:(n=r==null?void 0:r[l.tableId])==null?void 0:n.list,onClick:m=>{ie("list",l,m.target.checked)}})}},{title:a.formatMessage({id:"s4hJju",defaultMessage:[{type:0,value:"\u8BE6\u60C5"}]}),dataIndex:"detail",filterKey:"detail",render:(s,l)=>{var n;return t(P,{checked:(n=r==null?void 0:r[l.tableId])==null?void 0:n.detail,onChange:m=>{ie("detail",l,m.target.checked)}})}},{title:a.formatMessage({id:"cLvrI5",defaultMessage:[{type:0,value:"\u8FC7\u6EE4"}]}),dataIndex:"filter",filterKey:"filter",render:(s,l)=>{var n;return!l.isForeign&&t(P,{disabled:l.kind==="object",checked:(n=r==null?void 0:r[l.tableId])==null?void 0:n.filter,onChange:m=>{E(l.tableId,"filter",m.target.checked)}})}},{title:a.formatMessage({id:"GuD3c8",defaultMessage:[{type:0,value:"\u6392\u5E8F"}]}),dataIndex:"sort",filterKey:"sort",render:(s,l)=>{var n;return!l.isForeign&&t(P,{disabled:l.kind==="object",checked:(n=r==null?void 0:r[l.tableId])==null?void 0:n.sort,onChange:m=>{E(l.tableId,"sort",m.target.checked)}})}},{title:a.formatMessage({id:"M/Ydym",defaultMessage:[{type:0,value:"\u9ED8\u8BA4\u6392\u5E8F"}]}),dataIndex:"sortDirection",filterKey:"sort",render:(s,l)=>{var n,m;return!l.isForeign&&((n=r==null?void 0:r[l.tableId])!=null&&n.sort?t(H,{value:(m=r==null?void 0:r[l.tableId])==null?void 0:m.sortDirection,options:[{label:a.formatMessage({id:"v+Sakv",defaultMessage:[{type:0,value:"\u6B63\u5E8F"}]}),value:Q.Asc},{label:a.formatMessage({id:"2rw44l",defaultMessage:[{type:0,value:"\u5012\u5E8F"}]}),value:Q.Desc}],onChange:$=>{E(l.tableId,"sortDirection",$)}}):"-")}},{title:a.formatMessage({id:"BtZh7z",defaultMessage:[{type:0,value:"\u521B\u5EFA"}]}),dataIndex:"create",filterKey:"create",render:(s,l)=>{var n,m;return!l.isForeign&&t(H,{value:(n=r==null?void 0:r[l.tableId])==null?void 0:n.create,disabled:(m=r==null?void 0:r[l.tableId])==null?void 0:m.createDisableFlag,options:[{label:a.formatMessage({id:"EIebSr",defaultMessage:[{type:0,value:"\u65E0"}]}),value:h.Hidden},{label:a.formatMessage({id:"pf77Ih",defaultMessage:[{type:0,value:"\u9009\u586B"}]}),value:h.Optional},{label:a.formatMessage({id:"FQQECq",defaultMessage:[{type:0,value:"\u5FC5\u586B"}]}),value:h.Required}],onChange:$=>{E(l.tableId,"create",$)}})}},{title:a.formatMessage({id:"t2iHNJ",defaultMessage:[{type:0,value:"\u66F4\u65B0"}]}),dataIndex:"update",filterKey:"update",render:(s,l)=>{var n,m,$;return!l.isForeign&&t(H,{disabled:(n=r==null?void 0:r[l.tableId])==null?void 0:n.updateDisableFlag,value:($=(m=r==null?void 0:r[l.tableId])==null?void 0:m.update)!=null?$:"choose",options:[{label:a.formatMessage({id:"EIebSr",defaultMessage:[{type:0,value:"\u65E0"}]}),value:h.Hidden},{label:a.formatMessage({id:"pf77Ih",defaultMessage:[{type:0,value:"\u9009\u586B"}]}),value:h.Optional},{label:a.formatMessage({id:"FQQECq",defaultMessage:[{type:0,value:"\u5FC5\u586B"}]}),value:h.Required}],onChange:K=>{E(l.tableId,"update",K)}})}}].filter(s=>{var l;return!s.filterKey||(V==null?void 0:V[(l=s.filterKey)!=null?l:""])});return F("div",{className:"flex-1 px-8 pt-4 common-form overflow-y-auto",children:[F(M,{labelCol:{span:4,xs:5},wrapperCol:{span:20,xs:19},form:c,onFinish:be,initialValues:d,children:[t(M.Item,{name:"primaryKey",label:a.formatMessage({id:"zM/rdn",defaultMessage:[{type:0,value:"\u4E3B\u952E\u9009\u62E9"}]}),rules:[{required:!0,message:a.formatMessage({id:"+0ahcJ",defaultMessage:[{type:0,value:"\u8BF7\u9009\u62E9\u4E3B\u952E"}]})}],children:t(H,{options:R})}),t(M.Item,{name:"apiList",label:a.formatMessage({id:"YrzlYQ",defaultMessage:[{type:0,value:"\u751F\u6210\u63A5\u53E3"}]}),children:t(P.Group,{onChange:ue,options:u})}),t(M.Item,{name:"prefix",label:a.formatMessage({id:"Pge30O",defaultMessage:[{type:0,value:"API\u524D\u7F00"}]}),rules:[{pattern:/^[A-Z][a-zA-Z0-9_]*$/,message:a.formatMessage({id:"2FgMsD",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165\u5B57\u6BCD\u6570\u5B57\u6216\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u4EE5\u5927\u5199\u5B57\u6BCD\u5F00\u5934"}]})}],children:t(U,{})}),t(ce,{ghost:!0,bordered:!1,defaultActiveKey:[],expandIcon:({isActive:s})=>t("img",{alt:"xiala",src:"assets/iconfont/xiala.svg",style:{height:"1em",width:"1em",transform:s?"":"rotate(-90deg)"}}),className:`${J["collapse-box"]} site-collapse-custom-collapse bg-light-50`,children:F(ce.Panel,{header:a.formatMessage({id:"lliahm",defaultMessage:[{type:0,value:"\u66F4\u591A\u8BBE\u7F6E"}]}),forceRender:!0,children:[F("div",{className:J.authContainer,children:[t(M.Item,{name:"authApiList",label:a.formatMessage({id:"EJ9IE3",defaultMessage:[{type:0,value:"\u63A5\u53E3\u89D2\u8272"}]}),children:t(P.Group,{options:u})}),t(M.Item,{name:"auth",label:a.formatMessage({id:"mOO4wE",defaultMessage:[{type:0,value:"\u767B\u5F55\u9274\u6743"}]}),children:F(O.Group,{children:[t(O,{value:-1,children:t(x,{id:"/yVpDb",defaultMessage:[{type:0,value:"\u9ED8\u8BA4"}]})}),t(O,{value:1,children:t(x,{id:"ZUPzqr",defaultMessage:[{type:0,value:"\u5F00\u542F"}]})}),t(O,{value:0,children:t(x,{id:"47GdDb",defaultMessage:[{type:0,value:"\u5173\u95ED"}]})})]})}),t(M.Item,{name:"authType",wrapperCol:{offset:4,xs:{offset:5}},children:F(O.Group,{children:[t(O,{value:G.RequireMatchAll,children:F("div",{children:["requireMatchAll",t(Z,{className:"mt-1",rule:"requireMatchAll"})]})}),t(O,{value:G.RequireMatchAny,children:F("div",{children:["requireMatchAny",t(Z,{className:"mt-1",rule:"requireMatchAny"})]})}),t(O,{value:G.DenyMatchAll,children:F("div",{children:["denyMatchAll",t(Z,{className:"mt-1",rule:"denyMatchAll"})]})}),t(O,{value:G.DenyMatchAny,children:F("div",{children:["denyMatchAny",t(Z,{className:"mt-1",rule:"denyMatchAny"})]})})]})}),t(M.Item,{name:"roleList",wrapperCol:{offset:4,xs:{offset:5}},children:t(H,{className:"disable-common-select",mode:"multiple",showArrow:!0,options:W!=null?W:[],fieldNames:{label:"full",value:"code"},optionLabelProp:"code"})})]}),t(M.Item,{name:"alias",label:a.formatMessage({id:"ZnzCll",defaultMessage:[{type:0,value:"\u522B\u540D"}]}),rules:[{required:!0,pattern:/^[a-zA-Z0-9_]*$/,message:a.formatMessage({id:"EdIsPB",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165\u5B57\u6BCD\u6570\u5B57\u6216\u4E0B\u5212\u7EBF\u7EC4\u5408"}]})}],children:t(U,{})})]},"1")}),t(M.Item,{name:"table",wrapperCol:{offset:4,xs:{offset:5}},children:t(Ee,{className:J.table,expandable:{indentSize:0,expandedRowKeys:j,onExpandedRowsChange:s=>{te(s)}},rowKey:"tableId",dataSource:g.fields,columns:$e,pagination:!1})}),t(M.Item,{wrapperCol:{offset:4,xs:{offset:5}},children:F(xe,{children:[t(_,{className:"mr-4 btn-cancel",onClick:()=>{c.resetFields()},children:t(x,{id:"r2dEd/",defaultMessage:[{type:0,value:"\u91CD\u7F6E"}]})}),t(_,{className:"mr-4 btn-save",htmlType:"submit",children:t(x,{id:"BtZh7z",defaultMessage:[{type:0,value:"\u521B\u5EFA"}]})})]})}),t(M.Item,{name:"dbName",hidden:!0,children:t(U,{})}),t(M.Item,{name:"modelName",hidden:!0,children:t(U,{})})]}),t(De,{open:!!re,title:a.formatMessage({id:"AO9K4t",defaultMessage:[{type:0,value:"\u6279\u91CF\u65B0\u5EFA\u9884\u89C8"}]}),onCancel:()=>{L(void 0)},footer:F("div",{className:"common-form",children:[t(_,{className:"btn-cancel",onClick:()=>{var s;L(void 0),(s=N.current)==null||s.call(N,0)},children:t(x,{id:"2QzYmY",defaultMessage:[{type:0,value:"\u53D6\u6D88"}]})}),se&&t(_,{className:"btn-save",onClick:()=>{var s;L(void 0),(s=N.current)==null||s.call(N,1)},children:t(x,{id:"6IHx+i",defaultMessage:[{type:0,value:"\u8DF3\u8FC7\u5DF2\u6709API"}]})}),t(_,{className:"btn-save",onClick:()=>{var s;L(void 0),(s=N.current)==null||s.call(N,2)},children:se?t(x,{id:"wLS1Dj",defaultMessage:[{type:0,value:"\u5168\u90E8\u8986\u76D6"}]}):t(x,{id:"bChoai",defaultMessage:[{type:0,value:"\u5168\u90E8\u521B\u5EFA"}]})})]}),children:re}),pe]})}export{Ia as default};
