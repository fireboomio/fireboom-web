import{l as T,K as xe,r as F,u as ve,ag as x,ae as $e,k as Z,Z as Me,j as t,ao as k,Q as j,W as J,ad as q,V as de,$ as je,aR as Ie}from"./index-91e91fd5.js";import{i as V}from"./use-immer.module-066abb58.js";import{R as _}from"./index-20e89033.js";import{u as De}from"./validate-132bbac1.js";import{A as Y,K as y,a as p,b as L,c as H}from"./interface-41bd3122.js";import{s as W}from"./index.module-37c81887.js";import{P as Ne}from"./index-960c6939.js";import{C as O}from"./index-f6504726.js";import{S as R}from"./index-eabd0a5e.js";import{A as Fe}from"./index-18a7e39e.js";import{T as Ce}from"./Table-8e6e0a91.js";import{M as Ae}from"./index-df4eeac8.js";import"./index-9e174e8a.js";import"./useShowArrow-0c1f1245.js";import"./index-4b9f0184.js";import"./DownOutlined-34ad1f97.js";import"./PurePanel-48186b27.js";import"./addEventListener-ca455d7f.js";import"./index-b2f17907.js";import"./conductUtil-499fd04c.js";import"./index-a9ee2ec1.js";import"./LeftOutlined-2163f967.js";import"./index-990fc22b.js";import"./useBreakpoint-9795cb0c.js";import"./useForceUpdate-06ef400a.js";import"./index-c5936972.js";function ke(e){let a;return e.auth===Y.enabled?a={authenticationConfig:{authRequired:!0}}:e.auth===Y.disabled&&(a={authenticationConfig:{authRequired:!1}}),e.apiList.map(d=>{const n=Se[d](e);return n.path=n.path.replace(/^\//,""),{enabled:!0,...n,...e.authApiList.includes(d)?a:void 0}})}const w=(e,a)=>{const{authType:d,authApiList:n,roleList:l}=e;return n.includes(a)&&l.length?` @rbac(${d}: [${l.join(", ")}])`:""},E=(e,a)=>{const d={};return Object.keys(e.table).forEach(n=>{e.table[n][a]&&(T.get(d,n)||T.set(d,n,!0))}),ue(d)};function ue(e,a=0){const d=`
`+"  ".repeat(a+2);return Object.keys(e).map(n=>e[n]===!0?d+n:`${d}${n} {${ue(e[n],a+1)}${d}}`).join("")}const Se={create(e){const a=Object.keys(e.table).filter(m=>e.table[m].create!==y.Hidden),d=a.filter(m=>e.table[m].isDirectField).map(m=>{const S=e.table[m].createType;return`$${m}: ${S.name}${e.table[m].create===y.Required?"!":""}${e.table[m].directive}`}).join(", "),n=a.filter(m=>e.table[m].isDirectField).map(m=>`${m}: $${m}`).join(", "),l=E(e,"detail"),o=(e.prefix?`/${e.prefix}`:"")+`/CreateOne${e.alias}`,b=`
mutation CreateOne${e.alias}(${d})${w(e,p.Create)} {
  data: ${e.dbName}_createOne${e.modelName}(data: {${n}}) {
    ${l}
  }
}`.trim();return{path:o,originContent:b}},delete(e){const a=e.primaryKey,d=e.table[a].type,n=(e.prefix?`/${e.prefix}`:"")+`/DeleteOne${e.alias}`,l=`
mutation DeleteOne${e.alias}($${a}: ${d}!)${w(e,p.Delete)} {
  data: ${e.dbName}_deleteOne${e.modelName}(where: {${a}: $${a}}) {
    ${a}
  }
}`.trim();return{path:n,originContent:l}},update(e){const a=e.primaryKey,d=Object.keys(e.table).filter(f=>e.table[f].update!==y.Hidden&&e.table[f].isDirectField).map(f=>({key:f,...e.table[f].updateType})),n=`$${a}: ${e.table[a].type}!, `+d.map(f=>`$${f.key}: ${f.name}${e.table[f.key].update===y.Required?"!":""}${e.table[f.key].directive}`).join(", "),l=d.map(f=>`${f.key}: ${f.isSet?`{set: $${f.key}}`:`$${f.key}`}`).join(", "),o=E(e,"detail"),b=(e.prefix?`/${e.prefix}`:"")+`/UpdateOne${e.alias}`,m=`
mutation UpdateOne${e.alias}(${n})${w(e,p.Update)} {
  data: ${e.dbName}_updateOne${e.modelName}(
    data: {${l}}
    where: {${a}: $${a}}
  ) {
    ${o}
  }
}`.trim();return{path:b,originContent:m}},detail(e){const a=e.primaryKey,d=e.table[a].type,n=E(e,"detail"),l=(e.prefix?`/${e.prefix}`:"")+`/GetOne${e.alias}`,o=`
query GetOne${e.alias}($${a}: ${d}!)${w(e,p.Detail)} {
  data: ${e.dbName}_findFirst${e.modelName}(where: {${a}: {equals: $${a}}}) {
    ${n}
  }
}`.trim();return{path:l,originContent:o}},list(e){const a=e.primaryKey,d=E(e,"list"),n=Object.keys(e.table).some(K=>e.table[K].sort),l=Object.keys(e.table).some(K=>e.table[K].filter),o=n?`, $orderBy: [${e.dbName}_${e.modelName}OrderByWithRelationInput]`:"",b=n?`
  orderBy: $orderBy`:"",m=l?`, $query: ${e.dbName}_${e.modelName}WhereInput`:"",f=l?`
    where: {AND: $query}`:"",S=l?"(where: {AND: $query})":"",U=(e.prefix?`/${e.prefix}`:"")+`/Get${e.alias}List`,B=`
query Get${e.alias}List($take: Int = 10, $skip: Int = 0${o}${m})${w(e,p.List)} {
  data: ${e.dbName}_findMany${e.modelName}(
    skip: $skip
    take: $take${b}${f}) {
    ${d}
  }
  total: ${e.dbName}_aggregate${e.modelName}${S} @transform(get: "_count.${a}") {
    _count {
      ${a}
    }
  }
}`.trim();return{path:U,originContent:B}},batchDelete(e){const a=e.primaryKey,d=e.table[a].type,n=(e.prefix?`/${e.prefix}`:"")+`/DeleteMany${e.alias}`,l=`
mutation DeleteMany${e.alias}($${a}s: [${d}]!)${w(e,p.BatchDelete)} {
  data: ${e.dbName}_deleteMany${e.modelName}(where: {${a}: {in: $${a}s}}) {
    count
  }
}`.trim();return{path:n,originContent:l}},export(e){const a=E(e,"list"),d=(e.prefix?`/${e.prefix}`:"")+`/GetMany${e.alias}`,n=`
query GetMany${e.alias}${w(e,p.Export)} {
  data: ${e.dbName}_findMany${e.modelName} {
    ${a}
  }
}`.trim();return{path:d,originContent:n}}},we=""+new URL("fail-icon-ab0b5984.svg",import.meta.url).href,Oe=""+new URL("fail-pic-f5fc5ada.svg",import.meta.url).href,Ke=""+new URL("success-icon-668656a8.svg",import.meta.url).href,qe=""+new URL("success-pic-b9a704a1.svg",import.meta.url).href;function Le(e,a){e.fields.forEach(d=>(a!=null&&a.obj2key[d.name]&&(d.originField=e.fields.find(n=>n.name===a.obj2key[n.name])),!0))}function Re(e,a){const d={};for(const[l,o]of e.matchAll(/input (\w+)\s\{\n[\s\S]*?\n}/g)){const b={};(l.match(/(\w+):\s(\w+)/g)??[]).forEach(m=>{const[f,S]=m.split(": ");b[f.trim()]={isSet:!1,name:S.trim()}}),d[o]=b}const n={};for(const[l,o]of e.matchAll(/enum (\w+)\s\{\n[\s\S]*?\n}/g))n[o]=!0;return Object.keys(d).forEach(l=>{const o=d[l];Object.keys(o).forEach(b=>{const m=o[b],f=d[m.name];f&&f.set&&(m.isSet=!0,m.name=f.set.name),(d[m.name]||n[m.name])&&(m.name=a+m.name)})}),d}function ce(e,a,d=1,n){const l=!!n;e.fields=e.fields.filter(o=>{if(o.tableId=o.name,n&&(o.tableId=(n==null?void 0:n.tableId)+"."+o.tableId),o.isForeign=l,o.parentField=n,o.isPrimaryKey=o.name===e.idField,o.kind!=="object")return!0;let b=a.find(m=>m.name===o.type);return b?(b=T.cloneDeep(b),d>0&&ce(b,a,d-1,o),o.children=b.fields,!0):!1})}function ca({bodyData:e}){const a=xe(),d=F.useMemo(()=>[{label:a.formatMessage({id:"1Spi9T",defaultMessage:[{type:0,value:"增加"}]}),value:p.Create},{label:a.formatMessage({id:"XeiAal",defaultMessage:[{type:0,value:"删除"}]}),value:p.Delete},{label:a.formatMessage({id:"t2iHNJ",defaultMessage:[{type:0,value:"更新"}]}),value:p.Update},{label:a.formatMessage({id:"s4hJju",defaultMessage:[{type:0,value:"详情"}]}),value:p.Detail},{label:a.formatMessage({id:"vA8Nfy",defaultMessage:[{type:0,value:"分页查询"}]}),value:p.List},{label:a.formatMessage({id:"2+X2n8",defaultMessage:[{type:0,value:"批量删除"}]}),value:p.BatchDelete},{label:a.formatMessage({id:"UOrOkX",defaultMessage:[{type:0,value:"查询全部"}]}),value:p.Export}],[a]);ve();const[n]=x.useForm(),l=x.useWatch("table",n),o=x.useWatch("prefix",n),{validateAPI:b}=De(),[m,f]=V(void 0),[S,U]=F.useState(),[B,K]=V([]),[X,ee]=V([]),[me,ae]=F.useState(),[te,P]=F.useState(),[se,oe]=F.useState(),[G,fe]=F.useState(),C=F.useRef(),[z,he]=F.useState(!1),{data:ge}=$e("/role",r=>Z.get(r).then(s=>(s.forEach(i=>{i.full=i.code+" "+i.remark}),s))),Q=Me(),ye=F.useMemo(()=>{const r=Q?[...Q]:[],s=[];for(;r.length;){const i=r.pop();i.isDir&&(i.path.includes(o)&&s.push({value:i.path.substring(1)}),r.push(...i.children??[]))}return s},[Q,o]);if(F.useEffect(()=>{var I,M,$,c;if(!e.model)return;K(((I=e.model)==null?void 0:I.fields.map(N=>({value:N.name,label:N.name})))||[]);const r=T.cloneDeep(e.model);Le(r,e.relationMap),ce(r,e.modelList||[],3);const s=Re(e.dmf??"",`${e.dbName}_`),i=s[`${r.name}CreateInput`],u={...s[`${r.name}UpdateInput`]},v={};(N=>{console.log(N),N.forEach(h=>{var ie,ne;h.children;let g;h.kind==="object"?g={isDirectField:!0,kind:h.kind,name:h.name,type:h.type,createType:i==null?void 0:i[h.name],updateType:u==null?void 0:u[h.name],detail:!1,filter:!1,list:!1,sort:!1,create:h.required?y.Required:y.Optional,update:y.Optional,createDisableFlag:!1,updateDisableFlag:!1,directive:"",sortDirection:H.Asc}:(g={isDirectField:!0,kind:h.kind,name:h.name,type:h.type,createType:i==null?void 0:i[h.name],updateType:u==null?void 0:u[h.name],sort:!0,detail:!0,list:!0,filter:!0,sortDirection:H.Asc,create:h.required?y.Required:y.Optional,update:h.name===((ie=e.model)==null?void 0:ie.idField)?y.Hidden:y.Optional,createDisableFlag:!1,updateDisableFlag:!1,directive:""},h.name===((ne=e.model)==null?void 0:ne.idField)?h.hasDefault?g.create=y.Hidden:g.create=y.Required:h.hasDefault&&(g.create=y.Hidden),g.createType===void 0&&(g.create=y.Hidden),g.updateType===void 0&&(g.update=y.Hidden)),h.tableId===r.idField&&(g.createDisableFlag=!0,g.updateDisableFlag=!0),h.required&&!h.hasDefault&&(g.createDisableFlag=!0),g.createType===void 0&&(g.createDisableFlag=!0),g.updateType===void 0&&(g.updateDisableFlag=!0),(h.name==="createdAt"||h.name==="created_at")&&(g.createDisableFlag=!0,g.updateDisableFlag=!0,g.create=y.Hidden,g.update=y.Hidden),(h.name==="updatedAt"||h.name==="updated_at")&&(g.createDisableFlag=!0,g.updateDisableFlag=!0,g.create=y.Required,g.update=y.Required,g.directive=" @injectCurrentDateTime(format: UnixDate)"),v[h.tableId??""]=g})})(r.fields),U({dbName:e.dbName,apiList:Object.values(p),authApiList:[p.Create,p.Update,p.Delete],roleList:[],auth:Y.default,authType:L.RequireMatchAll,table:v,prefix:((M=e==null?void 0:e.model)==null?void 0:M.name)??"",alias:($=e==null?void 0:e.model)==null?void 0:$.name,modelName:(c=e==null?void 0:e.model)==null?void 0:c.name,primaryKey:e.model.idField}),le(Object.values(p)),f(r),ae(void 0)},[e.dbName,e.dmf,e.model,e.modelList,e.relationMap]),F.useEffect(()=>{n.resetFields()},[S]),!m)return null;const pe=async r=>{let s=ke(r);const i=s.map(c=>c.path),u=de.loading(a.formatMessage({id:"p/NHCA",defaultMessage:[{type:0,value:"校验中"}]})),v=await Z.get("/operation",{params:{dataNames:i.join(",")}}),A=T.keyBy(v,"path");u();const I=await new Promise(c=>{C.current=c,oe(!!v.length),P(i.map(N=>t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"w-3/5",children:N}),A[N]?t.jsx("span",{className:"text-[#f21212]",children:t.jsx(j,{id:"G1Nhzp",defaultMessage:[{type:0,value:"已存在"}]})}):t.jsx("span",{children:t.jsx(j,{id:"vcG1mv",defaultMessage:[{type:0,value:"不存在"}]})})]},N)))});if(I===0||(I===1&&(s=s.filter(c=>!A[c.path])),s.length===0))return;const M=de.loading(a.formatMessage({id:"xaND3c",defaultMessage:[{type:0,value:"正在生成"}]}));let $;try{$=await Z.post("/operation/batch?overwrite=true",s)}catch(c){console.error(c)}P(void 0),M(),je(),ae(t.jsxs("div",{className:W.successInfo,children:[t.jsx("img",{src:$?qe:Oe,alt:"",className:"m-auto mt-30 left-3 block relative"}),t.jsx("div",{className:"font-500 mt-8 text-center text-default",children:$?t.jsx(j,{id:"2y+Dze",defaultMessage:[{type:0,value:"本次成功生成"},{type:1,value:"count"},{type:0,value:"条API"}],values:{count:$.filter(c=>c.succeed).length}}):"生成失败"}),$&&t.jsx("div",{className:"bg-[#FAFAFC] mx-auto rounded-2 mt-6 py-4 w-140",children:$.map(c=>t.jsxs("div",{className:"flex my-2.5 pr-27 pl-21 leading-5 items-center",children:[t.jsx("img",{src:c.succeed?Ke:we,alt:"",className:"flex-0"}),t.jsx("span",{className:"flex-1 text-default ml-1.5",children:c.dataName}),t.jsx(Ie,{className:"text-default ml-1.5 text-[#649FFF]",to:`/workbench/apimanage/${c.dataName}`,children:t.jsx(j,{id:"cDZ00w",defaultMessage:[{type:0,value:"查看"}]})})]},c.dataName))})]}))};function le(r){const s={};r.forEach(i=>{switch(i){case p.Create:s.create=!0;break;case p.Update:s.update=!0;break;case p.Detail:s.detail=!0;break;case p.List:s.list=!0,s.filter=!0,s.sort=!0;break;case p.Export:s.list=!0;break;case p.Delete:case p.BatchDelete:break}}),fe(s)}const D=(r,s,i)=>{const u=n.getFieldValue("table");u[r]||(u[r]={}),u[r][s]=i,n.setFieldValue("table",{...u})},re=(r,s,i)=>{var u,v,A;if(D(s.tableId??"",r,i),i){let I=s.parentField;for(;I;)D(I.tableId??"",r,i),I=I.parentField;if(s.children){X.includes(s.tableId)||ee(c=>{c.push(s.tableId)});const M=(u=s.children)==null?void 0:u.find(c=>!c.isPrimaryKey),$=(v=s.children)==null?void 0:v.find(c=>c.isPrimaryKey);M&&D(M.tableId??"",r,i),$&&D($.tableId??"",r,i)}}else{const I=n.getFieldValue("table");let M=s.parentField;for(;M;){const c=(A=M.children)==null?void 0:A.some(N=>I[N.tableId??""][r]);D(M.tableId??"",r,c),M=M.parentField}const $=[...s.children??[]];for(;$.length;){const c=$.pop();D((c==null?void 0:c.tableId)??"",r,!1),c!=null&&c.children&&$.push(...c.children)}}},be=[{title:a.formatMessage({id:"z0QaYJ",defaultMessage:[{type:0,value:"字段"}]}),dataIndex:"name",render:r=>t.jsx(Ne,{content:r,children:t.jsx("span",{children:r})})},{title:a.formatMessage({id:"5FboZ/",defaultMessage:[{type:0,value:"类型"}]}),dataIndex:"type"},{title:a.formatMessage({id:"Hxs6Qn",defaultMessage:[{type:0,value:"列表"}]}),dataIndex:"list",filterKey:"list",render:(r,s)=>{var i;return t.jsx(O,{checked:(i=l==null?void 0:l[s.tableId])==null?void 0:i.list,onClick:u=>{re("list",s,u.target.checked)}})}},{title:a.formatMessage({id:"s4hJju",defaultMessage:[{type:0,value:"详情"}]}),dataIndex:"detail",filterKey:"detail",render:(r,s)=>{var i;return t.jsx(O,{checked:(i=l==null?void 0:l[s.tableId])==null?void 0:i.detail,onChange:u=>{re("detail",s,u.target.checked)}})}},{title:a.formatMessage({id:"cLvrI5",defaultMessage:[{type:0,value:"过滤"}]}),dataIndex:"filter",filterKey:"filter",render:(r,s)=>{var i;return!s.isForeign&&t.jsx(O,{disabled:s.kind==="object",checked:(i=l==null?void 0:l[s.tableId])==null?void 0:i.filter,onChange:u=>{D(s.tableId,"filter",u.target.checked)}})}},{title:a.formatMessage({id:"GuD3c8",defaultMessage:[{type:0,value:"排序"}]}),dataIndex:"sort",filterKey:"sort",render:(r,s)=>{var i;return!s.isForeign&&t.jsx(O,{disabled:s.kind==="object",checked:(i=l==null?void 0:l[s.tableId])==null?void 0:i.sort,onChange:u=>{D(s.tableId,"sort",u.target.checked)}})}},{title:a.formatMessage({id:"M/Ydym",defaultMessage:[{type:0,value:"默认排序"}]}),dataIndex:"sortDirection",filterKey:"sort",render:(r,s)=>{var i,u;return!s.isForeign&&((i=l==null?void 0:l[s.tableId])!=null&&i.sort?t.jsx(R,{value:(u=l==null?void 0:l[s.tableId])==null?void 0:u.sortDirection,options:[{label:a.formatMessage({id:"v+Sakv",defaultMessage:[{type:0,value:"正序"}]}),value:H.Asc},{label:a.formatMessage({id:"2rw44l",defaultMessage:[{type:0,value:"倒序"}]}),value:H.Desc}],onChange:v=>{D(s.tableId,"sortDirection",v)}}):"-")}},{title:a.formatMessage({id:"BtZh7z",defaultMessage:[{type:0,value:"创建"}]}),dataIndex:"create",filterKey:"create",render:(r,s)=>{var i,u;return!s.isForeign&&t.jsx(R,{value:(i=l==null?void 0:l[s.tableId])==null?void 0:i.create,disabled:(u=l==null?void 0:l[s.tableId])==null?void 0:u.createDisableFlag,options:[{label:a.formatMessage({id:"EIebSr",defaultMessage:[{type:0,value:"无"}]}),value:y.Hidden},{label:a.formatMessage({id:"pf77Ih",defaultMessage:[{type:0,value:"选填"}]}),value:y.Optional},{label:a.formatMessage({id:"FQQECq",defaultMessage:[{type:0,value:"必填"}]}),value:y.Required}],onChange:v=>{D(s.tableId,"create",v)}})}},{title:a.formatMessage({id:"t2iHNJ",defaultMessage:[{type:0,value:"更新"}]}),dataIndex:"update",filterKey:"update",render:(r,s)=>{var i,u;return!s.isForeign&&t.jsx(R,{disabled:(i=l==null?void 0:l[s.tableId])==null?void 0:i.updateDisableFlag,value:((u=l==null?void 0:l[s.tableId])==null?void 0:u.update)??"choose",options:[{label:a.formatMessage({id:"EIebSr",defaultMessage:[{type:0,value:"无"}]}),value:y.Hidden},{label:a.formatMessage({id:"pf77Ih",defaultMessage:[{type:0,value:"选填"}]}),value:y.Optional},{label:a.formatMessage({id:"FQQECq",defaultMessage:[{type:0,value:"必填"}]}),value:y.Required}],onChange:v=>{D(s.tableId,"update",v)}})}}].filter(r=>!r.filterKey||(G==null?void 0:G[r.filterKey??""]));return t.jsxs("div",{className:"flex-1 px-8 pt-4 common-form overflow-y-auto",children:[t.jsxs(x,{labelCol:{span:4,xs:5},wrapperCol:{span:20,xs:19},form:n,onFinish:pe,initialValues:S,children:[t.jsx(x.Item,{name:"primaryKey",label:a.formatMessage({id:"zM/rdn",defaultMessage:[{type:0,value:"主键选择"}]}),rules:[{required:!0,message:a.formatMessage({id:"+0ahcJ",defaultMessage:[{type:0,value:"请选择主键"}]})}],children:t.jsx(R,{options:B})}),t.jsx(x.Item,{name:"apiList",label:a.formatMessage({id:"YrzlYQ",defaultMessage:[{type:0,value:"生成接口"}]}),children:t.jsx(O.Group,{onChange:le,options:d})}),t.jsx(x.Item,{name:"prefix",label:a.formatMessage({id:"lEfA98",defaultMessage:[{type:0,value:"API目录"}]}),rules:[{validator(r,s){if(!s)return Promise.resolve();const i=s.split("/");for(let u=0;u<i.length;u++){const v=i[u],A=b(v);if(A)return Promise.reject(new Error(a.formatMessage({id:"DnyK/f",defaultMessage:[{type:0,value:"每一级目录"}]})+A))}return Promise.resolve()}}],children:t.jsx(Fe,{options:ye})}),t.jsx(x.Item,{label:t.jsxs("div",{className:"cursor-pointer flex items-center",onClick:()=>{he(!z)},children:[t.jsx("img",{alt:"",className:"w-5",style:{transform:z?"":"rotate(-90deg)"},src:"./assets/shape-down.svg"}),a.formatMessage({id:"lliahm",defaultMessage:[{type:0,value:"更多设置"}]})]})}),t.jsxs("div",{style:{display:z?"block":"none"},children:[t.jsxs("div",{className:W.authContainer,children:[t.jsx(x.Item,{name:"authApiList",label:a.formatMessage({id:"6AqJp+",defaultMessage:[{type:0,value:"授权接口"}]}),children:t.jsx(O.Group,{options:d})}),t.jsx(x.Item,{name:"auth",label:a.formatMessage({id:"mOO4wE",defaultMessage:[{type:0,value:"登录鉴权"}]}),children:t.jsxs(k.Group,{children:[t.jsx(k,{value:-1,children:t.jsx(j,{id:"/yVpDb",defaultMessage:[{type:0,value:"默认"}]})}),t.jsx(k,{value:1,children:t.jsx(j,{id:"ZUPzqr",defaultMessage:[{type:0,value:"开启"}]})}),t.jsx(k,{value:0,children:t.jsx(j,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})})]})}),t.jsx(x.Item,{name:"authType",wrapperCol:{offset:4,xs:{offset:5}},children:t.jsxs(k.Group,{children:[t.jsx(k,{value:L.RequireMatchAll,children:t.jsxs("div",{children:["requireMatchAll",t.jsx(_,{className:"mt-1",rule:"requireMatchAll"})]})}),t.jsx(k,{value:L.RequireMatchAny,children:t.jsxs("div",{children:["requireMatchAny",t.jsx(_,{className:"mt-1",rule:"requireMatchAny"})]})}),t.jsx(k,{value:L.DenyMatchAll,children:t.jsxs("div",{children:["denyMatchAll",t.jsx(_,{className:"mt-1",rule:"denyMatchAll"})]})}),t.jsx(k,{value:L.DenyMatchAny,children:t.jsxs("div",{children:["denyMatchAny",t.jsx(_,{className:"mt-1",rule:"denyMatchAny"})]})})]})}),t.jsx(x.Item,{name:"roleList",wrapperCol:{offset:4,xs:{offset:5}},children:t.jsx(R,{className:"disable-common-select",mode:"multiple",showArrow:!0,options:ge??[],fieldNames:{label:"full",value:"code"},optionLabelProp:"code"})})]}),t.jsx(x.Item,{name:"alias",label:a.formatMessage({id:"ZnzCll",defaultMessage:[{type:0,value:"别名"}]}),rules:[{required:!0,pattern:/^[a-zA-Z0-9_]*$/,message:a.formatMessage({id:"EdIsPB",defaultMessage:[{type:0,value:"请输入字母数字或下划线组合"}]})}],children:t.jsx(J,{})})]}),t.jsx(x.Item,{name:"table",label:a.formatMessage({id:"Rv5Swi",defaultMessage:[{type:0,value:"选择字段"}]}),children:t.jsx(Ce,{className:W.table,expandable:{indentSize:0,expandedRowKeys:X,onExpandedRowsChange:r=>{ee(r)}},rowKey:"tableId",dataSource:m.fields,columns:be,pagination:!1})}),t.jsx(x.Item,{wrapperCol:{offset:4,xs:{offset:5}},children:t.jsxs(t.Fragment,{children:[t.jsx(q,{className:"mr-4 btn-cancel",onClick:()=>{n.resetFields()},children:t.jsx(j,{id:"r2dEd/",defaultMessage:[{type:0,value:"重置"}]})}),t.jsx(q,{className:"mr-4 btn-save",htmlType:"submit",children:t.jsx(j,{id:"BtZh7z",defaultMessage:[{type:0,value:"创建"}]})})]})}),t.jsx(x.Item,{name:"dbName",hidden:!0,children:t.jsx(J,{})}),t.jsx(x.Item,{name:"modelName",hidden:!0,children:t.jsx(J,{})})]}),te&&t.jsx(Ae,{open:!0,title:a.formatMessage({id:"AO9K4t",defaultMessage:[{type:0,value:"批量新建预览"}]}),onCancel:()=>{P(void 0)},footer:t.jsxs("div",{className:"common-form",children:[t.jsx(q,{className:"btn-cancel",onClick:()=>{var r;P(void 0),(r=C.current)==null||r.call(C,0)},children:t.jsx(j,{id:"2QzYmY",defaultMessage:[{type:0,value:"取消"}]})}),se&&t.jsx(q,{className:"btn-save",onClick:()=>{var r;(r=C.current)==null||r.call(C,1)},children:t.jsx(j,{id:"6IHx+i",defaultMessage:[{type:0,value:"跳过已有API"}]})}),t.jsx(q,{className:"btn-save",onClick:()=>{var r;(r=C.current)==null||r.call(C,2)},children:se?t.jsx(j,{id:"wLS1Dj",defaultMessage:[{type:0,value:"全部覆盖"}]}):t.jsx(j,{id:"bChoai",defaultMessage:[{type:0,value:"全部创建"}]})})]}),children:te},"confirmModal"),me]})}export{ca as default};
