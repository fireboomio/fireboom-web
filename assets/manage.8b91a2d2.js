import{r as f,j as n,$ as ea,a0 as de,a7 as je,H as ve,y as U,x as Ae,f as q,p as we,ag as Ta,a4 as sa,a1 as Ra,w as $a,an as Ba,ao as za,G as Be,am as Ha,ap as Ka,aq as Wa,z as la,bJ as ja,aF as Ua,d as Ya,u as Ga,m as ye,c as Ee,g as re,I as qe,T as Xa,B as _e,b4 as qa}from"./index.e5e6c754.js";import"./index.5e1fa168.js";import{u as aa,b as Ja,B as Za,d as Qa,g as et}from"./iconUtil.31c13224.js";import{C as Ca}from"./Collapse.3bf6cf6c.js";import{D as ia}from"./index.92cdb66e.js";import{m as at,j as Je,D as ca,M as ua,B as tt}from"./conductUtil.03f406cc.js";import{I as nt}from"./index.60d20720.js";import{M as da}from"./index.6f73eb32.js";import{P as rt}from"./index.67bc873e.js";import{P as fa}from"./index.6fa46df0.js";import{U as ot}from"./index.e308af9d.js";import{L as st,R as lt}from"./RightOutlined.73e4cc97.js";import{K as be}from"./KeyCode.9c493596.js";import{d as ze}from"./dayjs.min.fccffbb3.js";import{i as Se}from"./use-immer.module.1d9a0526.js";import{f as it}from"./utils.aecd68b7.js";import"./pickAttrs.c5bbb5fc.js";import"./Overflow.321ca619.js";import"./DownOutlined.75881d1e.js";import"./index.e54b5c9c.js";import"./css.7dd30b7b.js";import"./DialogWrap.947e0e2f.js";import"./useForceUpdate.09faac07.js";import"./DeleteOutlined.d0f28ba8.js";var ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};const ut=ct;var xa=function(a,r){return n(ea,{...de(de({},a),{},{ref:r,icon:ut})})};xa.displayName="ArrowDownOutlined";const He=f.exports.forwardRef(xa);var dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};const ft=dt;var ya=function(a,r){return n(ea,{...de(de({},a),{},{ref:r,icon:ft})})};ya.displayName="ArrowUpOutlined";const Ke=f.exports.forwardRef(ya);var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const vt=pt;var ba=function(a,r){return n(ea,{...de(de({},a),{},{ref:r,icon:vt})})};ba.displayName="SyncOutlined";const mt=f.exports.forwardRef(ba);var Ve=f.exports.createContext(null),ta="__RC_CASCADER_SPLIT__",Sa="SHOW_PARENT",wa="SHOW_CHILD";function Me(e){return e.join(ta)}function De(e){return e.map(Me)}function ht(e){return e.split(ta)}function gt(e){var a=e||{},r=a.label,o=a.value,l=a.children,i=o||"value";return{label:r||"label",value:i,key:i,children:l||"children"}}function Fe(e,a){var r,o;return(r=e.isLeaf)!==null&&r!==void 0?r:!(!((o=e[a.children])===null||o===void 0)&&o.length)}function Ct(e){var a=e.parentElement;if(!!a){var r=e.offsetTop-a.offsetTop;r-a.scrollTop<0?a.scrollTo({top:r}):r+e.offsetHeight-a.scrollTop>a.offsetHeight&&a.scrollTo({top:r+e.offsetHeight-a.offsetHeight})}}function pa(e,a,r){var o=new Set(e),l=a();return e.filter(function(i){var d=l[i],u=d?d.parent:null,m=d?d.children:null;return r===wa?!(m&&m.some(function(p){return p.key&&o.has(p.key)})):!(u&&!u.node.disabled&&o.has(u.key))})}function Le(e,a,r){for(var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=a,i=[],d=function(p){var _,C,F,M=e[p],x=(_=l)===null||_===void 0?void 0:_.findIndex(function(S){var I=S[r.value];return o?String(I)===String(M):I===M}),t=x!==-1?(C=l)===null||C===void 0?void 0:C[x]:null;i.push({value:(F=t==null?void 0:t[r.value])!==null&&F!==void 0?F:M,index:x,option:t}),l=t==null?void 0:t[r.children]},u=0;u<e.length;u+=1)d(u);return i}const xt=function(e,a,r,o,l){return f.exports.useMemo(function(){var i=l||function(d){var u=o?d.slice(-1):d,m=" / ";return u.every(function(p){return["string","number"].includes(je(p))})?u.join(m):u.reduce(function(p,_,C){var F=f.exports.isValidElement(_)?f.exports.cloneElement(_,{key:C}):_;return C===0?[F]:[].concat(ve(p),[m,F])},[])};return e.map(function(d){var u,m,p=Le(d,a,r),_=i(p.map(function(F){var M,x=F.option,t=F.value;return(M=x==null?void 0:x[r.label])!==null&&M!==void 0?M:t}),p.map(function(F){var M=F.option;return M})),C=Me(d);return{label:_,value:C,key:C,valueCells:d,disabled:(u=p[p.length-1])===null||u===void 0||(m=u.option)===null||m===void 0?void 0:m.disabled}})},[e,a,r,l,o])},yt=function(e,a){var r=f.exports.useRef({options:null,info:null}),o=f.exports.useCallback(function(){return r.current.options!==e&&(r.current.options=e,r.current.info=at(e,{fieldNames:a,initWrapper:function(i){return de(de({},i),{},{pathKeyEntities:{}})},processEntity:function(i,d){var u=i.nodes.map(function(m){return m[a.value]}).join(ta);d.pathKeyEntities[u]=i,i.key=u}})),r.current.info.pathKeyEntities},[a,e]);return o},bt=function(e,a){return f.exports.useCallback(function(r){var o=[],l=[];return r.forEach(function(i){var d=Le(i,e,a);d.every(function(u){return u.option})?l.push(i):o.push(i)}),[l,o]},[e,a])};function va(e){var a=f.exports.useRef();a.current=e;var r=f.exports.useCallback(function(){return a.current.apply(a,arguments)},[]);return r}function St(e){return f.exports.useMemo(function(){if(!e)return[!1,{}];var a={matchInputWidth:!0,limit:50};return e&&je(e)==="object"&&(a=de(de({},a),e)),a.limit<=0&&delete a.limit,[!0,a]},[e])}var Ie="__rc_cascader_search_mark__",wt=function(a,r,o){var l=o.label;return r.some(function(i){return String(i[l]).toLowerCase().includes(a.toLowerCase())})},Mt=function(a,r,o,l){return r.map(function(i){return i[l.label]}).join(" / ")};const kt=function(e,a,r,o,l,i){var d=l.filter,u=d===void 0?wt:d,m=l.render,p=m===void 0?Mt:m,_=l.limit,C=_===void 0?50:_,F=l.sort;return f.exports.useMemo(function(){var M=[];if(!e)return[];function x(t,S){t.forEach(function(I){if(!(!F&&C>0&&M.length>=C)){var Y=[].concat(ve(S),[I]),w=I[r.children];if((!w||w.length===0||i)&&u(e,Y,{label:r.label})){var B;M.push(de(de({},I),{},(B={},U(B,r.label,p(e,Y,o,r)),U(B,Ie,Y),B)))}w&&x(I[r.children],Y)}})}return x(a,[]),F&&M.sort(function(t,S){return F(t[Ie],S[Ie],e,r)}),C>0?M.slice(0,C):M},[e,a,r,o,p,i,u,F,C])};function _t(e){var a,r=e.prefixCls,o=e.checked,l=e.halfChecked,i=e.disabled,d=e.onClick,u=f.exports.useContext(Ve),m=u.checkable,p=typeof m!="boolean"?m:null;return n("span",{className:Ae("".concat(r),(a={},U(a,"".concat(r,"-checked"),o),U(a,"".concat(r,"-indeterminate"),!o&&l),U(a,"".concat(r,"-disabled"),i),a)),onClick:d,children:p})}var Ma="__cascader_fix_label__";function Dt(e){var a=e.prefixCls,r=e.multiple,o=e.options,l=e.activeValue,i=e.prevValuePath,d=e.onToggleOpen,u=e.onSelect,m=e.onActive,p=e.checkedSet,_=e.halfCheckedSet,C=e.loadingKeys,F=e.isSelectable,M="".concat(a,"-menu"),x="".concat(a,"-menu-item"),t=f.exports.useContext(Ve),S=t.fieldNames,I=t.changeOnSelect,Y=t.expandTrigger,w=t.expandIcon,B=t.loadingIcon,$=t.dropdownMenuColumnStyle,y=Y==="hover",A=f.exports.useMemo(function(){return o.map(function(v){var P,k=v.disabled,D=v[Ie],Q=(P=v[Ma])!==null&&P!==void 0?P:v[S.label],T=v[S.value],K=Fe(v,S),J=D?D.map(function(z){return z[S.value]}):[].concat(ve(i),[T]),W=Me(J),ee=C.includes(W),G=p.has(W),H=_.has(W);return{disabled:k,label:Q,value:T,isLeaf:K,isLoading:ee,checked:G,halfChecked:H,option:v,fullPath:J,fullPathKey:W}})},[o,p,S,_,C,i]);return n("ul",{className:M,role:"menu",children:A.map(function(v){var P,k=v.disabled,D=v.label,Q=v.value,T=v.isLeaf,K=v.isLoading,J=v.checked,W=v.halfChecked,ee=v.option,G=v.fullPath,H=v.fullPathKey,z=function(){!k&&(!y||!T)&&m(G)},me=function(){F(ee)&&u(G,T)},X;return typeof ee.title=="string"?X=ee.title:typeof D=="string"&&(X=D),q("li",{className:Ae(x,(P={},U(P,"".concat(x,"-expand"),!T),U(P,"".concat(x,"-active"),l===Q),U(P,"".concat(x,"-disabled"),k),U(P,"".concat(x,"-loading"),K),P)),style:$,role:"menuitemcheckbox",title:X,"aria-checked":J,"data-path-key":H,onClick:function(){z(),(!r||T)&&me()},onDoubleClick:function(){I&&d(!1)},onMouseEnter:function(){y&&z()},onMouseDown:function(le){le.preventDefault()},children:[r&&n(_t,{prefixCls:"".concat(a,"-checkbox"),checked:J,halfChecked:W,disabled:k,onClick:function(le){le.stopPropagation(),me()}}),n("div",{className:"".concat(x,"-content"),children:D}),!K&&w&&!T&&n("div",{className:"".concat(x,"-expand-icon"),children:w}),K&&B&&n("div",{className:"".concat(x,"-loading-icon"),children:B})]},H)})})}const Ot=function(){var e=aa(),a=e.multiple,r=e.open,o=f.exports.useContext(Ve),l=o.values,i=f.exports.useState([]),d=we(i,2),u=d[0],m=d[1];return f.exports.useEffect(function(){if(r&&!a){var p=l[0];m(p||[])}},[r]),[u,m]},Nt=function(e,a,r,o,l,i){var d=aa(),u=d.direction,m=d.searchValue,p=d.toggleOpen,_=d.open,C=u==="rtl",F=f.exports.useMemo(function(){for(var $=-1,y=a,A=[],v=[],P=o.length,k=function(W){var ee=y.findIndex(function(G){return G[r.value]===o[W]});if(ee===-1)return"break";$=ee,A.push($),v.push(o[W]),y=y[$][r.children]},D=0;D<P&&y;D+=1){var Q=k(D);if(Q==="break")break}for(var T=a,K=0;K<A.length-1;K+=1)T=T[A[K]][r.children];return[v,$,T]},[o,r,a]),M=we(F,3),x=M[0],t=M[1],S=M[2],I=function(y){l(y)},Y=function(y){var A=S.length,v=t;v===-1&&y<0&&(v=A);for(var P=0;P<A;P+=1){v=(v+y+A)%A;var k=S[v];if(k&&!k.disabled){var D=k[r.value],Q=x.slice(0,-1).concat(D);I(Q);return}}},w=function(){if(x.length>1){var y=x.slice(0,-1);I(y)}else p(!1)},B=function(){var y,A=((y=S[t])===null||y===void 0?void 0:y[r.children])||[],v=A.find(function(k){return!k.disabled});if(v){var P=[].concat(ve(x),[v[r.value]]);I(P)}};f.exports.useImperativeHandle(e,function(){return{onKeyDown:function(y){var A=y.which;switch(A){case be.UP:case be.DOWN:{var v=0;A===be.UP?v=-1:A===be.DOWN&&(v=1),v!==0&&Y(v);break}case be.LEFT:{C?B():w();break}case be.RIGHT:{C?w():B();break}case be.BACKSPACE:{m||w();break}case be.ENTER:{if(x.length){var P=S[t],k=(P==null?void 0:P[Ie])||[];k.length?i(k.map(function(D){return D[r.value]}),k[k.length-1]):i(x,S[t])}break}case be.ESC:p(!1),_&&y.stopPropagation()}},onKeyUp:function(){}}})};var Pt=f.exports.forwardRef(function(e,a){var r,o,l,i,d=aa(),u=d.prefixCls,m=d.multiple,p=d.searchValue,_=d.toggleOpen,C=d.notFoundContent,F=d.direction,M=f.exports.useRef(),x=F==="rtl",t=f.exports.useContext(Ve),S=t.options,I=t.values,Y=t.halfValues,w=t.fieldNames,B=t.changeOnSelect,$=t.onSelect,y=t.searchOptions,A=t.dropdownPrefixCls,v=t.loadData,P=t.expandTrigger,k=A||u,D=f.exports.useState([]),Q=we(D,2),T=Q[0],K=Q[1],J=function(b){if(!(!v||p)){var O=Le(b,S,w),E=O.map(function(ue){var fe=ue.option;return fe}),j=E[E.length-1];if(j&&!Fe(j,w)){var ce=Me(b);K(function(ue){return[].concat(ve(ue),[ce])}),v(E)}}};f.exports.useEffect(function(){T.length&&T.forEach(function(L){var b=ht(L),O=Le(b,S,w,!0).map(function(j){var ce=j.option;return ce}),E=O[O.length-1];(!E||E[w.children]||Fe(E,w))&&K(function(j){return j.filter(function(ce){return ce!==L})})})},[S,T,w]);var W=f.exports.useMemo(function(){return new Set(De(I))},[I]),ee=f.exports.useMemo(function(){return new Set(De(Y))},[Y]),G=Ot(),H=we(G,2),z=H[0],me=H[1],X=function(b){me(b),J(b)},ae=function(b){var O=b.disabled,E=Fe(b,w);return!O&&(E||B||m)},le=function(b,O){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;$(b),!m&&(O||B&&(P==="hover"||E))&&_(!1)},ie=f.exports.useMemo(function(){return p?y:S},[p,y,S]),s=f.exports.useMemo(function(){for(var L=[{options:ie}],b=ie,O=function(ue){var fe=z[ue],N=b.find(function(se){return se[w.value]===fe}),Z=N==null?void 0:N[w.children];if(!(Z!=null&&Z.length))return"break";b=Z,L.push({options:Z})},E=0;E<z.length;E+=1){var j=O(E);if(j==="break")break}return L},[ie,z,w]),c=function(b,O){ae(O)&&le(b,Fe(O,w),!0)};Nt(a,ie,w,z,X,c),f.exports.useEffect(function(){for(var L=0;L<z.length;L+=1){var b,O=z.slice(0,L+1),E=Me(O),j=(b=M.current)===null||b===void 0?void 0:b.querySelector('li[data-path-key="'.concat(E.replace(/\\{0,2}"/g,'\\"'),'"]'));j&&Ct(j)}},[z]);var h=!(!((r=s[0])===null||r===void 0||(o=r.options)===null||o===void 0)&&o.length),g=[(l={},U(l,w.value,"__EMPTY__"),U(l,Ma,C),U(l,"disabled",!0),l)],V=de(de({},e),{},{multiple:!h&&m,onSelect:le,onActive:X,onToggleOpen:_,checkedSet:W,halfCheckedSet:ee,loadingKeys:T,isSelectable:ae}),oe=h?[{options:g}]:s,ge=oe.map(function(L,b){var O=z.slice(0,b),E=z[b];return n(Dt,{...V,prefixCls:k,options:L.options,prevValuePath:O,activeValue:E},b)});return n("div",{className:Ae("".concat(k,"-menus"),(i={},U(i,"".concat(k,"-menu-empty"),h),U(i,"".concat(k,"-rtl"),x),i)),ref:M,children:ge})}),Et=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy"];function Ft(e){return Array.isArray(e)&&Array.isArray(e[0])}function ma(e){return e?Ft(e)?e:(e.length===0?[]:[e]).map(function(a){return Array.isArray(a)?a:[a]}):[]}var Te=f.exports.forwardRef(function(e,a){var r=e.id,o=e.prefixCls,l=o===void 0?"rc-cascader":o,i=e.fieldNames,d=e.defaultValue,u=e.value,m=e.changeOnSelect,p=e.onChange,_=e.displayRender,C=e.checkable,F=e.searchValue,M=e.onSearch,x=e.showSearch,t=e.expandTrigger,S=e.options,I=e.dropdownPrefixCls,Y=e.loadData,w=e.popupVisible,B=e.open,$=e.popupClassName,y=e.dropdownClassName,A=e.dropdownMenuColumnStyle,v=e.popupPlacement,P=e.placement,k=e.onDropdownVisibleChange,D=e.onPopupVisibleChange,Q=e.expandIcon,T=Q===void 0?">":Q,K=e.loadingIcon,J=e.children,W=e.dropdownMatchSelectWidth,ee=W===void 0?!1:W,G=e.showCheckedStrategy,H=G===void 0?Sa:G,z=Ta(e,Et),me=Ja(r),X=!!C,ae=sa(d,{value:u,postState:ma}),le=we(ae,2),ie=le[0],s=le[1],c=f.exports.useMemo(function(){return gt(i)},[JSON.stringify(i)]),h=f.exports.useMemo(function(){return S||[]},[S]),g=yt(h,c),V=f.exports.useCallback(function(te){var R=g();return te.map(function(ne){var he=R[ne].nodes;return he.map(function(xe){return xe[c.value]})})},[g,c]),oe=sa("",{value:F,postState:function(R){return R||""}}),ge=we(oe,2),L=ge[0],b=ge[1],O=function(R,ne){b(R),ne.source!=="blur"&&M&&M(R)},E=St(x),j=we(E,2),ce=j[0],ue=j[1],fe=kt(L,h,c,I||l,ue,m),N=bt(h,c),Z=f.exports.useMemo(function(){var te=N(ie),R=we(te,2),ne=R[0],he=R[1];if(!X||!ie.length)return[ne,[],he];var xe=De(ne),Ne=g(),ke=Je(xe,!0,Ne),Re=ke.checkedKeys,$e=ke.halfCheckedKeys;return[V(Re),V($e),he]},[X,ie,g,V,N]),se=we(Z,3),Ce=se[0],Ue=se[1],Oe=se[2],ka=f.exports.useMemo(function(){var te=De(Ce),R=pa(te,g,H);return[].concat(ve(Oe),ve(V(R)))},[Ce,g,V,Oe,H]),_a=xt(ka,h,c,X,_),Ye=va(function(te){if(s(te),p){var R=ma(te),ne=R.map(function(Ne){return Le(Ne,h,c).map(function(ke){return ke.option})}),he=X?R:R[0],xe=X?ne:ne[0];p(he,xe)}}),Ge=va(function(te){if(b(""),!X)Ye(te);else{var R=Me(te),ne=De(Ce),he=De(Ue),xe=ne.includes(R),Ne=Oe.some(function(Pe){return Me(Pe)===R}),ke=Ce,Re=Oe;if(Ne&&!xe)Re=Oe.filter(function(Pe){return Me(Pe)!==R});else{var $e=xe?ne.filter(function(Pe){return Pe!==R}):[].concat(ve(ne),[R]),oa=g(),Xe;if(xe){var Aa=Je($e,{checked:!1,halfCheckedKeys:he},oa);Xe=Aa.checkedKeys}else{var La=Je($e,!0,oa);Xe=La.checkedKeys}var Va=pa(Xe,g,H);ke=V(Va)}Ye([].concat(ve(Re),ve(ke)))}}),Da=function(R,ne){if(ne.type==="clear"){Ye([]);return}var he=ne.values[0].valueCells;Ge(he)},Oa=B!==void 0?B:w,Na=y||$,Pa=P||v,Ea=function(R){k==null||k(R),D==null||D(R)},Fa=f.exports.useMemo(function(){return{options:h,fieldNames:c,values:Ce,halfValues:Ue,changeOnSelect:m,onSelect:Ge,checkable:C,searchOptions:fe,dropdownPrefixCls:I,loadData:Y,expandTrigger:t,expandIcon:T,loadingIcon:K,dropdownMenuColumnStyle:A}},[h,c,Ce,Ue,m,Ge,C,fe,I,Y,t,T,K,A]),ra=!(L?fe:h).length,Ia=L&&ue.matchInputWidth||ra?{}:{minWidth:"auto"};return n(Ve.Provider,{value:Fa,children:n(Za,{...z,ref:a,id:me,prefixCls:l,dropdownMatchSelectWidth:ee,dropdownStyle:Ia,displayValues:_a,onDisplayValuesChange:Da,mode:X?"multiple":void 0,searchValue:L,onSearch:O,showSearch:ce,OptionList:Pt,emptyOptions:ra,open:Oa,dropdownClassName:Na,placement:Pa,onDropdownVisibleChange:Ea,getRawInputElement:function(){return J}})})});Te.SHOW_PARENT=Sa;Te.SHOW_CHILD=wa;var It=globalThis&&globalThis.__rest||function(e,a){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)a.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(r[o[l]]=e[o[l]]);return r},At=Te.SHOW_CHILD,Lt=Te.SHOW_PARENT;function Vt(e,a,r){var o=e.toLowerCase().split(a).reduce(function(d,u,m){return m===0?[u]:[].concat(ve(d),[a,u])},[]),l=[],i=0;return o.forEach(function(d,u){var m=i+d.length,p=e.slice(i,m);i=m,u%2===1&&(p=n("span",{className:"".concat(r,"-menu-item-keyword"),children:p},"seperator-".concat(u))),l.push(p)}),l}var Tt=function(a,r,o,l){var i=[],d=a.toLowerCase();return r.forEach(function(u,m){m!==0&&i.push(" / ");var p=u[l.label],_=je(p);(_==="string"||_==="number")&&(p=Vt(String(p),d,o)),i.push(p)}),i},na=f.exports.forwardRef(function(e,a){var r,o=e.prefixCls,l=e.size,i=e.disabled,d=e.className,u=e.multiple,m=e.bordered,p=m===void 0?!0:m,_=e.transitionName,C=e.choiceTransitionName,F=C===void 0?"":C,M=e.popupClassName,x=e.dropdownClassName,t=e.expandIcon,S=e.placement,I=e.showSearch,Y=e.allowClear,w=Y===void 0?!0:Y,B=e.notFoundContent,$=e.direction,y=e.getPopupContainer,A=e.status,v=e.showArrow,P=It(e,["prefixCls","size","disabled","className","multiple","bordered","transitionName","choiceTransitionName","popupClassName","dropdownClassName","expandIcon","placement","showSearch","allowClear","notFoundContent","direction","getPopupContainer","status","showArrow"]),k=Ra(P,["suffixIcon"]),D=f.exports.useContext($a),Q=D.getPopupContainer,T=D.getPrefixCls,K=D.renderEmpty,J=D.direction,W=$||J,ee=W==="rtl",G=f.exports.useContext(Ba),H=G.status,z=G.hasFeedback,me=G.isFormItemInput,X=G.feedbackIcon,ae=za(H,A),le=B||(K||Qa)("Cascader"),ie=T(),s=T("select",o),c=T("cascader",o),h=Ae(M||x,"".concat(c,"-dropdown"),U({},"".concat(c,"-dropdown-rtl"),W==="rtl")),g=f.exports.useMemo(function(){if(!I)return I;var se={render:Tt};return je(I)==="object"&&(se=Be(Be({},se),I)),se},[I]),V=f.exports.useContext(Ha),oe=l||V,ge=f.exports.useContext(Ka),L=i||ge,b=t;t||(b=ee?n(st,{}):n(lt,{}));var O=n("span",{className:"".concat(s,"-menu-item-loading-icon"),children:n(Ua,{spin:!0})}),E=f.exports.useMemo(function(){return u?n("span",{className:"".concat(c,"-checkbox-inner")}):!1},[u]),j=v!==void 0?v:e.loading||!u,ce=et(Be(Be({},e),{hasFeedback:z,feedbackIcon:X,showArrow:j,multiple:u,prefixCls:s})),ue=ce.suffixIcon,fe=ce.removeIcon,N=ce.clearIcon,Z=function(){return S!==void 0?S:$==="rtl"?"bottomRight":"bottomLeft"};return n(Te,{prefixCls:s,className:Ae(!o&&c,(r={},U(r,"".concat(s,"-lg"),oe==="large"),U(r,"".concat(s,"-sm"),oe==="small"),U(r,"".concat(s,"-rtl"),ee),U(r,"".concat(s,"-borderless"),!p),U(r,"".concat(s,"-in-form-item"),me),r),Wa(s,ae,z),d),disabled:L,...k,direction:W,placement:Z(),notFoundContent:le,allowClear:w,showSearch:g,expandIcon:b,inputIcon:ue,removeIcon:fe,clearIcon:N,loadingIcon:O,checkable:E,dropdownClassName:h,dropdownPrefixCls:o||c,choiceTransitionName:la(ie,"",F),transitionName:la(ie,ja(S),_),getPopupContainer:y||Q,ref:a,showArrow:z||v})});na.SHOW_PARENT=Lt;na.SHOW_CHILD=At;const Rt=na,$t="/assets/icon-compress.13fdfaa3.svg",Bt="/assets/icon-doc.2d1327be.svg",Ze="/assets/icon-fold.f1c27fac.svg",zt="/assets/icon-other.14c73ad1.svg",Ht="/assets/icon-pic.5e3b961a.svg",Kt="/assets/icon-video.e242656f.svg",Wt="_container_14ru3_1",jt="_cascadeContainer_14ru3_11",Ut="_fileDetail_14ru3_22",Yt="_ellipsis_14ru3_97",Gt="_fileDetailBody_14ru3_110",Xt="_header_14ru3_115",qt="_collapse_14ru3_123",Jt="_bread_14ru3_142",Zt="_leafBread_14ru3_143",pe={container:Wt,cascadeContainer:jt,fileDetail:Ut,"casader-select":"_casader-select_14ru3_38",ellipsis:Yt,fileDetailBody:Gt,header:Xt,collapse:qt,bread:Jt,leafBread:Zt},ha={compress:new Set(["zip","rar","7z","tar","gz","bz2","xz","lz","lzma","zst","cab"]),pic:new Set(["jpg","jpeg","png","gif","bmp","webp","svg","ico","tiff","psd","raw","heif","indd","ai","eps","svgz","ai","eps","ps"]),video:new Set(["mp4","avi","rmvb","rm","flv","mkv","mov","wmv","mpg","mpeg","3gp","webm","ts","m3u8","f4v","f4p","f4a","f4b","m4v","m4a","m4b","m4r","m4p","m4u"]),doc:new Set(["doc","docx","xls","xlsx","ppt","pptx","pdf","txt","md","csv","html","htm","xml","json","log","sql"])},{Panel:ga}=Ca;function Qt(e,a){return(e.isDir?1:2)-(a.isDir?1:2)}function We(e){var o,l,i;const a=((l=(o=e.split("."))==null?void 0:o.pop())==null?void 0:l.toLowerCase())||"";return(i=Object.keys(ha).find(d=>{if(ha[d].has(a))return!0}))!=null?i:"other"}const Qe={pic:Ht,video:Kt,doc:Bt,compress:$t,other:zt};function en({bucketId:e}){var X,ae,le,ie;const a=Ya(),r=Ga(),[o,l]=Se(!0),[i,d]=Se(!1),[u,m]=Se("name"),[p,_]=Se(!0),[C,F]=Se(""),[M,x]=Se(null),[t,S]=Se(void 0),[I,Y]=Se([]),[w,B]=Se(!1),$=f.exports.useRef(null),y=f.exports.useRef(),A=f.exports.useMemo(()=>{var s,c,h;return t!=null&&t.isLeaf?(c=(s=t.parent)==null?void 0:s.name)!=null?c:"":(h=t==null?void 0:t.name)!=null?h:""},[t]),v=f.exports.useRef(!1);f.exports.useEffect(()=>{S(void 0),d(!1),v.current=!1,J(C,{forceRoot:!0,onError:()=>{e&&(sessionStorage.setItem("storageError",String(e)),r(`/workbench/storage/${e}`))}}).then(()=>{v.current=!0})},[e,C]),f.exports.useEffect(()=>{!v.current||P()},[w]),f.exports.useEffect(()=>{x(s=>{const c=[s];for(;c.length;){const h=c.pop();!h||(K(h),h.forEach(g=>{var V;(V=g==null?void 0:g.children)!=null&&V.length&&c.push(g.children)}))}})},[p,u]);const P=(s=!1)=>{var h;const c=s?t:t==null?void 0:t.parent;J((h=c==null?void 0:c.name)!=null?h:C)},k=()=>{l(!o)},D=s=>{s===u?_(!p):(m(s),_(!0))},Q=n(ua,{items:[{key:"0",label:q("div",{onClick:()=>D("name"),children:[n(re,{id:"E1Ds9+",defaultMessage:[{type:0,value:"\u6309\u540D\u79F0"}]}),u==="name"&&n("span",{className:"ml-2 text-red-500",children:p?n(Ke,{}):n(He,{})})]})},{key:"1",label:q("div",{onClick:()=>D("size"),children:[n(re,{id:"xaG7IX",defaultMessage:[{type:0,value:"\u6309\u6587\u4EF6\u5927\u5C0F"}]}),u==="size"&&n("span",{className:"ml-2 text-red-500",children:p?n(Ke,{}):n(He,{})})]})},{key:"2",label:q("div",{onClick:()=>D("createTime"),children:[n(re,{id:"SU89De",defaultMessage:[{type:0,value:"\u6309\u521B\u5EFA\u65F6\u95F4"}]}),u==="createTime"&&n("span",{className:"ml-2 text-red-500",children:p?n(Ke,{}):n(He,{})})]})},{key:"3",label:q("div",{onClick:()=>D("updateTime"),children:[n(re,{id:"QT75K3",defaultMessage:[{type:0,value:"\u6309\u4FEE\u6539\u65F6\u95F4"}]}),u==="updateTime"&&n("span",{className:"ml-2 text-red-500",children:p?n(Ke,{}):n(He,{})})]})}]}),T=(s,c)=>{Y(c.map(g=>{var V;return{value:g.isLeaf?g.value:((V=g.name)!=null?V:"").replace(/\/$/,""),isLeaf:!!g.isLeaf}}));const h=c[c.length-1];S({...h}),d(!0)},K=s=>{s.sort((c,h)=>{var V,oe;let g;return u==="name"?g=c.value.localeCompare(h.value):u==="size"?g=((V=c==null?void 0:c.size)!=null?V:0)-((oe=h==null?void 0:h.size)!=null?oe:0):u==="createTime"?g=ze(c.createTime).valueOf()-ze(h.createTime).valueOf():g=ze(c.updateTime).valueOf()-ze(h.updateTime).valueOf(),p?g:-g})},J=async(s,{forceRoot:c=!1,onError:h=null}={})=>{var V,oe,ge;if(console.log("loadMenu",s),!e)return;const g=ye.loading(a.formatMessage({id:"xVTk70",defaultMessage:[{type:0,value:"\u52A0\u8F7D\u4E2D"}]}),0);try{const L=N=>{if(!N.children)return;const Z=N.children.find(se=>se.name&&s.startsWith(se.name));if(Z){if(s===Z.name)return Z;if(Z.children)return L(Z)}},b={label:"",name:C,value:"",children:M};let O=!c&&L(b);O||(O=b);const E=(V=O==null?void 0:O.name)!=null?V:"";let j=await Ee.get("/s3Upload/list",{timeout:15e3,params:{bucketID:e,filePrefix:E?`${E}`:void 0},resolveErrorMsg:N=>a.formatMessage({id:"jxZEU/",defaultMessage:[{type:0,value:"\u6587\u4EF6\u5217\u8868\u52A0\u8F7D\u5931\u8D25"}]})});j||(h&&!E?h():j=[]);const ce=new Map((ge=(oe=O.children)==null?void 0:oe.map(N=>[N.name,N]))!=null?ge:[]),ue=E.replace(/[^/]*$/,""),fe=j.sort(Qt).filter(N=>N.name!==E).map(N=>{var Z;return{children:(Z=ce.get(N.name))==null?void 0:Z.children,parent:O,label:n(ca,{trigger:["contextMenu"],overlay:n(ua,{items:[{key:"rename",label:a.formatMessage({id:"JeJAmT",defaultMessage:[{type:0,value:"\u91CD\u547D\u540D"}]}),onClick:se=>{se.domEvent.stopPropagation(),ee(N.name).then(Ce=>{Ce&&(N.name=Ce)})}},{key:"delete",label:n(fa,{title:a.formatMessage({id:"9Fxs0Y",defaultMessage:[{type:0,value:"\u786E\u5B9A\u5220\u9664\u5417?"}]}),onConfirm:()=>G(N),okText:a.formatMessage({id:"XeiAal",defaultMessage:[{type:0,value:"\u5220\u9664"}]}),cancelText:a.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"\u53D6\u6D88"}]}),children:n("div",{children:n(re,{id:"XeiAal",defaultMessage:[{type:0,value:"\u5220\u9664"}]})})})}]}),children:q("div",{className:"flex",children:[n("span",{children:N.isDir?n("img",{src:Ze,alt:"\u6587\u4EF6\u5939",className:"h-3.5 w-3.5"}):n("img",{src:Qe[We(N.name)],alt:"\u56FE\u7247",className:"h-3.5 w-3.5"})}),n(rt,{content:n("div",{className:"max-w-[50vw] overflow-clip break-all",children:N.name.replace(ue,"")}),placement:"topLeft",children:n("span",{className:`ml-2.5 ${pe.ellipsis} ${N.isDir?"isDir":"isLeaf"}`,children:N.name.replace(ue,"")})})]})}),value:N.name.replace(ue,""),isLeaf:!N.isDir,...N}});K(fe),O.children=fe,x([...b.children])}catch(L){console.error(L)}finally{g()}},W=async s=>{var h;const c=(h=s[s.length-1].name)!=null?h:"";await J(c)},ee=async s=>{H.current="";const c=s.replace(/\/&/,"").split("/").pop();return new Promise(h=>{da.info({title:a.formatMessage({id:"7nyFdZ",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165\u540D\u79F0"}]}),content:n(qe,{autoFocus:!0,defaultValue:c,placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165"}]}),onChange:g=>{H.current=g.target.value}}),okText:"\u786E\u5B9A",onOk:()=>{var oe;const g=(oe=H.current)==null?void 0:oe.replace(/ /g,"");if(!g){h("");return}const V=ye.loading(a.formatMessage({id:"IyVzrX",defaultMessage:[{type:0,value:"\u4FDD\u5B58\u4E2D"}]}));Ee.post("/s3Upload/rename",{bucketID:e,oldName:s,newName:s.replace(/[^/]*(?=$|\/$)/,g)}).then(()=>{V(),d(!1),ye.success(a.formatMessage({id:"jhfb/7",defaultMessage:[{type:0,value:"\u4FDD\u5B58\u6210\u529F"}]})),B(!w),h(s.replace(new RegExp(`${c}&`),g))})}})})},G=(s=t)=>{const c=ye.loading(a.formatMessage({id:"fblGdv",defaultMessage:[{type:0,value:"\u5220\u9664\u4E2D"}]}));Ee.post("/s3Upload/remove",{bucketID:e,fileName:s==null?void 0:s.name}).then(()=>{c(),d(!1),ye.success(a.formatMessage({id:"aiBGBs",defaultMessage:[{type:0,value:"\u5220\u9664\u6210\u529F"}]})),B(!w)})},H=f.exports.useRef(),z=()=>{let s=A;H.current="",da.info({title:a.formatMessage({id:"fRk+GN",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0"}]}),content:n(qe,{autoFocus:!0,placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165"}]}),onChange:c=>{H.current=c.target.value}}),okText:a.formatMessage({id:"BtZh7z",defaultMessage:[{type:0,value:"\u521B\u5EFA"}]}),onOk:()=>{if(!H.current)return;const c=ye.loading(a.formatMessage({id:"n1GZIK",defaultMessage:[{type:0,value:"\u521B\u5EFA\u4E2D"}]}));Ee.post("/s3Upload/createDir",{bucketID:e,path:`${s}${H.current}/`}).then(()=>{c(),d(!1),ye.success(a.formatMessage({id:"EBMdAL",defaultMessage:[{type:0,value:"\u521B\u5EFA\u6210\u529F"}]})),J(A)})}})},me=s=>{var h,g,V;if(!s)return null;const c=We((h=s==null?void 0:s.name)!=null?h:"");return s.isDir?n("img",{width:100,height:100,src:Ze,alt:"\u6587\u4EF6\u5939"}):c==="pic"?n(nt,{width:100,height:100,src:(g=t==null?void 0:t.url)!=null?g:"",alt:t==null?void 0:t.value}):c==="video"?n("video",{controls:!0,width:100,height:100,src:(V=t==null?void 0:t.url)!=null?V:""}):n("img",{src:Qe[We(t==null?void 0:t.value)],width:100,height:100,alt:t==null?void 0:t.value})};return q("div",{className:"flex flex-col h-full",children:[q("div",{className:"bg-white flex flex-0 h-13 pr-4  pl-9 items-center justify-between",style:{borderBottom:"1px solid rgba(95,98,105,0.1)"},children:[n("div",{className:"flex flex-1 min-w-0",children:I.map((s,c)=>n("div",{className:s.isLeaf?pe.leafBread:pe.bread,children:s.value},s.value))}),q("div",{className:"flex flex-0 justify-center items-center",children:[o?n(Xa,{title:"serach",children:n("div",{className:"cursor-pointer mr-4",onClick:k,children:n("img",{alt:"",src:"/assets/search.svg"})})}):n(qe,{onPressEnter:s=>F(s.currentTarget.value),autoFocus:!0,status:"error",prefix:n("div",{className:"cursor-pointer",onClick:k,children:n("img",{alt:"",src:"/assets/search.svg"})}),className:"mr-4"}),n(ia,{type:"vertical",className:"!h-3 !mr-5"}),n(_e,{onClick:()=>B(!w),icon:n(mt,{}),className:"mr-2 !border-0 !p-1",children:n(re,{id:"66awCH",defaultMessage:[{type:0,value:"\u5237\u65B0"}]})}),n(ca,{overlay:Q,placement:"bottom",children:n(_e,{icon:n(tt,{}),className:"mr-2 !border-0 !p-1",children:n(re,{id:"GuD3c8",defaultMessage:[{type:0,value:"\u6392\u5E8F"}]})})}),n(ia,{type:"vertical",className:"!h-3 !mr-5"}),n(ot,{action:"/api/v1/s3Upload/upload",data:{bucketID:e,path:A},showUploadList:!1,onChange:s=>{var c;s.file.status==="success"||s.file.status==="done"?((c=y.current)==null||c.call(y),y.current=void 0,J(A)):y.current||(y.current=ye.loading(a.formatMessage({id:"Oww89Y",defaultMessage:[{type:0,value:"\u4E0A\u4F20\u4E2D"}]})))},children:n(_e,{size:"small",className:"mr-4 !rounded-2px !h-7",children:n(re,{id:"yy7EDI",defaultMessage:[{type:0,value:"\u4E0A\u4F20"}]})})}),n(_e,{size:"small",className:"!rounded-2px !h-7",onClick:z,children:n(re,{id:"oyyjIg",defaultMessage:[{type:0,value:"\u6587\u4EF6\u5939"}]})})]})]}),$.current?n(Rt,{getPopupContainer:()=>$.current,open:!0,options:M,loadData:s=>void W(s),onChange:T,changeOnSelect:!0,popupClassName:`${pe["casader-select"]} flex mb-8`,children:n("div",{})}):null,q("div",{className:pe.container,style:{border:"1px solid rgba(95,98,105,0.1)",borderBottom:"none",borderRadius:"4px 4px 0 0"},children:[n("div",{ref:$,className:pe.cascadeContainer}),i?n("div",{className:pe.fileDetail,children:q("div",{className:pe.fileDetailBody,children:[q("div",{className:pe.header,children:[t!=null&&t.isLeaf?n("img",{src:Qe[We((X=t==null?void 0:t.name)!=null?X:"")],alt:"\u56FE\u7247",className:"h-3.5 mr-2 w-3.5"}):n("img",{src:Ze,alt:"\u6587\u4EF6\u5939",className:"h-3.5 mr-2 w-3.5"}),t==null?void 0:t.name]}),q(Ca,{defaultActiveKey:["1","2"],bordered:!1,expandIconPosition:"end",ghost:!0,className:pe.collapse,children:[!(t!=null&&t.isDir)&&q(ga,{header:a.formatMessage({id:"pV2t/S",defaultMessage:[{type:0,value:"\u57FA\u672C\u4FE1\u606F"}]}),children:[q("p",{children:[n(re,{id:"5FboZ/",defaultMessage:[{type:0,value:"\u7C7B\u578B"}]}),":"," ",(ae=t==null?void 0:t.mime)!=null?ae:a.formatMessage({id:"qRSHCi",defaultMessage:[{type:0,value:"\u672A\u77E5"}]})]}),q("p",{children:[n(re,{id:"o9bMHL",defaultMessage:[{type:0,value:"\u5927\u5C0F"}]}),": ",it(t==null?void 0:t.size)]}),q("p",{children:[n(re,{id:"/NfUUH",defaultMessage:[{type:0,value:"\u521B\u5EFA\u4E8E"}]}),": ",(le=t==null?void 0:t.createTime)!=null?le:""]}),q("p",{children:[n(re,{id:"8y5Ykn",defaultMessage:[{type:0,value:"\u4FEE\u6539\u4E8E"}]}),": ",(ie=t==null?void 0:t.updateTime)!=null?ie:""]})]},"1"),n(ga,{header:a.formatMessage({id:"uhTa0i",defaultMessage:[{type:0,value:"\u9884\u89C8"}]}),children:n("div",{className:`${pe["panel-style"]} flex-col justify-center items-center flex`,children:me(t)})},"2"),q("div",{className:"flex flex-col",children:[!(t!=null&&t.isDir)&&n("a",{className:"flex",href:t==null?void 0:t.url,download:t==null?void 0:t.value,children:n(_e,{className:"rounded-4px flex-1 m-1.5 !border-[#efeff0]",children:n(re,{id:"/cqdKk",defaultMessage:[{type:0,value:"\u4E0B\u8F7D"}]})})}),n(_e,{onClick:()=>{var s;navigator.clipboard.writeText(`${(s=t==null?void 0:t.url)!=null?s:""}`),ye.success(a.formatMessage({id:"J9jPRL",defaultMessage:[{type:0,value:"\u590D\u5236\u6210\u529F"}]}))},className:"rounded-4px m-1.5 !border-[#efeff0]",children:n(re,{id:"Ms9pdw",defaultMessage:[{type:0,value:"\u590D\u5236URL"}]})}),n(fa,{title:a.formatMessage({id:"9Fxs0Y",defaultMessage:[{type:0,value:"\u786E\u5B9A\u5220\u9664\u5417?"}]}),onConfirm:()=>G(t),okText:a.formatMessage({id:"XeiAal",defaultMessage:[{type:0,value:"\u5220\u9664"}]}),cancelText:a.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"\u53D6\u6D88"}]}),children:n(_e,{className:"rounded-4px m-1.5 !border-[#efeff0]",children:n("span",{className:"text-[#F21212]",children:n(re,{id:"XeiAal",defaultMessage:[{type:0,value:"\u5220\u9664"}]})})})})]})]})]})}):null]})]})}function _n(){const{id:e}=qa(),[a,r]=f.exports.useState();return f.exports.useEffect(()=>{Ee.get("/storageBucket").then(o=>{var l;r((l=o==null?void 0:o.filter(i=>i.id===Number(e)))==null?void 0:l[0])})},[e]),n("div",{className:"h-full",children:n(en,{bucketId:a==null?void 0:a.id},a==null?void 0:a.id)})}export{_n as default};
