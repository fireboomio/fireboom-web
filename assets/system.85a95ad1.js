import{d as P,r as v,c as u,j as t,F as S,f as r,I as F}from"./index.e5e6c754.js";import{A as j}from"./index.9bef8de7.js";import{D as l}from"./index.a76d6f2a.js";import{R as m}from"./index.8958a719.js";import{S as M}from"./index.6926b693.js";import{d as p}from"./dayjs.min.fccffbb3.js";import{d as N}from"./duration.1c0302a6.js";import{i as d}from"./use-immer.module.1d9a0526.js";import{s as b}from"./subs.module.a70cc990.js";import"./getDataOrAriaProps.e48b8c96.js";import"./KeyCode.9c493596.js";p.extend(N);function q(){const i=P(),[g,y]=d(!1);d(!1);const[h,x]=d(!1),[f,E]=d(!1),[a,C]=d({}),[D,w]=d(0),[n,c]=v.exports.useState();v.exports.useEffect(()=>{u.get("/setting/systemConfig").then(e=>{C(e)})},[n]),v.exports.useEffect(()=>{u.get("/setting/getTime").then(e=>{const s=Date.parse(e);w(s)}).then(()=>{c(!n)})},[]),v.exports.useEffect(()=>{const e=setInterval(()=>w(s=>s+1),1e3);return()=>{clearInterval(e)}},[]);const H=(e,s)=>{u.post("/setting",{key:s,val:e.target.value}).then(()=>{c(!n)})},I=e=>{const s=p.duration(p().diff(p(e),"seconds"),"seconds");return i.formatMessage({id:"+zhQOH",defaultMessage:[{type:1,value:"days"},{type:0,value:"\u5929 "},{type:1,value:"hours"},{type:0,value:"\u65F6 "},{type:1,value:"minutes"},{type:0,value:"\u5206 "},{type:1,value:"seconds"},{type:0,value:"\u79D2"}]},{days:s.$d.days,hours:s.$d.hours,minutes:s.$d.minutes,seconds:s.$d.seconds})},o=(e,s)=>{s==""&&!["apiHost"].includes(e)||u.post("/setting",{key:e,val:s}).then(()=>{c(!n)})};return t(S,{children:a.apiPort?r("div",{className:"pt-8 pl-8",children:[r(l,{colon:!0,column:1,className:b["descriptions-box"],labelStyle:{width:"15%"},children:[t(l.Item,{label:i.formatMessage({id:"A5xsdI",defaultMessage:[{type:0,value:"\u8FD0\u884C\u65F6\u957F"}]}),children:I(p(D).format("YYYY-MM-DD HH:mm:ss"))}),r(l.Item,{label:i.formatMessage({id:"Ipx/DS",defaultMessage:[{type:0,value:"API\u57DF\u540D"}]}),className:"w-20",children:[g?t(F,{defaultValue:a.apiHost,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:e=>{y(!g),o("apiHost",e.target.value)},onPressEnter:e=>{y(!g),o("apiHost",e.currentTarget.value)}}):t("span",{children:a.apiHost}),t("img",{alt:"bianji",src:"assets/iconfont/bianji.svg",style:{height:"1em",width:"1em"},className:"ml-2",onClick:()=>{y(!g)}})]}),r(l.Item,{label:i.formatMessage({id:"gehpuG",defaultMessage:[{type:0,value:"\u670D\u52A1\u5668\u76D1\u542CHost"}]}),className:"w-20",children:[h?t(F,{defaultValue:a.listenHost,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:e=>{x(!h),o("listenHost",e.target.value)},onPressEnter:e=>{x(!h),o("listenHost",e.currentTarget.value)}}):t("span",{children:a.listenHost}),t("img",{alt:"bianji",src:"assets/iconfont/bianji.svg",style:{height:"1em",width:"1em"},className:"ml-2",onClick:()=>{x(!h)}})]}),r(l.Item,{label:i.formatMessage({id:"q9QWoH",defaultMessage:[{type:0,value:"\u670D\u52A1\u5668\u76D1\u542C\u7AEF\u53E3"}]}),className:"w-20",children:[f?t(F,{defaultValue:a.listenPort,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:e=>{E(!f),o("listenPort",e.target.value)},onPressEnter:e=>{E(!f),o("listenPort",e.currentTarget.value)}}):t("span",{children:a.listenPort}),t("img",{alt:"bianji",src:"assets/iconfont/bianji.svg",style:{height:"1em",width:"1em"},className:"ml-2",onClick:()=>{E(!f)}})]}),t(l.Item,{label:i.formatMessage({id:"UifjEZ",defaultMessage:[{type:0,value:"\u65E5\u5FD7\u6C34\u5E73"}]}),children:r(m.Group,{value:a.logLevel,onChange:e=>{H(e,"logLevel")},children:[t(m,{value:-1,children:"Debug"}),t(m,{value:0,children:"Info"}),t(m,{value:1,children:"Warn"}),t(m,{value:2,children:"Error"})]})}),t(l.Item,{label:i.formatMessage({id:"SyLGX/",defaultMessage:[{type:0,value:"\u8C03\u8BD5"}]}),children:t(M,{onChange:e=>{u.post("/setting",{key:"debugSwitch",val:e}).then(()=>{c(!n)})},defaultChecked:a.debugSwitch,className:b["switch-edit-btn"],size:"small"})}),a.devSwitch?null:t(l.Item,{label:i.formatMessage({id:"zZ6RPo",defaultMessage:[{type:0,value:"\u5F3A\u5236\u8DF3\u8F6C"}]}),children:t(M,{checked:a.forcedJumpSwitch,className:b["switch-edit-btn"],size:"small",onChange:e=>{u.post("/setting",{key:"forcedJumpSwitch",val:e}).then(()=>{c(!n)})}})})]}),t("div",{className:"w-2/3",children:t(j,{message:i.formatMessage({id:"bpeH07",defaultMessage:[{type:0,value:"\u4FEE\u6539\u8BBE\u7F6E\u540E\uFF0C\u8BF7\u91CD\u65B0\u7F16\u8BD1"}]}),type:"warning",showIcon:!0})})]}):null})}export{q as default};
