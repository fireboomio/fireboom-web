import{d as S,r as i,j as n,F as M,f as m,I as D,m as L,c as k}from"./index.e5e6c754.js";import{M as F}from"./index.6f73eb32.js";import{o as Q}from"./omit.afdf8a34.js";import{D as E,a as N}from"./datasource-context.3a818b3a.js";import{u as q}from"./uploadLocal.f4ca9d85.js";import"./DialogWrap.947e0e2f.js";import"./KeyCode.9c493596.js";import"./pickAttrs.c5bbb5fc.js";import"./_baseClone.e2094da0.js";import"./_baseGet.6a7418c9.js";import"./flatten.8e198855.js";const C={openapi:"3.0.1",info:{title:"test",description:"",version:"1.0.0"},tags:[],paths:{"/v7/weather/now":{get:{summary:"now","x-apifox-folder":"","x-apifox-status":"developing",deprecated:!1,description:"",tags:[],parameters:[{name:"location",in:"query",description:"",required:!1,example:"101010100",schema:{type:"string"}},{name:"key",in:"query",description:"",required:!1,example:"8f0808a9e5d447af9c8792070e5087b5",schema:{type:"string"}}],responses:{200:{description:"\u6210\u529F",content:{"application/json":{schema:{type:"object",properties:{code:{type:"string"},updateTime:{type:"string"},fxLink:{type:"string"},now:{type:"object",properties:{obsTime:{type:"string"},temp:{type:"string"},feelsLike:{type:"string"},icon:{type:"string"},text:{type:"string"},wind360:{type:"string"},windDir:{type:"string"},windScale:{type:"string"},windSpeed:{type:"string"},humidity:{type:"string"},precip:{type:"string"},pressure:{type:"string"},vis:{type:"string"},cloud:{type:"string"},dew:{type:"string"}},required:["obsTime","temp","feelsLike","icon","text","wind360","windDir","windScale","windSpeed","humidity","precip","pressure","vis","cloud","dew"],"x-apifox-ignore-properties":[],"x-apifox-orders":["obsTime","temp","feelsLike","icon","text","wind360","windDir","windScale","windSpeed","humidity","precip","pressure","vis","cloud","dew"]},refer:{type:"object",properties:{sources:{type:"array",items:{type:"string"}},license:{type:"array",items:{type:"string"}}},required:["sources","license"],"x-apifox-ignore-properties":[],"x-apifox-orders":["sources","license"]}},required:["code","updateTime","fxLink","now","refer"],"x-apifox-ignore-properties":[],"x-apifox-orders":["code","updateTime","fxLink","now","refer"]}}}}},"x-run-in-apifox'":"https://www.apifox.cn/web/project/1824126/apis/api-49089650-run"}}},components:{schemas:{}},servers:[{url:"https://devapi.qweather.com",description:"weather"},{url:"https://devapi.qweather.com1122222",description:"weather"}]},_="/assets/ali.c0340600.svg",P="/assets/CockroachDB.2c178614.svg",j="/assets/Faas.ad3d2bf0.svg",A="/assets/GraphalAPI.7740e296.svg",B="/assets/MongoDB.491466e8.svg",R="/assets/MySQL.1461110d.svg",I="/assets/node.js.9103b122.svg",G="/assets/Planetscale.7a27b09b.svg",z="/assets/PostgreSQL.2a7e38b3.svg",U="/assets/RabbitMQ.2a742049.svg",$="/assets/RESTAPI.7b64fc68.svg",V="/assets/RocketMQ.58d7dabc.svg",J="/assets/SQLite.48a4dbe0.svg",O="/assets/SQLServer.bda97784.svg",X="_title_85zzx_1",Y="_coming_85zzx_9",l={title:X,coming:Y};function H(){const t=S(),p=i.exports.useMemo(()=>[{name:"API",items:[{name:"REST API",icon:$,sourceType:2},{name:"GraphQL API",icon:A,sourceType:3}]},{name:t.formatMessage({id:"p6z/hH",defaultMessage:[{type:0,value:"\u6570\u636E\u5E93"}]}),items:[{name:"MySQL",icon:R,sourceType:1,dbType:"MySQL",dbSchema:"mysql"},{name:"Sqlite",icon:J,sourceType:1,dbType:"SQLite",dbSchema:"sqlite"},{name:"PostgreSQL",icon:z,sourceType:1,dbType:"PostgreSQL",dbSchema:"postgresql"},{name:"MongoDB",icon:B,sourceType:1,dbType:"MongoDB",dbSchema:"mongodb",coming:!0},{name:"CockroachDB",icon:P,sourceType:1,dbType:"CockroachDB",dbSchema:"cockroachdb",coming:!0},{name:"SQL Server",icon:O,sourceType:1,dbType:"SQL Server",coming:!0},{name:"Plantscale",icon:G,sourceType:1,dbType:"Plantscale",coming:!0}]},{name:t.formatMessage({id:"tFmMiG",defaultMessage:[{type:0,value:"\u6D88\u606F\u961F\u5217"}]}),items:[{name:"RabbitMQ",icon:U,coming:!0},{name:"RocketMQ",icon:V,coming:!0},{name:t.formatMessage({id:"tXvcEA",defaultMessage:[{type:0,value:"\u963F\u91CC\u4E91\u7269\u8054\u7F51\u5E73\u53F0"}]}),icon:_,coming:!0}]},{name:t.formatMessage({id:"/mrUV7",defaultMessage:[{type:0,value:"\u81EA\u5B9A\u4E49"}]}),items:[{name:"node.js",icon:I,sourceType:4},{name:"Faas",icon:j,sourceType:4,coming:!0}]}],[t]),d=i.exports.useMemo(()=>{const s={};return p.forEach(({items:e})=>{e.forEach(({sourceType:a,dbType:o,icon:r})=>{s[`${a}_${o!=null?o:""}`.toLowerCase()]=r})}),s},[p]);i.exports.useContext(E);const{handleToggleDesigner:W,handleCreate:g,handleSave:y}=i.exports.useContext(N),[f,h]=i.exports.useState(p),[v,x]=i.exports.useState([]),c=i.exports.useRef("");i.exports.useEffect(()=>{const s=[{coming:!0,name:"example_pgsql",sourceType:1,config:{apiNamespace:"example_pgsql",dbType:"postgresql",appendType:"0",databaseUrl:{key:"",kind:"0",val:"anson:1234qwer!@139.196.89.94:5433/dbc32d0e6ba2c141c196fe42bb389034b8anson"},schemaExtension:"",replaceJSONTypeFieldConfiguration:null,host:"",dbName:"",port:"",userName:{key:"",kind:"",val:""},password:{key:"",kind:"",val:""}},switch:0,createTime:"",updateTime:"",isDel:0},{name:"example_restApi",sourceType:2,config:{apiNameSpace:"example_restApi",filePath:"example_rest.json",baseURL:"",jwtType:"",secret:{key:"",kind:"",val:""},signingMethod:"",tokenPoint:"",statusCodeUnions:!1,headers:[]},switch:0,createTime:"",updateTime:"",isDel:0,onSelect:()=>{q("1",JSON.stringify(C),"example_rest.json")}},{name:"example_graphqlApi",sourceType:3,config:{apiNameSpace:"example_graphqlApi",url:"https://countries.trevorblades.com/",loadSchemaFromString:"",internal:!1,customFloatScalars:null,customIntScalars:null,skipRenameRootFields:null,headers:[]},switch:0,createTime:"",updateTime:"",isDel:0},{name:"example_customer",sourceType:4,config:{apiNamespace:"example_customer",serverName:"example_customer",enableGraphQLEndpoint:!1,schema:`new GraphQLSchema({
				query: new GraphQLObjectType({
					name: 'RootQueryType',
					fields: {
						hello: {
							type: GraphQLString,
							resolve() {
								return 'world';
							},
						},
					},
				}),
			}`},switch:0,createTime:"",updateTime:"",isDel:0}];x(s),h(e=>e.concat({name:t.formatMessage({id:"VlUpDD",defaultMessage:[{type:0,value:"\u793A\u4F8B\u6570\u636E\u6E90"}]}),items:s.map(a=>{var o;return{coming:a.coming,name:a.name,icon:d[`${a.sourceType}_${(o=a.config.dbType)!=null?o:""}`.toLowerCase()],sourceType:a.sourceType,dbType:a.config.dbType}})}))},[]);function b(){const{destroy:s}=F.confirm({title:t.formatMessage({id:"S8cTgj",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0"}]}),content:n(D,{autoFocus:!0,required:!0,placeholder:t.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165"}]}),onChange:e=>{c.current=e.target.value.replace(/ /g,"")}}),okText:t.formatMessage({id:"BtZh7z",defaultMessage:[{type:0,value:"\u521B\u5EFA"}]}),cancelText:t.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"\u53D6\u6D88"}]}),okButtonProps:{async onClick(){if(!c.current){L.error(t.formatMessage({id:"S8cTgj",defaultMessage:[{type:0,value:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0"}]}));return}let e={name:c.current,config:{apiNamespace:c.current,serverName:c.current},sourceType:4,switch:0};const a=await k.post("/dataSource",e);e.id=a,y(e),s()}}})}async function T(s,e,a,o){var u;if(s===4)return b();let r={id:0,name:"",config:{dbType:e,dbSchema:a},sourceType:s,switch:0};o.startsWith("example_")&&(r=v.find(w=>w.name===o)),await((u=r.onSelect)==null?void 0:u.call(r)),g(Q(r,["onSelect"]))}return n(M,{children:f.map(s=>m("div",{className:"mb-12",children:[n("div",{className:`text-lg ${l.title}`,children:n("span",{className:"pl-2.5",children:s.name})}),n("div",{className:"flex flex-wrap my-4 gap-x-9.5 gap-y-5 items-center",children:s.items.map(e=>m("div",{className:"border rounded cursor-pointer flex bg-[#F8F9FD] border-gray-300/20 min-w-53 py-9px pl-4 transition-shadow text-[#333333] w-53 items-center relative hover:shadow-lg",onClick:()=>!e.coming&&T(e.sourceType,e.dbType,e.dbSchema,e.name),children:[n("div",{className:"bg-white rounded-3xl h-7 shadow w-7 inline-flex items-center justify-center",children:n("img",{alt:"",src:e.icon})}),n("span",{className:"ml-3"+(e.coming?" text-[#787D8B]":""),children:e.name}),e.coming&&n("div",{className:l.coming,children:t.formatMessage({id:"Xx+23S",defaultMessage:[{type:0,value:"\u5373\u5C06"}]})})]},e.name))})]},s.name))})}function pe(){return n("div",{className:"h-full p-3 pb-0",children:n("div",{className:"bg-white h-full pt-5.5 pl-5.5 overflow-auto",children:n(H,{})})})}export{pe as default};
