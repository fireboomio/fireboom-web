import{u as g,r as m,k as u,j as e,Q as v}from"./index-79b4225c.js";import{i as f}from"./use-immer.module-06a0e7a3.js";import{s as t}from"./index-ed6c001f.js";import{I as D}from"./index-333cf5d2.js";import"./calcTime-b5e23720.js";import"./dayjs.min-8b6767f3.js";import"./ServiceDiscovery-a9a564a0.js";import"./addEventListener-fac803b6.js";import"./LeftOutlined-b0100268.js";function F({handleToggleDesigner:h}){const[l,k]=f(localStorage.getItem("GuideFinishMap")?JSON.parse(localStorage.getItem("GuideFinishMap")):{}),w=g(),[o,x]=m.useState();m.useEffect(()=>{u.get("/storage").then(a=>{x(a[0].name)})},[]);const N=()=>{h("notice")},c=[{blockName:"数据源",optional:!1,state:1,lineUp:"",lineDown:"",subTasks:[{key:"connectDB",title:"连接数据库",date:"08.12 14:00 完成",state:1,lineUp:"",lineDown:"",link:"/workbench/data-source/new"},{key:"connectREST",title:"连接REST API",date:"08.12 14:00 完成",state:1,lineUp:"",lineDown:"",link:"/workbench/data-source/new"},{key:"connectGraphQL",title:"连接GraphQL API",date:"08.12 14:00 完成",state:1,lineUp:"",lineDown:"",link:"/workbench/data-source/new"}]},{blockName:"OSS存储",optional:!0,state:2,lineUp:"",lineDown:"",subTasks:[{key:"addOSS",title:"设置存储提供商",date:"08.12 14:00 完成",state:1,lineUp:"",lineDown:"",link:"/workbench/storage/new"},{key:"uploadFile",title:"上传一个文件",date:"快去完成吧",state:0,lineUp:"",lineDown:"",link:o?`/workbench/storage/${o}/manage`:"/workbench/storage/new"}]},{blockName:"身份验证",optional:!0,state:0,lineUp:"",lineDown:"",subTasks:[{key:"addAuth",title:"设置身份提供商",date:"快去完成吧",state:0,lineUp:"",lineDown:"",link:"/workbench/auth/new"},{key:"authRegister",title:"注册账户并登录",date:"快去完成吧",state:0,lineUp:"",lineDown:"",link:"/workbench/auth/new"}]},{blockName:"对外API",optional:!1,state:0,lineUp:"",lineDown:"",subTasks:[{key:"addAPI",title:"可视化编写接口",date:"快去完成吧",state:0,lineUp:"",lineDown:"",link:"/workbench/apimanage/crud"},{key:"downloadSDK",title:"下载接口SDK",date:"快去完成吧",state:0,lineUp:"",lineDown:"",link:"/workbench/rapi"}]}];let i="transparent";const r="#3ED98F",d="#EBEBEB";return c.forEach(a=>{a.lineUp=i,a.state=a.subTasks.find(n=>!l[n.key])?0:1,a.lineDown=i=a.state?r:d,a.subTasks.forEach(n=>{const s=l[n.key];n.state=s?1:0,n.date=s?`${s}完成`:"快去完成吧",n.lineUp=i,n.lineDown=i=n.state===1?r:d})}),e.jsxs("div",{className:t.guideContainer,children:[e.jsxs("div",{className:"flex flex-0 h-62px pr-8px pl-23px justify-between items-center",children:[e.jsx("span",{className:"font-bold text-17px text-[#222]",children:e.jsx(v,{id:"9nhj16",defaultMessage:[{type:0,value:"新手指引"}]})}),e.jsx("div",{className:"cursor-pointer p-3 text-0px",children:e.jsx(D,{width:15,height:15,preview:!1,alt:"close",src:"./assets/guide/icon-close.png",onClick:N})})]}),e.jsx("div",{className:t.guideList,children:c.map((a,n)=>e.jsxs("div",{className:t.block,children:[e.jsxs("div",{className:t.head,children:[e.jsxs("div",{className:[t.icon,t[`icon${a.state||0}`]].join(" "),children:[e.jsx("div",{className:t.lineUp,style:{background:a.lineUp}}),e.jsx("div",{className:t.lineDown,style:{background:a.lineDown}})]}),e.jsx("div",{className:t.title,children:a.blockName}),a.optional?e.jsx("div",{className:t.tip,children:"(可选)"}):null,e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:t.docIcon}),e.jsx("div",{className:t.doc,children:"文档"})]}),a.subTasks.map((s,j)=>e.jsxs("div",{className:t.item,children:[e.jsxs("div",{className:[t.icon,t[`icon${s.state||0}`]].join(" "),children:[e.jsx("div",{className:t.lineUp,style:{background:s.lineUp}}),e.jsx("div",{className:t.lineDown,style:{background:s.lineDown}})]}),e.jsxs("div",{className:t.info,children:[e.jsx("div",{className:t.title,children:`${n+1}.${j+1} ${s.title}`}),e.jsx("div",{className:t.status,children:s.state?s.date:"快去完成吧"})]}),e.jsxs("div",{className:t.btn,onClick:()=>{k(p=>{p[s.key]=new Date().toLocaleString(),localStorage.setItem("GuideFinishMap",JSON.stringify(p))}),s.link&&w(s.link)},children:[s.state?"修改":"前往",e.jsx("div",{className:t.arrow})]})]},s.title))]},a.blockName))})]})}export{F as default};
