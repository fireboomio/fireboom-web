import{a as q}from"./codemirror.es-e193deea.js";import"./index-0cf8dcc1.js";import"./index-2eb05974.js";import"./interface-41bd3122.js";import"./engine-50a4074b.js";import"./workbenchContext-2b7a0075.js";import"./index-a78d52d2.js";import"./lock-106bb4c4.js";import"./variable-b69d08ee.js";import"./common-7ac8785d.js";import"./hotkey-3a258436.js";import"./store-cf1adf45.js";import"./parser-0b83345b.js";import"./Breadcrumb-52a9b0cb.js";import"./DownOutlined-374f1d77.js";import"./index-06504f03.js";import"./LeftOutlined-91dc5901.js";import"./PurePanel-327833dd.js";import"./index-a5647e9f.js";import"./index-5b35cc76.js";import"./EditFilled-5715b2b4.js";import"./index-f6e114c7.js";import"./index-09c103b6.js";import"./index-bd62ba05.js";import"./useShowArrow-f9335512.js";import"./index-0484401a.js";import"./main-7459389b.js";import"./toNumber-e4714f89.js";import"./utils-9cc409ea.js";import"./dayjs.min-3019ccb5.js";import"./utils-9b986f1e.js";import"./DeleteOutlined-a02e45e1.js";import"./index-a38c0e65.js";import"./index-57c9a052.js";import"./index-3320778c.js";import"./index-b93aa7bc.js";import"./index-574a9cc5.js";import"./PlusOutlined-c5dd3421.js";import"./index-232ab716.js";import"./index-6b4188b6.js";import"./index-1e97c44b.js";import"./globalContext-d610aedc.js";var G=Object.defineProperty,f=(P,A)=>G(P,"name",{value:A,configurable:!0});function z(P,A){return A.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(d){if(d!=="default"&&!(d in P)){var l=Object.getOwnPropertyDescriptor(r,d);Object.defineProperty(P,d,l.get?l:{enumerable:!0,get:function(){return r[d]}})}})}),Object.freeze(Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}))}f(z,"_mergeNamespaces");var D={exports:{}};(function(P,A){(function(r){r(q.exports)})(function(r){var d={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},l=r.Pos;r.defineOption("autoCloseBrackets",!1,function(e,t,n){n&&n!=r.Init&&(e.removeKeyMap(y),e.state.closeBrackets=null),t&&(x(b(t,"pairs")),e.state.closeBrackets=t,e.addKeyMap(y))});function b(e,t){return t=="pairs"&&typeof e=="string"?e:typeof e=="object"&&e[t]!=null?e[t]:d[t]}f(b,"getOption");var y={Backspace:I,Enter:$};function x(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),i="'"+n+"'";y[i]||(y[i]=w(n))}}f(x,"ensureBound"),x(d.pairs+"`");function w(e){return function(t){return K(t,e)}}f(w,"handler");function B(e){var t=e.state.closeBrackets;if(!t||t.override)return t;var n=e.getModeAt(e.getCursor());return n.closeBrackets||t}f(B,"getConfig");function I(e){var t=B(e);if(!t||e.getOption("disableInput"))return r.Pass;for(var n=b(t,"pairs"),i=e.listSelections(),a=0;a<i.length;a++){if(!i[a].empty())return r.Pass;var p=_(e,i[a].head);if(!p||n.indexOf(p)%2!=0)return r.Pass}for(var a=i.length-1;a>=0;a--){var s=i[a].head;e.replaceRange("",l(s.line,s.ch-1),l(s.line,s.ch+1),"+delete")}}f(I,"handleBackspace");function $(e){var t=B(e),n=t&&b(t,"explode");if(!n||e.getOption("disableInput"))return r.Pass;for(var i=e.listSelections(),a=0;a<i.length;a++){if(!i[a].empty())return r.Pass;var p=_(e,i[a].head);if(!p||n.indexOf(p)%2!=0)return r.Pass}e.operation(function(){var s=e.lineSeparator()||`
`;e.replaceSelection(s+s,null),O(e,-1),i=e.listSelections();for(var h=0;h<i.length;h++){var m=i[h].head.line;e.indentLine(m,null,!0),e.indentLine(m+1,null,!0)}})}f($,"handleEnter");function O(e,t){for(var n=[],i=e.listSelections(),a=0,p=0;p<i.length;p++){var s=i[p];s.head==e.getCursor()&&(a=p);var h=s.head.ch||t>0?{line:s.head.line,ch:s.head.ch+t}:{line:s.head.line-1};n.push({anchor:h,head:h})}e.setSelections(n,a)}f(O,"moveSel");function F(e){var t=r.cmpPos(e.anchor,e.head)>0;return{anchor:new l(e.anchor.line,e.anchor.ch+(t?-1:1)),head:new l(e.head.line,e.head.ch+(t?1:-1))}}f(F,"contractSelection");function K(e,t){var n=B(e);if(!n||e.getOption("disableInput"))return r.Pass;var i=b(n,"pairs"),a=i.indexOf(t);if(a==-1)return r.Pass;for(var p=b(n,"closeBefore"),s=b(n,"triples"),h=i.charAt(a+1)==t,m=e.listSelections(),j=a%2==0,c,R=0;R<m.length;R++){var N=m[R],o=N.head,g,k=e.getRange(o,l(o.line,o.ch+1));if(j&&!N.empty())g="surround";else if((h||!j)&&k==t)h&&L(e,o)?g="both":s.indexOf(t)>=0&&e.getRange(o,l(o.line,o.ch+3))==t+t+t?g="skipThree":g="skip";else if(h&&o.ch>1&&s.indexOf(t)>=0&&e.getRange(l(o.line,o.ch-2),o)==t+t){if(o.ch>2&&/\bstring/.test(e.getTokenTypeAt(l(o.line,o.ch-2))))return r.Pass;g="addFour"}else if(h){var W=o.ch==0?" ":e.getRange(l(o.line,o.ch-1),o);if(!r.isWordChar(k)&&W!=t&&!r.isWordChar(W))g="both";else return r.Pass}else if(j&&(k.length===0||/\s/.test(k)||p.indexOf(k)>-1))g="both";else return r.Pass;if(!c)c=g;else if(c!=g)return r.Pass}var S=a%2?i.charAt(a-1):t,E=a%2?t:i.charAt(a+1);e.operation(function(){if(c=="skip")O(e,1);else if(c=="skipThree")O(e,3);else if(c=="surround"){for(var u=e.getSelections(),v=0;v<u.length;v++)u[v]=S+u[v]+E;e.replaceSelections(u,"around"),u=e.listSelections().slice();for(var v=0;v<u.length;v++)u[v]=F(u[v]);e.setSelections(u)}else c=="both"?(e.replaceSelection(S+E,null),e.triggerElectric(S+E),O(e,-1)):c=="addFour"&&(e.replaceSelection(S+S+S+S,"before"),O(e,1))})}f(K,"handleChar");function _(e,t){var n=e.getRange(l(t.line,t.ch-1),l(t.line,t.ch+1));return n.length==2?n:null}f(_,"charsAround");function L(e,t){var n=e.getTokenAt(l(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(t.ch==0||!/\bstring/.test(e.getTokenTypeAt(t)))}f(L,"stringStartsAfter")})})();var H=D.exports,Ie=z({__proto__:null,default:H},[D.exports]);export{Ie as c};
