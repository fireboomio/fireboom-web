import{K as p,r,C as f,V as m}from"./index-d217b560.js";import{W as C}from"./workbenchContext-bc727aa4.js";import{u as d}from"./variable-3a19c39e.js";function U(a,s){const i=p(),{globalSetting:c}=r.useContext(f),{logout:u}=r.useContext(C),{getConfigurationValue:l}=d(),t=l(c.nodeOptions.publicNodeUrl)??"";return{async doTest(g){try{await u(t,s)}catch{}const o=new URL(location.toString());o.hash=a;let e;try{e=new URL(`${t}/auth/cookie/authorize/${g}?redirect_uri=${encodeURIComponent(o.toString())}`)}catch(n){m.error(i.formatMessage({id:"iW9zfZ",defaultMessage:[{type:0,value:"地址异常，请检查系统设置中的API域名是否正确"}]})),console.error(n);return}window.open(e.toString())}}}export{U as u};
