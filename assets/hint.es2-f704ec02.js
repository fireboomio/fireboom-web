import{C as f}from"./codemirror.es-afd329d3.js";import{f as j}from"./forEachState.es-1e367fb2.js";import"./index-441aa3d0.js";import"./index-8780653b.js";import{t as g,R as b,M as N,N as y,v as O,r as D}from"./store-a2724dce.js";import"./interface-41bd3122.js";import"./engine-067aebcd.js";import"./workbenchContext-e7b3db2b.js";import"./index-08043634.js";import"./lock-66ce1b4b.js";import"./variable-c8e87b93.js";import"./common-7ac8785d.js";import"./hotkey-3a258436.js";import"./parser-0b83345b.js";import"./Breadcrumb-f797c5c1.js";import"./DownOutlined-e74f9fb1.js";import"./index-b7c1c80f.js";import"./LeftOutlined-c7d0e962.js";import"./PurePanel-bb693965.js";import"./index-1f0152ff.js";import"./index-ae7306ba.js";import"./EditFilled-dc7b2440.js";import"./index-5009d2f3.js";import"./index-9d8e2b74.js";import"./index-34f891b2.js";import"./useShowArrow-d3943229.js";import"./index-b7a6f56d.js";import"./main-7459389b.js";import"./toNumber-a9218388.js";import"./utils-9cc409ea.js";import"./dayjs.min-1e226091.js";import"./utils-9b986f1e.js";import"./DeleteOutlined-cf764846.js";import"./index-7313b410.js";import"./index-2cb9bdf4.js";import"./index-b187e49b.js";import"./index-abe13f22.js";import"./index-803510a7.js";import"./PlusOutlined-f97d46c9.js";import"./index-45293726.js";import"./index-ec2f231a.js";import"./index-b25c268d.js";import"./globalContext-587dec34.js";var M=Object.defineProperty,m=(n,i)=>M(n,"name",{value:i,configurable:!0});function c(n,i,e){const r=x(e,d(i.string));if(!r)return;const t=i.type!==null&&/"|\w/.test(i.string[0])?i.start:i.end;return{list:r,from:{line:n.line,ch:t},to:{line:n.line,ch:i.end}}}m(c,"hintList");function x(n,i){if(!i)return u(n,o=>!o.isDeprecated);const e=n.map(o=>({proximity:T(d(o.text),i),entry:o}));return u(u(e,o=>o.proximity<=2),o=>!o.entry.isDeprecated).sort((o,p)=>(o.entry.isDeprecated?1:0)-(p.entry.isDeprecated?1:0)||o.proximity-p.proximity||o.entry.text.length-p.entry.text.length).map(o=>o.entry)}m(x,"filterAndSortList");function u(n,i){const e=n.filter(i);return e.length===0?n:e}m(u,"filterNonEmpty");function d(n){return n.toLowerCase().replace(/\W/g,"")}m(d,"normalizeText");function T(n,i){let e=v(i,n);return n.length>i.length&&(e-=n.length-i.length-1,e+=n.indexOf(i)===0?0:.5),e}m(T,"getProximity");function v(n,i){let e,r;const t=[],o=n.length,p=i.length;for(e=0;e<=o;e++)t[e]=[e];for(r=1;r<=p;r++)t[0][r]=r;for(e=1;e<=o;e++)for(r=1;r<=p;r++){const a=n[e-1]===i[r-1]?0:1;t[e][r]=Math.min(t[e-1][r]+1,t[e][r-1]+1,t[e-1][r-1]+a),e>1&&r>1&&n[e-1]===i[r-2]&&n[e-2]===i[r-1]&&(t[e][r]=Math.min(t[e][r],t[e-2][r-2]+a))}return t[o][p]}m(v,"lexicalDistance");f.registerHelper("hint","graphql-variables",(n,i)=>{const e=n.getCursor(),r=n.getTokenAt(e),t=L(e,r,i);return t!=null&&t.list&&t.list.length>0&&(t.from=f.Pos(t.from.line,t.from.ch),t.to=f.Pos(t.to.line,t.to.ch),f.signal(n,"hasCompletion",n,t,r)),t});function L(n,i,e){const r=i.state.kind==="Invalid"?i.state.prevState:i.state,t=r.kind,o=r.step;if(t==="Document"&&o===0)return c(n,i,[{text:"{"}]);const p=e.variableToType;if(!p)return;const a=V(p,i.state);if(t==="Document"||t==="Variable"&&o===0){const s=Object.keys(p);return c(n,i,s.map(l=>({text:`"${l}": `,type:p[l]})))}if((t==="ObjectValue"||t==="ObjectField"&&o===0)&&a.fields){const s=Object.keys(a.fields).map(l=>a.fields[l]);return c(n,i,s.map(l=>({text:`"${l.name}": `,type:l.type,description:l.description})))}if(t==="StringValue"||t==="NumberValue"||t==="BooleanValue"||t==="NullValue"||t==="ListValue"&&o===1||t==="ObjectField"&&o===2||t==="Variable"&&o===2){const s=a.type?g(a.type):void 0;if(s instanceof b)return c(n,i,[{text:"{"}]);if(s instanceof N){const l=s.getValues();return c(n,i,l.map(h=>({text:`"${h.name}"`,type:s,description:h.description})))}else if(s===y)return c(n,i,[{text:"true",type:y,description:"Not false."},{text:"false",type:y,description:"Not true."}])}}m(L,"getVariablesHint");function V(n,i){const e={type:null,fields:null};return j(i,r=>{if(r.kind==="Variable")e.type=n[r.name];else if(r.kind==="ListValue"){const t=e.type?O(e.type):void 0;e.type=t instanceof D?t.ofType:null}else if(r.kind==="ObjectValue"){const t=e.type?g(e.type):void 0;e.fields=t instanceof b?t.getFields():null}else if(r.kind==="ObjectField"){const t=r.name&&e.fields?e.fields[r.name]:null;e.type=t==null?void 0:t.type}}),e}m(V,"getTypeInfo");
