import{K as M,ag as t,O as x,j as e,ad as n,Q as c,V as p}from"./index-c082ee01.js";import{I as y}from"./index-cb5bed34.js";import{M as C}from"./MinusCircleOutlined-aa373009.js";import{S as o}from"./index-65909486.js";import{I as j}from"./index-f949a94c.js";import{S as v}from"./index-0648a755.js";import"./common-7ac8785d.js";import"./index-ea751460.js";import"./index-995c779a.js";import"./PurePanel-92d18808.js";import"./useShowArrow-545d66c2.js";import"./index-3572d1d0.js";import"./DownOutlined-c4d26d52.js";const u=["Accept","Accept-Charset","Accept-Language","Access_-Control-Request-Headers","Access-Control-Request-Method","Authorization","Cache-Control","Content-MD5","Content-Length","Content-Transfer-Encoding","Content-Type","Cookie","Cookie 2","Date","Expect","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Trailer","Transfer-Encoding","Upgrade","User-Agent","Via","Warning","X-Requested-With","X-Do-Not-Track","DNT","x-api-key","Connection"];function V(){const a=M(),[l]=t.useForm(),{globalSetting:d,updateGlobalSetting:g}=x();if(!d)return;async function f(s){const i=p.loading(a.formatMessage({id:"IyVzrX",defaultMessage:[{type:0,value:"保存中"}]}),0);try{await g(s)&&p.success(a.formatMessage({id:"jhfb/7",defaultMessage:[{type:0,value:"保存成功"}]}))}catch{}i()}return e.jsx("div",{className:"pt-6",children:e.jsxs(t,{className:"common-form",form:l,labelCol:{span:5},wrapperCol:{span:12},onFinish:f,labelAlign:"right",initialValues:d,children:[e.jsx(t.Item,{label:a.formatMessage({id:"R5wYZd",defaultMessage:[{type:0,value:"允许源"}]}),tooltip:a.formatMessage({id:"Kc1PjJ",defaultMessage:[{type:0,value:"指定允许访问的源（域名、协议、端口），使用通配符 * 表示允许所有源进行访问，也可以指定具体的源"}]}),children:e.jsx(t.List,{name:["corsConfiguration","allowedOrigins"],children:(s,{add:i,remove:m},{errors:h})=>e.jsxs(e.Fragment,{children:[s.map((r,b)=>e.jsxs("div",{style:{width:"90%"},className:"flex items-center mb-4",children:[e.jsx(y,{className:"flex-1",formItemProps:{...r,noStyle:!0}}),e.jsx(C,{className:"ml-2",onClick:()=>m(r.name)})]},r.key)),e.jsxs(t.Item,{style:{marginTop:s.length?"16px":""},wrapperCol:{span:12},children:[e.jsx(n,{type:"dashed",onClick:()=>i(),style:{width:"60%"},children:a.formatMessage({id:"SVbC+g",defaultMessage:[{type:0,value:"增加允许源"}]})}),e.jsx(t.ErrorList,{errors:h})]})]})})}),e.jsx(t.Item,{label:a.formatMessage({id:"3SibWe",defaultMessage:[{type:0,value:"允许方法"}]}),name:["corsConfiguration","allowedMethods"],tooltip:a.formatMessage({id:"LF5hEb",defaultMessage:[{type:0,value:"指定允许的HTTP请求方法，多个方法使用逗号分隔。常见的方法包括GET、POST、PUT、DELETE等"}]}),children:e.jsx(o,{className:"disable-common-select",style:{width:"90%"},mode:"multiple",placeholder:a.formatMessage({id:"Xhn2gT",defaultMessage:[{type:0,value:"请选择"}]}),children:["GET","POST"].map(s=>e.jsx(o.Option,{value:s,children:s},s))})}),e.jsx(t.Item,{label:a.formatMessage({id:"mA7n5i",defaultMessage:[{type:0,value:"允许头"}]}),name:["corsConfiguration","allowedHeaders"],tooltip:a.formatMessage({id:"UiwlCI",defaultMessage:[{type:0,value:"指定允许的自定义请求头，多个头部字段使用逗号分隔。默认为 * ，表示不限制"}]}),children:e.jsx(o,{className:"disable-common-select",mode:"tags",style:{width:"90%"},placeholder:a.formatMessage({id:"Xhn2gT",defaultMessage:[{type:0,value:"请选择"}]}),options:u.map(s=>({label:s,value:s}))})}),e.jsx(t.Item,{label:a.formatMessage({id:"3J9k4c",defaultMessage:[{type:0,value:"暴露头"}]}),name:["corsConfiguration","exposedHeaders"],tooltip:a.formatMessage({id:"x7Gsiw",defaultMessage:[{type:0,value:"指定响应中允许客户端访问的响应头"}]}),children:e.jsx(o,{className:"disable-common-select",mode:"tags",style:{width:"90%"},placeholder:a.formatMessage({id:"Xhn2gT",defaultMessage:[{type:0,value:"请选择"}]}),options:u.map(s=>({label:s,value:s}))})}),e.jsx(t.Item,{label:a.formatMessage({id:"aE19iu",defaultMessage:[{type:0,value:"跨域时间"}]}),name:["corsConfiguration","maxAge"],tooltip:a.formatMessage({id:"93NHRk",defaultMessage:[{type:0,value:"指定预检请求（OPTIONS请求）的有效期，单位为秒，默认 120 秒 。在有效期内，浏览器无需再发送预检请求"}]}),children:e.jsx(j,{addonAfter:"秒"})}),e.jsx(t.Item,{label:a.formatMessage({id:"ZK6VCI",defaultMessage:[{type:0,value:"允许 Credentials"}]}),name:["corsConfiguration","allowCredentials"],valuePropName:"checked",tooltip:a.formatMessage({id:"IsobDW",defaultMessage:[{type:0,value:"指定是否允许发送Cookie等凭证信息。如果设置为true，则表示允许发送凭证信息；如果设置为false，则不允许发送凭证信息"}]}),children:e.jsx(v,{})}),e.jsxs(t.Item,{wrapperCol:{offset:5,span:12},children:[e.jsx(n,{className:"btn-cancel mr-4",onClick:()=>l.resetFields(),children:e.jsx(c,{id:"r2dEd/",defaultMessage:[{type:0,value:"重置"}]})}),e.jsx(n,{className:"btn-save",onClick:l.submit,children:e.jsx(c,{id:"b5l2vN",defaultMessage:[{type:0,value:"保存"}]})})]})]})})}export{V as default};
