import{g as N,h as F,A as d,S as n}from"./StatusDirective.81d3e195.js";import{x as t}from"./x6.fe77169b.js";import{f as M,j as a,d as v,r as u}from"./index.e5e6c754.js";import{g as D}from"./index.e309cc4c.js";import"./index.94b2fb2c.js";import"./index.e54b5c9c.js";import"./KeyCode.9c493596.js";import"./Overflow.321ca619.js";import"./PlusOutlined.5b3e3b8c.js";import"./index.07d786b1.js";import"./index.3e81d184.js";import"./index.8958a719.js";import"./getDataOrAriaProps.e48b8c96.js";import"./printer.b0e2956d.js";import"./DownOutlined.75881d1e.js";import"./index.b6cece06.js";import"./index.6926b693.js";import"./index.esm.0df65c6e.js";import"./index.esm.e5edd667.js";import"./workbenchContext.a6b76e3b.js";import"./keyBy.400ebaf7.js";import"./_baseGet.6a7418c9.js";import"./_createAggregator.87a98d7b.js";import"./get.131f9f4f.js";import"./utils.aecd68b7.js";import"./DialogWrap.947e0e2f.js";import"./pickAttrs.c5bbb5fc.js";import"./index.9c69eadb.js";import"./path.2dc76f8c.js";import"./Editor.c970b515.js";import"./use-immer.module.1d9a0526.js";import"./difference.6d57e3ed.js";import"./_baseUniq.d23dbdee.js";import"./flatten.8e198855.js";import"./omit.afdf8a34.js";import"./_baseClone.e2094da0.js";import"./iconUtil.31c13224.js";import"./index.5e1fa168.js";import"./index.0cfa4828.js";import"./Tree.4b4dd3c6.js";import"./conductUtil.03f406cc.js";import"./RightOutlined.73e4cc97.js";import"./index.daad23d2.js";import"./index.6f73eb32.js";import"./dayjs.min.fccffbb3.js";import"./index.5f2defea.js";import"./EditFilled.960b3a16.js";import"./main.6509447f.js";import"./index.8cc7621e.js";import"./index.1d15c994.js";import"./DeleteOutlined.d0f28ba8.js";import"./index.dfde5764.js";import"./main.70523ff0.js";const l=({index:p,text:o})=>M("div",{className:"bg-white rounded-sm flex h-5 w-14 items-center justify-center",style:{border:"0.3px solid rgba(175, 176, 180, 0.6)"},children:[a("span",{className:"rounded-md bg-[#6F6F6F] h-3 text-white text-center leading-none text-[10px] w-3",children:p}),a("span",{className:"text-xs ml-1",children:o})]}),G=30,C=410,g=320,m=(C-g)/2,Ae=({globalHookState:p,hookState:o,directiveState:i,apiSetting:h,onEditHook:r})=>{const s=v(),f=u.exports.useRef(null);return u.exports.useEffect(()=>(t.Graph.registerNode("endpoint",{inherit:"rect",width:g,height:28,attrs:{body:{strokeWidth:.5,stroke:"rgba(95, 98, 105, 0.6)",fill:"#F3F9FD",rx:14,ry:14},text:{fontSize:14,fill:"#333333"}}}),t.Graph.registerNode("decision",{inherit:"polygon",width:112,height:50,attrs:{body:{strokeWidth:.5,stroke:"#F2B241",fill:"#ffffff",refPoints:"0,10 10,0 20,10 10,20"},text:{fontSize:14,fill:"#F3B13F"}}}),t.Graph.registerNode("operation",{inherit:"rect",width:g,height:44,attrs:{body:{strokeWidth:.5,stroke:{type:"linearGradient",attrs:{x1:"100%",y1:"100%",x2:"0%",y2:"0%"},stops:[{offset:"0%",color:"#FF9378"},{offset:"100%",color:"#E13D5B"}]},fill:{type:"linearGradient",attrs:{x1:"100%",y1:"0%",x2:"0%",y2:"100%"},stops:[{offset:"0%",color:"#FFF3F8"},{offset:"100%",color:"#FFDBDD"}]},rx:6,ry:6},text:{fontSize:14,fill:"#E92E5E"}}}),t.Graph.registerNode("globalHook",{inherit:"rect",width:20,height:20,markup:[{tagName:"image"}],attrs:{image:{"xlink:href":N,width:20,height:20,refX:0,refY:0,filter:{name:"dropShadow",args:{color:"rgba(202,83,206,0.33)",dx:0,dy:2,blur:7}}}}}),t.Graph.registerNode("hook",{inherit:"rect",width:20,height:20,markup:[{tagName:"image"}],attrs:{image:{"xlink:href":F,width:20,height:20,refX:0,refY:0,filter:{name:"dropShadow",args:{color:"rgba(56,110,252,0.23)",dx:0,dy:2,blur:4}}}}}),t.Graph.registerEdge("orange",{zIndex:-1,attrs:{line:{stroke:"#FF9810",strokeWidth:"1px",targetMarker:{name:"block",width:3,height:4}}}}),t.Graph.registerEdge("blue",{zIndex:-1,attrs:{line:{stroke:"#1034FF",strokeWidth:"1px",targetMarker:{name:"block",width:3,height:4}}}}),t.Graph.registerNode("flowLabel",{inherit:"rect",height:14,attrs:{body:{fill:"#fff",strokeWidth:.3,stroke:"rgba(175, 176, 180, 0.6)",rx:7,ry:7},text:{fontSize:12,fill:"#6f6f6f"}}}),t.Graph.registerEdge("rejectLine",{attrs:{line:{stroke:"#787D8B",strokeWidth:.5,strokeDasharray:"3 3",targetMarker:{name:"block",width:3,height:5}}}}),()=>{t.Graph.unregisterNode("endpoint"),t.Graph.unregisterNode("decision"),t.Graph.unregisterNode("operation"),t.Graph.unregisterNode("globalHook"),t.Graph.unregisterNode("hook"),t.Graph.unregisterNode("flowLabel"),t.Graph.unregisterEdge("orange"),t.Graph.unregisterEdge("blue"),t.Graph.unregisterEdge("rejectLine")}),[]),u.exports.useEffect(()=>{const e=new t.Graph({container:f.current,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},interacting:{nodeMovable:!1,edgeMovable:!1,edgeLabelMovable:!1,arrowheadMovable:!1,vertexMovable:!1,useEdgeTools:!1},background:{color:"#F8F9FD",image:D,size:{width:22,height:22},repeat:"repeat"},autoResize:!0}),x=e.createNode({shape:"endpoint",label:s.formatMessage({id:"e42x18",defaultMessage:[{type:0,value:"\u5BA2\u6237\u7AEF"}]}),x:m,y:G}),b=e.createNode({shape:"operation",label:"Subscription Operation",x:m,y:416}),y=e.createNode({shape:"endpoint",label:s.formatMessage({id:"bwYWez",defaultMessage:[{type:0,value:"\u4E8B\u4EF6\u6E90"}]}),x:m,y:587});e.addNodes([x,b,y]),e.addEdges([{shape:"orange",source:{x:160,y:58},target:{x:160,y:416}},{shape:"blue",source:{x:232,y:58},target:{x:232,y:416}},{shape:"orange",source:{x:300,y:58},target:{x:300,y:416}},{shape:"orange",source:{x:176,y:450},target:{x:176,y:587}},{shape:"blue",source:{x:248,y:450},target:{x:248,y:587}},{shape:"orange",source:{x:315,y:450},target:{x:315,y:587}}]),(i.fromClaim||h.authenticationRequired)&&(e.addNode({shape:"decision",label:s.formatMessage({id:"3bdXhI",defaultMessage:[{type:0,value:"\u767B\u5F55\u6821\u9A8C?"}]}),x:95,y:80}),e.addEdge({shape:"rejectLine",source:{x:95,y:106},target:{x:32,y:106}}),e.addNode({shape:"flowLabel",label:"401",width:26,height:14,x:57,y:98})),i.rbac&&(e.addNode({shape:"decision",label:s.formatMessage({id:"lPNqbT",defaultMessage:[{type:0,value:"\u6388\u6743\u6821\u9A8C?"}]}),x:95,y:160}),e.addEdge({shape:"rejectLine",source:{x:95,y:186},target:{x:32,y:186}}),e.addNode({shape:"flowLabel",label:"401",width:26,height:14,x:57,y:178})),i.jsonSchema&&(e.addNode({shape:"decision",label:s.formatMessage({id:"hv0Nju",defaultMessage:[{type:0,value:"\u5165\u53C2\u6821\u9A8C?"}]}),x:95,y:236}),e.addEdge({shape:"rejectLine",source:{x:95,y:262},target:{x:32,y:262}}),e.addNode({shape:"flowLabel",label:"400",width:26,height:14,x:57,y:254})),(i.fromClaim||h.authenticationRequired||i.rbac||i.jsonSchema)&&e.addNode({shape:"rect",label:s.formatMessage({id:"LOLrph",defaultMessage:[{type:0,value:"\u7ED3 \u675F"}]}),x:11,y:82,width:21,height:212,attrs:{body:{stroke:"#E9EBF3",strokeWidth:3,fill:"none"},text:{fill:"#B6BACC",fontSize:12}}}),new d({shape:"globalHook",x:166,y:520},[{shape:"react-shape",width:114,height:20,component:a(n,{enabled:p.onConnectionInit.enable,label:"onConnectionInit",onDoubleClick:()=>{r==null||r(p.onConnectionInit)}}),x:10,y:536}],"arrow").addToGraph(e,{position:"left"});const c=[{shape:"react-shape",width:114,height:20,component:a(n,{enabled:o.preResolve.enable,label:"preResolve",onDoubleClick:()=>{r==null||r(o.preResolve)}}),x:4,y:292}];o.mutatingPreResolve.can&&c.push({shape:"react-shape",width:114,height:20,component:a(n,{enabled:o.mutatingPreResolve.enable,label:"mutatingPreResolve",onDoubleClick:()=>{r==null||r(o.mutatingPreResolve)}}),x:4,y:336}),new d({shape:"hook",x:150,y:315},c,"arrow").addToGraph(e,{position:"left"}),new d({shape:"hook",x:222,y:315},[{shape:"react-shape",width:114,height:20,component:a(n,{enabled:o.mutatingPostResolve.enable,label:"mutatingPostResolve",onDoubleClick:()=>{r==null||r(o.mutatingPostResolve)}}),x:280,y:292},{shape:"react-shape",width:114,height:20,component:a(n,{enabled:o.postResolve.enable,label:"postResolve",onDoubleClick:()=>{r==null||r(o.postResolve)}}),x:280,y:336}],"arrow").addToGraph(e),[{shape:"react-shape",x:148,y:482,component:a(l,{index:"1",text:s.formatMessage({id:"m6bUGD",defaultMessage:[{type:0,value:"\u8BA2\u9605"}]})})},{shape:"react-shape",x:132,y:375,component:a(l,{index:"2",text:s.formatMessage({id:"m6bUGD",defaultMessage:[{type:0,value:"\u8BA2\u9605"}]})})},{shape:"react-shape",x:218,y:482,component:a(l,{index:"3",text:s.formatMessage({id:"FbmCny",defaultMessage:[{type:0,value:"\u63A8\u9001"}]})})},{shape:"react-shape",x:204,y:204,component:a(l,{index:"4",text:s.formatMessage({id:"FbmCny",defaultMessage:[{type:0,value:"\u63A8\u9001"}]})})},{shape:"react-shape",x:287,y:482,component:a(l,{index:"5",text:s.formatMessage({id:"blp0RF",defaultMessage:[{type:0,value:"\u53D6\u6D88"}]})})},{shape:"react-shape",x:272,y:375,component:a(l,{index:"6",text:s.formatMessage({id:"blp0RF",defaultMessage:[{type:0,value:"\u53D6\u6D88"}]})})}].forEach(w=>{e.addNode(w)}),e.addNode({shape:"rect",x:286,y:632,label:s.formatMessage({id:"XseOZ1",defaultMessage:[{type:0,value:"\u6CE8\uFF1A2 \u2192 3 \u2192 4 \u2192 5 \u91CD\u590D\u6267\u884C"}]}),attrs:{body:{fill:"none",stroke:"none"},text:{fill:"#9296A0",fontSize:12}}})},[h,i,p,o,r]),a("div",{className:"flex flex-shrink-0 w-full overflow-x-auto overflow-y-hidden !h-full",children:a("div",{className:"flex-1 min-h-175 min-w-102",ref:f})})};export{Ae as default};
