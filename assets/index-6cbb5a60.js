import{r as c,A as qe,h as Ee,K as te,C as Ue,ae as De,k as F,j as e,g as Pe,W as N,al as Be,V as $,X as Ge,ad as M,Y as me,u as fe,ag as i,P as Le,am as Ye,an as We,Q as b,ao as je,T as Ne,ap as Qe,ac as Ke,L as Ze,l as He,n as Xe,R as Je,a6 as es}from"./index-8fcf9617.js";import{a as re}from"./datasource-context-98036905.js";import{d as Ve,D as X,g as ss,i as as}from"./datasource-1fc2b5d7.js";import{G as ts}from"./globalContext-cecb5145.js";import{u as he}from"./lock-9a358ec6.js";import{l as Re,F as ls}from"./index-a9e2b670.js";import{E as ge}from"./50x-24dca637.js";import{u as rs,g as oe,a as Ae}from"./variable-336fe699.js";import{D as j}from"./index-87cc4088.js";import{i as K}from"./use-immer.module-e08025f6.js";import{u as Ce,I as Te}from"./index-0784887c.js";import{u as Fe}from"./validate-69f93ee9.js";import{V as Se}from"./common-7ac8785d.js";import{w as $e,p as is,g as ns}from"./db-05fb80ee.js";import{P as ds}from"./index-47715de1.js";import{I as ie}from"./index-0b48f0c3.js";import{U as xe}from"./index-6604c0aa.js";import{T as os}from"./Table-a2abadc7.js";import{p as cs}from"./parser-0b83345b.js";import{S as Z}from"./index-1dd4ef3f.js";import{S as ke}from"./index-32253ab8.js";import{I as be}from"./index-b8edc123.js";import{M as pe}from"./index-47514322.js";import{T as ce,a as ms}from"./index-a598a5a2.js";import{T as us}from"./index-736a1d41.js";import{A as ps}from"./index-bdd08a45.js";import{S as ye}from"./index-232bd61d.js";import{P as Me}from"./PlusOutlined-0c5d9e7a.js";import{C as fs}from"./index-717c59ab.js";import{M as hs}from"./index-3212666a.js";import"./ServiceDiscovery-0b7fc560.js";import"./useBreakpoint-7e6dd639.js";import"./useForceUpdate-fbce3ff8.js";import"./index-c6d5171d.js";import"./addEventListener-cfbf19c4.js";import"./LeftOutlined-1d6a1c51.js";import"./PaperClipOutlined-41b1b1de.js";import"./DeleteOutlined-9597f87a.js";import"./useShowArrow-48f750eb.js";import"./index-2832b555.js";import"./DownOutlined-477a4df2.js";import"./index-28a5ab96.js";import"./conductUtil-59c07978.js";import"./index-ac0270f4.js";import"./index-e75fb219.js";import"./PurePanel-43f1e3ae.js";import"./index-f236deb7.js";import"./prismaInit-d3ad3f20.js";import"./main-7459389b.js";import"./utils-9b986f1e.js";import"./useCurrentEntity-ceef2f90.js";import"./PrismaSchemaActions-5cb76651.js";import"./PrismaSchemaContext-8ddcfa64.js";var gs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]},name:"plus-circle",theme:"filled"};const xs=gs;var js=function(h,a){return c.createElement(qe,Ee({},h,{ref:a,icon:xs}))},vs=c.forwardRef(js);const bs=vs,ys="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAOVBMVEUAAAA0NDQ0NDQ2NjY6OjozMzM0NDQzMzM0NDQ2NjYzMzMzMzMzMzM0NDQ0NDQ1NTU2NjY3NzczMzN5G292AAAAEnRSTlMA1bUhDeti+Y095MfCcWY+NBft/6J1AAAAXElEQVQoz9WOSQ7AMAwCszpLd/7/2B4aFVvqA5o5YYQwbj7Cmszd+v6IBUH7MWN7VaWfPHOtQFgMz2ZBaUNW5DgkTxthgSm1L+0MTuMgzVHgOUgjQI/ui1Mu9w9uJS4C36ah1j4AAAAASUVORK5CYII=";Re.config({paths:{vs:"./modules/monaco-editor/min/vs"}});function Ms({content:s}){var C;const h=te(),{globalSetting:a}=c.useContext(Ue),{getConfigurationValue:v}=rs(),f=De("/sdk/enabledServer",F);if(!s)return e.jsx(ge,{});const V=`${v(a.serverOptions.serverUrl)}/gqls/${s.name}/graphql`;return e.jsx("div",{className:"flex mb-8 justify-center",children:e.jsxs(j,{bordered:!0,column:1,size:"small",labelStyle:{width:190},children:[e.jsx(j.Item,{label:e.jsx("div",{children:e.jsx("span",{children:h.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]})})}),className:"justify-start",children:s.name}),e.jsx(j.Item,{label:e.jsx("div",{children:e.jsx("span",{children:h.formatMessage({id:"L4WUiq",defaultMessage:[{type:0,value:"GraphQL 端点"}]})})}),className:"justify-start",children:e.jsx("a",{href:V,target:"_blank",rel:"noreferrer",children:V})}),e.jsx(j.Item,{label:e.jsx("div",{children:e.jsx("span",{children:h.formatMessage({id:"HE0NF8",defaultMessage:[{type:0,value:"Schema 文件"}]})})}),className:"justify-start",children:e.jsxs("a",{href:`/api/vscode/readFile?uri=${(C=f.data)==null?void 0:C.outputPath}/customize/${s.name}.json`,target:"_blank",rel:"noreferrer",children:[e.jsx("img",{className:"mr-1",alt:"wenjian1",src:"./assets/iconfont/wenjian1.svg",style:{height:"1em",width:"1em"}}),"customize/",s.name,".json"]})})]})})}const ws="_monaco_1n7bn_64",Ns="_modal_1n7bn_72",_e={"connect-edit-btn":"_connect-edit-btn_1n7bn_1","connect-check-btn":"_connect-check-btn_1n7bn_20","connect-check-btn-common":"_connect-check-btn-common_1n7bn_39","db-check-setting":"_db-check-setting_1n7bn_49","form-contain":"_form-contain_1n7bn_57",monaco:ws,"db-setting-table":"_db-setting-table_1n7bn_68",modal:Ns},Cs="_table_1guj5_1",Fs={table:Cs};function Ie({beforeUpload:s,setUploadPath:h,setVisible:a,dir:v}){const f=te(),[V,C]=c.useState([]),[x,S]=c.useState(!1),[U,_]=c.useState(""),z={name:"content",customRequest(t){const m=t.file;$e(`${v}/${m.name}`,m).then(w=>{var R;(R=t.onSuccess)==null||R.call(t,w)}).catch(w=>{var R;(R=t.onError)==null||R.call(t,w)})},showUploadList:!1,beforeUpload:s,onChange(t){var m;t.file.status!=="uploading"&&console.log(t.file,t.fileList),t.file.status==="done"?($.success(`${t.file.name} ${f.formatMessage({id:"C4HPJc",defaultMessage:[{type:0,value:"上传成功"}]})}`),S(!x)):t.file.status==="error"&&$.error(((m=t.file.response)==null?void 0:m.message)||`${t.file.name} ${f.formatMessage({id:"R8Yt/D",defaultMessage:[{type:0,value:"上传失败"}]})}`)}},g=(t,m)=>{m==null||m.stopPropagation(),F.delete("/vscode/delete",{data:{uri:`${v}/${t.name}`}}).then(()=>{S(!x)})},q=t=>{t==null||t.stopPropagation()};c.useEffect(()=>{F.get(`/vscode/readDirectory?uri=${v}&ignoreNotExist=true`).then(t=>{C(t)})},[x,v]);const B=[{title:f.formatMessage({id:"o8HwKf",defaultMessage:[{type:0,value:"文件名"}]}),dataIndex:"name",key:"name",className:"cursor-pointer"},{title:f.formatMessage({id:"o9bMHL",defaultMessage:[{type:0,value:"大小"}]}),dataIndex:"size",key:"size",width:100},{title:f.formatMessage({id:"R2D5Dv",defaultMessage:[{type:0,value:"创建时间"}]}),dataIndex:"ctime",key:"ctime",width:180,render:t=>new Date(t/1e6).toLocaleString()},{title:f.formatMessage({id:"799kEA",defaultMessage:[{type:0,value:"修改时间"}]}),dataIndex:"mtime",key:"mtime",width:180,render:t=>new Date(t/1e6).toLocaleString()},{title:f.formatMessage({id:"UtE0dS",defaultMessage:[{type:0,value:"操作"}]}),dataIndex:"icon",key:"icon",width:80,render:(t,m)=>e.jsxs("div",{className:"flex items-center justify-between",onClick:w=>w.stopPropagation(),children:[e.jsx(ds,{title:f.formatMessage({id:"LzQ0Lw",defaultMessage:[{type:0,value:"确认删除？"}]}),onConfirm:w=>g(m,w),onCancel:q,okText:f.formatMessage({id:"yOMNOj",defaultMessage:[{type:0,value:"是"}]}),cancelText:f.formatMessage({id:"P/eul9",defaultMessage:[{type:0,value:"否"}]}),children:e.jsx("img",{alt:"shanchu",src:"./assets/iconfont/shanchu.svg",style:{height:"1em",width:"1em",fontSize:"16px",color:"#f6595b"},className:"cursor-pointer"})}),e.jsx("a",{className:"inline-flex",href:`/api/vscode/readFile?uri=${`${v}/${m.name}`}&auth-key=${Pe()}`,target:"_blank",rel:"noreferrer",children:e.jsx("img",{alt:"xiazai",src:"./assets/iconfont/xiazai.svg",style:{height:"1em",width:"1em",fontSize:"22px"},className:"cursor-pointer"})})]})}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex mb-3 justify-between",children:[e.jsx(N,{style:{height:26},className:"h-26px max-w-328px",addonBefore:e.jsx(ie,{height:14,width:14,src:"./assets/folder.svg",alt:"目录",preview:!1}),value:`${v}`,readOnly:!0}),e.jsx(xe,{...z,className:"cursor-pointer m-auto h-6 ml-3 w-20",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(ie,{rootClassName:"mr-1",height:16,width:16,src:"./assets/upload.svg",alt:"上传",preview:!1}),"选择文件"]})}),e.jsx(N,{value:U,onChange:t=>_(t.target.value),addonBefore:e.jsx(Be,{}),style:{width:228,height:26}})]}),e.jsx(os,{className:Fs.table,columns:B,dataSource:V.filter(t=>t.name.includes(U)),pagination:!1,scroll:{x:738,y:455},rowKey:t=>t.name,onRow:t=>({onClick:m=>{h(`${t.name}`),a(!1)}})})]})}const ks="_head_i7tcr_1",Is="_btn_i7tcr_5",ve={head:ks,btn:Is,"ant-select":"_ant-select_i7tcr_13","ant-select-selector":"_ant-select-selector_i7tcr_13"};Re.config({paths:{vs:"./modules/monaco-editor/min/vs"}});const Vs=({replaceJSON:s,initSchema:h,content:a,onSave:v})=>{const f=te(),{id:V}=Ge(),[C,x]=K([]),[S,U]=c.useState([]),[_,z]=c.useState([]),[g,q]=c.useState([]),[B,t]=c.useState([]),[m,w]=c.useState(h),[R,E]=c.useState(null);c.useEffect(()=>{s&&x(s.map((r,u)=>({id:u.toString(),table:r.table,field:r.field,resType:r.resType,inputType:r.inputType,isOpen:(r==null?void 0:r.isOpen)||!1})))},[s]),c.useEffect(()=>{if(m)try{const r=cs(m,{noLocation:!0}).definitions,u=r.filter(d=>d.kind==="InputObjectTypeDefinition").map(d=>({label:d.name.value,value:d.name.value}));q(u);const l=r.filter(d=>d.kind==="ObjectTypeDefinition").map(d=>({label:d.name.value,value:d.name.value}));t(l)}catch{return}},[m]),c.useEffect(()=>{F.get(`/datasource/${V??""}/dmmf`,{timeout:15e3}).then(r=>{const u=(r.models||[]).map(l=>({name:l.name,fields:l.fields.map(d=>({name:d.name,title:d.title}))}));return U(u),u}).then(r=>z(r.map(u=>({label:u.name,value:u.name}))))},[V]);function k(r){var l;const u=(l=S.find(d=>d.name===r.table))==null?void 0:l.fields;return u==null?void 0:u.map(d=>({label:d.name,value:d.name}))}function A(r,u){x(l=>{const d=l.find(D=>D.id===u.id);d.table=r})}function G(r,u){x(l=>{const d=l.find(D=>D.id===u.id);d.field=r})}function J(r,u){x(l=>{const d=l.find(D=>D.id===u.id);d.inputType=r})}function L(r,u){x(l=>{const d=l.find(D=>D.id===u.id);d.resType=r})}function W(r,u){x(l=>{const d=l.find(D=>D.id===u.id);d.isOpen=r})}function T(){x(r=>r.concat({id:Date.now().toString(),table:"",field:"",resType:"",inputType:"",isOpen:!0}))}function H(){const r={...a,config:{...a.config,replaceJSONTypeFieldConfiguration:C,schemaExtension:m}};F.put("/datasource",r).then(u=>{v(r),u&&$.success(f.formatMessage({id:"WHN1dG",defaultMessage:[{type:0,value:"保存成功！"}]}))})}function ee(r){x(u=>u.filter(l=>l.id!==r.id))}return e.jsxs("div",{className:"flex gap-6 h-[calc(100vh_-_190px)]",children:[e.jsxs("div",{className:"w-2/5",children:[e.jsx("div",{className:`${ve.head}`,children:e.jsx("span",{children:f.formatMessage({id:"UxBXdV",defaultMessage:[{type:0,value:"自定义类型"}]})})}),e.jsx(ls,{language:"graphql",value:m,onChange:r=>w(r??"")})]}),e.jsxs("div",{className:"w-3/5",children:[e.jsxs("div",{className:`${ve.head} !pr-3 flex items-center justify-between`,children:[e.jsx("span",{children:f.formatMessage({id:"96YcwE",defaultMessage:[{type:0,value:"字段类型映射"}]})}),e.jsxs(M,{size:"small",className:`${ve.btn} flex items-center justify-evenly cursor-pointer`,onClick:H,children:[e.jsx("img",{alt:"baocun",src:"./assets/iconfont/baocun.svg",style:{height:"1em",width:"1em",color:"#5F6269"}}),e.jsx("span",{className:"text-sm",children:f.formatMessage({id:"b5l2vN",defaultMessage:[{type:0,value:"保存"}]})})]})]}),e.jsxs("div",{className:"relative py-3 px-3.5 bg-[#FFFFFF]",children:[e.jsx(bs,{onClick:T,className:"absolute right-2 top-1 z-2 cursor-pointer !text-[#649FFF]"}),e.jsxs("table",{className:"w-full bg-[#FFFFFFFF] disable-common-select",children:[e.jsx("thead",{className:"leading-38px bg-[#5F62690D]",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{children:f.formatMessage({id:"F3wzck",defaultMessage:[{type:0,value:"表"}]})}),e.jsx("th",{children:f.formatMessage({id:"z0QaYJ",defaultMessage:[{type:0,value:"字段"}]})}),e.jsx("th",{children:f.formatMessage({id:"tmMwuy",defaultMessage:[{type:0,value:"响应类型"}]})}),e.jsx("th",{children:f.formatMessage({id:"xc9ERZ",defaultMessage:[{type:0,value:"输入类型"}]})}),e.jsx("th",{children:f.formatMessage({id:"8mYf5w",defaultMessage:[{type:0,value:"是否开启"}]})}),e.jsx("th",{})]})}),e.jsx("tbody",{children:C.map((r,u)=>e.jsxs("tr",{onMouseEnter:()=>E(u),onMouseLeave:()=>E(null),className:`${R===u?"bg-[#F8F8F9FF]":""} h-45px`,children:[e.jsx("td",{children:e.jsx(Z,{className:"disable-common-select",defaultValue:r.table,style:{width:120},bordered:!1,options:_,value:r.table,onChange:l=>A(l,r)})}),e.jsx("td",{children:e.jsx(Z,{className:"disable-common-select",defaultValue:"",style:{width:120},bordered:!1,options:k(r),value:r.field,onChange:l=>G(l,r)})}),e.jsx("td",{children:e.jsx(Z,{className:"disable-common-select",defaultValue:"",style:{width:120},bordered:!1,options:B,value:r.resType,onChange:l=>L(l,r)})}),e.jsx("td",{children:e.jsx(Z,{className:"disable-common-select",defaultValue:"",style:{width:120},bordered:!1,options:g,value:r.inputType,onChange:l=>J(l,r)})}),e.jsx("td",{children:e.jsx(ke,{className:"w-8",checked:r.isOpen,onChange:l=>W(l,r)})}),e.jsx("td",{children:e.jsx("img",{alt:"shanchu",src:"./assets/iconfont/shanchu.svg",style:{height:"1em",width:"1em"},onClick:()=>ee(r)})})]},u))})]})]})]})]})},Ss=Vs,_s=/^(([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5]))$/;function Ds({content:s,type:h}){var o;const a=te(),{ruleMap:v}=Fe(),f=me(),V=fe(),{handleToggleDesigner:C,handleSave:x}=c.useContext(re),[S,U]=c.useState(!1),[_,z]=c.useState(!1),[g]=i.useForm(),q=i.useWatch(["customDatabase","databaseAlone","username"],g),B=i.useWatch(["customDatabase","databaseAlone","password"],g),t=i.useWatch(["customDatabase","kind"],g),[m,w]=c.useState(!1),R=Ce(),E=n=>{g.setFieldValue(["customDatabase","databaseUrl","kind"],0),g.setFieldValue(["customDatabase","databaseUrl","staticVariableContent"],n),g.validateFields()},k=(o=Ve[s==null?void 0:s.kind])==null?void 0:o.toLowerCase(),A=c.useRef(""),{modal:G}=Le.useApp(),J=async()=>{A.current="";const n=G.confirm({title:a.formatMessage({id:"7nyFdZ",defaultMessage:[{type:0,value:"请输入名称"}]}),content:e.jsx(N,{autoFocus:!0,placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]}),onChange:p=>{A.current=p.target.value}}),footer:e.jsxs("div",{className:"flex mt-2 justify-end common-form",children:[e.jsx(M,{className:"btn-cancel",onClick:()=>{n.destroy()},children:e.jsx("span",{children:a.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"取消"}]})})}),e.jsx(M,{className:"ml-4 btn-save",onClick:async()=>{var y,Q;const p=A.current.trim().replace(/\.db$/,"").trim();if(!p){$.error(a.formatMessage({id:"7nyFdZ",defaultMessage:[{type:0,value:"请输入名称"}]}));return}const I=$.loading(a.formatMessage({id:"Oww89Y",defaultMessage:[{type:0,value:"上传中"}]}));try{try{await $e(`${f.sqlite}/${p}.db`,"",p+".db")}catch(Y){const de={10440011:a.formatMessage({id:"y5nbOM",defaultMessage:[{type:0,value:"文件名已存在"}]})}[(Q=(y=Y==null?void 0:Y.response)==null?void 0:y.data)==null?void 0:Q.code];$.error(de||a.formatMessage({id:"R8Yt/D",defaultMessage:[{type:0,value:"上传失败"}]}));return}E(`${p}.db`),n.destroy()}finally{I()}},children:a.formatMessage({id:"r0/TUu",defaultMessage:[{type:0,value:"确定"}]})})]})})},L=s.kind===X.SQLite?e.jsx(i.Item,{rules:[{required:!0,message:a.formatMessage({id:"6RphVF",defaultMessage:[{type:0,value:"请上传文件"}]})}],label:e.jsx(e.Fragment,{children:e.jsx("span",{children:"路径"})}),colon:!1,name:["customDatabase","databaseUrl","staticVariableContent"],style:{marginBottom:"20px"},children:e.jsxs("div",{className:"flex",children:[e.jsx(i.Item,{name:["customDatabase","databaseUrl","staticVariableContent"],noStyle:!0,children:e.jsx(N,{placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]}),onClick:()=>w(!0),suffix:e.jsx("a",{onClick:()=>w(!0),children:"浏览"}),readOnly:!0})}),e.jsx(M,{className:"ml-4 text-[#f5587a]",onClick:J,children:a.formatMessage({id:"nTlFd6",defaultMessage:[{type:0,value:"创建空数据库"}]})})]})}):e.jsx(Te,{formItemProps:{label:a.formatMessage({id:"6B0EzP",defaultMessage:[{type:0,value:"连接URL"}]}),name:["customDatabase","databaseUrl"]},inputProps:{placeholder:s.kind===X.SQLServer?a.formatMessage({id:"05fIjw",defaultMessage:[{type:0,value:"示例: sqlserver://ip:port;database=db;user="},{type:1,value:"user"},{type:0,value:";password="},{type:1,value:"password"},{type:0,value:";trustServerCertificate=true"}]}):a.formatMessage({id:"Mafx5X",defaultMessage:[{type:0,value:"示例: "},{type:1,value:"dbProtocol"},{type:0,value:"://user:password@localhost:3306/db-name"}]},{dbProtocol:k})},envProps:{placeholder:a.formatMessage({id:"uWEv0M",defaultMessage:[{type:0,value:"请选择一个环境变量或者手动输入"}]})},rules:k?[{required:!0,validator(n,p,I){var y,Q;if(p.kind===Se.Env)I();else{const Y=new RegExp(`^${k}://.{1,${125-k.length}}$`);(Q=(y=p.staticVariableContent)==null?void 0:y.match(Y))!=null&&Q.length?I():I(a.formatMessage({id:"k7lSDV",defaultMessage:[{type:0,value:"以 "},{type:1,value:"dbProtocol"},{type:0,value:":// 开头，不超过128位"}]},{dbProtocol:k}))}}}]:[]}),W=e.jsxs(e.Fragment,{children:[e.jsx(i.Item,{label:a.formatMessage({id:"Rj34mG",defaultMessage:[{type:0,value:"主机:"}]}),name:["customDatabase","databaseAlone","host"],rules:[{required:!0,message:a.formatMessage({id:"aYUJpY",defaultMessage:[{type:0,value:"主机名不能为空"}]})}],children:e.jsx(N,{placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})})}),e.jsx(i.Item,{label:a.formatMessage({id:"w1CbbR",defaultMessage:[{type:0,value:"数据库名:"}]}),name:["customDatabase","databaseAlone","database"],rules:[{required:!0,message:a.formatMessage({id:"2FVy0L",defaultMessage:[{type:0,value:"数据库名不能为空"}]})},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_-]*$","g"),message:a.formatMessage({id:"VmsX4o",defaultMessage:[{type:0,value:"以字母或下划线开头，只能由数字、字母、下划线组成"}]})}],children:e.jsx(N,{placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})})}),e.jsx(i.Item,{label:a.formatMessage({id:"4rbyCQ",defaultMessage:[{type:0,value:"端口:"}]}),name:["customDatabase","databaseAlone","port"],rules:[{required:!0,message:a.formatMessage({id:"ND/EcE",defaultMessage:[{type:0,value:"端口号不能为空"}]})},{pattern:_s,message:a.formatMessage({id:"Ksj+aW",defaultMessage:[{type:0,value:"端口范围为0-9999"}]})}],children:e.jsx(be,{placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})})}),e.jsx(i.Item,{label:a.formatMessage({id:"+l43TG",defaultMessage:[{type:0,value:"用户:"}]}),required:!0,children:e.jsx(N.Group,{compact:!0,className:"!flex",children:e.jsx(i.Item,{name:["customDatabase","databaseAlone","username"],noStyle:!0,rules:[{required:!0,message:a.formatMessage({id:"9SBdsw",defaultMessage:[{type:0,value:"用户名不能为空"}]})},{pattern:new RegExp("^[a-zA-Z_][.a-zA-Z0-9_]*$","g"),message:a.formatMessage({id:"RLuwfd",defaultMessage:[{type:0,value:"以字母或下划线开头，只能由数字、字母、下划线、点组成"}]})}],children:String(q)!=="1"?e.jsx(N,{className:"flex-1",placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})}):e.jsx(Z,{className:"flex-1",options:R})})})}),e.jsx(i.Item,{label:a.formatMessage({id:"zq/lNp",defaultMessage:[{type:0,value:"密码:"}]}),children:e.jsx(N.Group,{compact:!0,className:"!flex",children:e.jsx(i.Item,{name:["customDatabase","databaseAlone","password"],noStyle:!0,children:String(B)!=="1"?e.jsx(N,{className:"flex-1",placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})}):e.jsx(Z,{className:"flex-1",options:R})})})})]}),[T,H]=K(L);c.useEffect(()=>{h==="form"&&g.resetFields(),H(s.customDatabase.databaseAlone?W:L)},[s,h]),c.useEffect(()=>{H(t===1?W:L)},[q,B]);const{loading:ee,fun:r}=he(async n=>{const p={...s,...n};s.name?await F.put("/datasource",p):await F.post("/datasource",p),x(p)},[s,x]);if(!s)return e.jsx(ge,{});const u=n=>{console.log("Failed:",n)},l=()=>{var I;const n=g.getFieldsValue();if(t===0){const y=(I=n.customDatabase.databaseUrl)==null?void 0:I.staticVariableContent;if(y&&y.kind!==Se.Env){const Q=is(y??"");if(Q){const{username:Y,password:ne,host:de,port:ze,dbName:Oe}=Q;g.setFieldsValue({customDatabase:{databaseAlone:{username:Y,password:ne,host:de,port:ze,database:Oe}}})}}}else if(k||console.error("未配置当前数据库scheam"),n.customDatabase.databaseAlone){const{host:y,port:Q,database:Y,username:ne,password:de}=n.customDatabase.databaseAlone;y&&Y&&ne&&(g.setFieldValue(["customDatabase","databaseUrl","kind"],0),g.setFieldValue(["customDatabase","databaseUrl","staticVariableContent"],ns(s.kind,{schema:k,host:y,port:Q,dbName:Y,username:ne,password:de})))}const p=g.getFieldsError().some(({errors:y})=>y.length);U(p)},d=()=>{F.post("/datasource/checkConnection",s).then(()=>{$.success(a.formatMessage({id:"DPch2e",defaultMessage:[{type:0,value:"已刷新"}]}))})},D=async()=>{if(await g.validateFields()){const n=g.getFieldsValue(),p={...s,...n};F.post("/datasource/checkConnection",p).then(()=>{$.success(a.formatMessage({id:"JDIfhr",defaultMessage:[{type:0,value:"连接成功"}]}))})}},O=n=>{switch(n){case 0:g.setFieldValue(["customDatabase","kind"],0),H(L);break;case 1:g.setFieldValue(["customDatabase","kind"],1),H(W);break;default:H("");break}};return e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:_e.modal,title:null,footer:null,open:m,onOk:()=>w(!1),onCancel:()=>w(!1),width:920,destroyOnClose:!0,children:e.jsx(Ie,{setUploadPath:E,setVisible:w,dir:f.sqlite,beforeUpload:n=>{const p=n.name.endsWith(".db");return p||$.error(a.formatMessage({id:"cJXZNP",defaultMessage:[{type:0,value:"只允许上传 db 格式文件"}]})),p||xe.LIST_IGNORE}})}),h==="detail"?e.jsxs("div",{children:[e.jsx("div",{className:"flex py-10px justify-end"}),e.jsx("div",{children:e.jsxs(j,{bordered:!0,column:1,size:"small",children:[e.jsx(j.Item,{label:a.formatMessage({id:"TACLOV",defaultMessage:[{type:0,value:"连接名"}]}),children:s.name}),e.jsx(j.Item,{label:a.formatMessage({id:"niiUfh",defaultMessage:[{type:0,value:"数据库类型"}]}),children:Ve[s.kind]}),s.kind===X.SQLite?e.jsx(j.Item,{label:a.formatMessage({id:"5euLB8",defaultMessage:[{type:0,value:"路径"}]}),children:oe(s.customDatabase.databaseUrl)}):e.jsxs(e.Fragment,{children:[s.kind===X.MongoDB?e.jsx(e.Fragment,{}):e.jsx(j.Item,{label:a.formatMessage({id:"DLG2Yy",defaultMessage:[{type:0,value:"连接类型"}]}),children:s.customDatabase.databaseUrl?"连接URL":s.customDatabase.databaseAlone?"连接参数":""}),s.customDatabase.databaseAlone?e.jsxs(e.Fragment,{children:[e.jsx(j.Item,{label:a.formatMessage({id:"h7JHIR",defaultMessage:[{type:0,value:"主机"}]}),children:s.customDatabase.databaseAlone.host}),e.jsx(j.Item,{label:a.formatMessage({id:"PI0Ele",defaultMessage:[{type:0,value:"端口"}]}),children:s.customDatabase.databaseAlone.port}),e.jsx(j.Item,{label:a.formatMessage({id:"qNTQ6L",defaultMessage:[{type:0,value:"数据库名"}]}),children:s.customDatabase.databaseAlone.database}),e.jsx(j.Item,{label:a.formatMessage({id:"eL3Qi6",defaultMessage:[{type:0,value:"用户"}]}),children:s.customDatabase.databaseAlone.username}),e.jsx(j.Item,{label:a.formatMessage({id:"Pdx/YD",defaultMessage:[{type:0,value:"密码"}]}),children:e.jsx("span",{className:"flex items-center",children:_?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s.customDatabase.databaseAlone.password}),e.jsx(Ye,{className:"ml-4",onClick:()=>z(!_)})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"***********"}),e.jsx(We,{className:"ml-4",onClick:()=>z(!_)})]})})})]}):e.jsx(e.Fragment,{children:e.jsx(j.Item,{label:a.formatMessage({id:"6B0EzP",defaultMessage:[{type:0,value:"连接URL"}]}),children:oe(s.customDatabase.databaseUrl)})})]}),e.jsx(j.Item,{label:e.jsx(b,{id:"J01UX5",defaultMessage:[{type:0,value:"使用缓存"}]}),children:s.cacheEnabled?e.jsxs(e.Fragment,{children:[e.jsx(b,{id:"yOMNOj",defaultMessage:[{type:0,value:"是"}]}),e.jsx(M,{className:"ml-4",size:"small",type:"primary",ghost:!0,onClick:d,children:e.jsx(b,{id:"FpnbA9",defaultMessage:[{type:0,value:"刷新缓存"}]})})]}):e.jsx(b,{id:"P/eul9",defaultMessage:[{type:0,value:"否"}]})})]})})]}):h==="form"?e.jsx("div",{children:e.jsx("div",{className:`${_e["form-contain"]} py-6 rounded-xl mb-4`,children:e.jsxs(i,{form:g,style:{width:"90%"},name:"basic",labelCol:{span:4},wrapperCol:{span:12},onFinish:n=>void r(n),onFinishFailed:u,onValuesChange:l,validateTrigger:["onBlur","onChange"],autoComplete:"new-password",labelAlign:"right",initialValues:{...s},children:[e.jsx(i.Item,{label:a.formatMessage({id:"RagALW",defaultMessage:[{type:0,value:"名称:"}]}),name:"name",rules:[{required:!0,message:a.formatMessage({id:"mfZMW6",defaultMessage:[{type:0,value:"名称不能为空"}]})},...v.name],children:e.jsx(N,{readOnly:!!s.name,placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]}),autoComplete:"off",autoFocus:!0})}),s.kind===X.SQLite||s.kind===X.MongoDB?e.jsx(e.Fragment,{}):e.jsx(i.Item,{label:a.formatMessage({id:"V8cvxi",defaultMessage:[{type:0,value:"连接类型:"}]}),name:["customDatabase","kind"],children:e.jsxs(je.Group,{onChange:n=>O(n.target.value),children:[e.jsx(je,{value:0,style:{marginRight:"50px"},children:a.formatMessage({id:"6B0EzP",defaultMessage:[{type:0,value:"连接URL"}]})}),e.jsx(je,{value:1,children:a.formatMessage({id:"RP3X0u",defaultMessage:[{type:0,value:"连接参数"}]})})]})}),T,e.jsx(i.Item,{label:e.jsx(b,{id:"J01UX5",defaultMessage:[{type:0,value:"使用缓存"}]}),valuePropName:"checked",name:"cacheEnabled",tooltip:e.jsx(b,{id:"iHRgCO",defaultMessage:[{type:0,value:"经常使用第三方工具修改数据库结构时建议取消，只使用 Fireboom 管理数据库结构时建议开启，大表建议开启，开启后可以通过详情页手动刷新缓存"}]}),children:e.jsx(ke,{})}),e.jsxs(i.Item,{wrapperCol:{offset:4,span:16},children:[e.jsx(M,{className:"btn-cancel",onClick:()=>{s.name?C("detail",s.name,s.sourceType):V("/workbench/data-source/new")},children:e.jsx("span",{children:a.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"取消"}]})})}),e.jsx(M,{className:"ml-4 btn-test",onClick:()=>D(),children:a.formatMessage({id:"mPsm6o",defaultMessage:[{type:0,value:"测试"}]})}),e.jsx(M,{loading:ee,className:"ml-4 btn-save",onClick:()=>{g.submit()},children:a.formatMessage({id:"b5l2vN",defaultMessage:[{type:0,value:"保存"}]})})]})]})})}):e.jsx(Ss,{onSave:n=>{x({...n})},content:s})]})}const Rs=s=>e.jsx("div",{className:s.className,style:{width:0,position:"relative",left:"5px",height:"100%",display:"inline-block",verticalAlign:"middle",fontSize:0},children:e.jsx(Ne,{overlayClassName:"!max-w-100vw !max-h-100vh",title:s.title,arrow:!0,children:e.jsx("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:0,maxWidth:"initial"},children:e.jsx(ie,{width:10,height:10,alt:"提示",preview:!1,src:"./assets/warning.png"})})})}),P=Rs,As="_modal_1y1rp_56",se={"edit-btn":"_edit-btn_1y1rp_1","switch-check-btn":"_switch-check-btn_1y1rp_20","descriptions-box":"_descriptions-box_1y1rp_26","collapse-box":"_collapse-box_1y1rp_29","form-icon":"_form-icon_1y1rp_35","label-style":"_label-style_1y1rp_39","connect-check-btn-common":"_connect-check-btn-common_1y1rp_43","table-contain":"_table-contain_1y1rp_53",modal:As},Ts="_modal_4l36t_42",le={"switch-check-btn":"_switch-check-btn_4l36t_1","switch-edit-btn":"_switch-edit-btn_4l36t_7","form-icon":"_form-icon_4l36t_13","connect-check-btn-common":"_connect-check-btn-common_4l36t_17","table-contain":"_table-contain_4l36t_27","redoc-container":"_redoc-container_4l36t_30",modal:Ts},$s=({overlay:s})=>e.jsx(Ne,{className:"cursor-help",overlay:s,children:e.jsx(Qe,{className:"ml-1"})}),ue=$s,ae=s=>e.jsx("img",{width:14,height:14,alt:"请求头类型",className:"mr-2",src:{0:"./assets/header-value.png",1:"./assets/header-env.png",2:"./assets/header-relay.png"}[s]});function we(s){return s.reduce((h,a)=>{const{key:v,...f}=a;return h[v]={values:[f]},h},{})}const{TabPane:zs}=ce;function Os({content:s,type:h}){var u,l,d,D,O;const a=te(),v=me(),{ruleMap:f}=Fe(),V=fe(),{handleToggleDesigner:C,handleSave:x}=c.useContext(re),[S]=i.useForm(),[U,_]=K({}),[z,g]=K(!0),[q,B]=c.useState([]),t=Ce(),[m,w]=K(""),[R,E]=K(!1),k=i.useWatch(["customRest","responseExtractor","statusCodeJsonpath"],S),A=o=>{S.setFieldValue(["customRest","oasFilepath"],o),S.validateFields(["customRest","oasFilepath"]),G(o)},G=o=>{Ze.get(`/api/vscode/readFile?uri=${v.oas}/${o}`).then(n=>{var I;const p=He.get(n,"data.servers")??[];S.getFieldValue(["customRest","baseUrl"])||S.setFieldValue(["customRest","baseUrl"],((I=p[0])==null?void 0:I.url)??""),B(p.map(y=>({label:(y==null?void 0:y.url)??"",value:(y==null?void 0:y.url)??""})))}).catch(n=>{console.error(n),B([])})};c.useEffect(()=>{S.resetFields(),h==="form"&&(s!=null&&s.customRest.oasFilepath)&&G(s.customRest.oasFilepath)},[s,h]);const J=o=>{w(o)},L=o=>{var n;switch(o){case"0":g(!0),_({pattern:/^.{1,128}$/g,message:a.formatMessage({id:"BX00L6",defaultMessage:[{type:0,value:"请输入长度不大于128的非空值"}]})});return;case"1":g(!1),w(((n=t.at(0))==null?void 0:n.label)??"");return;case"2":g(!0),_({pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:a.formatMessage({id:"TFEmmD",defaultMessage:[{type:0,value:"以字母或下划线开头，只能由字母、下划线和数字组成"}]})});return;default:return}},{loading:W,fun:T}=he(async o=>{let{headers:n,...p}=o;p={...s,...p},p.customRest.headers=we(n),s.name?await F.put("/datasource",p):await F.post("/datasource",p),x(p)},[s,x]);if(!s)return e.jsx(ge,{});const H=o=>{throw $.error(a.formatMessage({id:"NzT9mX",defaultMessage:[{type:0,value:"提交失败"}]})),o},{Option:ee}=Z,r=o=>{o==="1"&&(g(!0),_({pattern:/^.{1,128}$/g,message:a.formatMessage({id:"BX00L6",defaultMessage:[{type:0,value:"请输入长度不大于128的非空值"}]})}))};return e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:le.modal,title:null,footer:null,open:R,onOk:()=>E(!1),onCancel:()=>E(!1),width:920,destroyOnClose:!0,children:e.jsx(Ie,{dir:v.oas,setUploadPath:A,setVisible:E,beforeUpload:o=>{const n=o.name.endsWith(".json")||o.name.endsWith(".yaml")||o.name.endsWith(".yml");return n||$.error(a.formatMessage({id:"2P6VLX",defaultMessage:[{type:0,value:"只允许上传 json 或 yaml 格式文件"}]})),n||xe.LIST_IGNORE}})}),h==="detail"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex mb-8 justify-center",children:e.jsxs(j,{bordered:!0,column:1,size:"small",className:le["descriptions-box"],children:[e.jsx(j.Item,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{className:le["label-style"],children:[a.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]})," ",e.jsx(P,{title:a.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]})})]})}),className:"justify-start",children:s.name}),e.jsx(j.Item,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{className:le["label-style"],children:[a.formatMessage({id:"jPMqvu",defaultMessage:[{type:0,value:"指定 OAS"}]}),e.jsx(P,{title:a.formatMessage({id:"jPMqvu",defaultMessage:[{type:0,value:"指定 OAS"}]})})]})}),children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>window.open(`/api/vscode/readFile?uri=${v.oas}/${s.customRest.oasFilepath}`,"_blank"),children:[e.jsx(ie,{src:"./assets/upload-file.png",width:14,height:14,alt:"文件",preview:!1}),e.jsx("span",{className:"ml-2 text-11px text-[#909399]",children:s.customRest.oasFilepath})]})}),e.jsx(j.Item,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{className:le["label-style"],children:[a.formatMessage({id:"1Y05V3",defaultMessage:[{type:0,value:"Rest 端点"}]}),e.jsx(P,{title:a.formatMessage({id:"1Y05V3",defaultMessage:[{type:0,value:"Rest 端点"}]})})]})}),className:"justify-start",children:oe(s.customRest.baseUrl)})]})}),e.jsx("div",{className:"tabs-form",children:e.jsx(ce,{defaultActiveKey:"1",items:[{key:"1",label:a.formatMessage({id:"23wB4T",defaultMessage:[{type:0,value:"请求头"}]}),children:e.jsx(j,{className:"mb-8",bordered:!0,column:1,size:"small",labelStyle:{width:190},children:Object.keys(s.customRest.headers??{}).map(o=>{const n=s.customRest.headers[o];return e.jsx(j.Item,{label:e.jsx("div",{children:e.jsxs("span",{className:le["label-style"],children:[o,e.jsx(P,{title:o})]})}),className:"justify-start",style:{wordBreak:"break-all"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-0px",children:ae(n.values[0].kind)}),e.jsx("div",{className:"flex-1 ml-2 min-w-0",children:oe(n.values[0])})]})},o)})})}]})}),s.customRest.responseExtractor&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-bold my-2",children:[e.jsx(b,{id:"7oHvWs",defaultMessage:[{type:0,value:"响应转换"}]}),e.jsx(ue,{overlay:e.jsx(b,{id:"w/qIx8",defaultMessage:[{type:0,value:"将Restful响应结果转换成Graphql通用结构"}]})})]}),e.jsxs(j,{bordered:!0,column:1,size:"small",className:le["descriptions-box"],children:[e.jsx(j.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(b,{id:"wsB6K4",defaultMessage:[{type:0,value:"状态码转换字段"}]}),e.jsx(ue,{overlay:e.jsx(b,{id:"eRt6us",defaultMessage:[{type:0,value:"根据Restful响应结果中的状态码字段的值判断该响应是否成功"}]})})]}),children:(u=s.customRest.responseExtractor)==null?void 0:u.statusCodeJsonpath}),e.jsx(j.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(b,{id:"C96wY8",defaultMessage:[{type:0,value:"正确状态码范围"}]}),e.jsx(ue,{overlay:e.jsx(b,{id:"hcvzK7",defaultMessage:[{type:0,value:"左闭右闭的状态码范围，如200~299，不设置默认200"}]})})]}),children:(l=s.customRest.responseExtractor)!=null&&l.statusCodeScopes?e.jsx("div",{className:"flex items-center space-x-4",children:(D=(d=s.customRest.responseExtractor)==null?void 0:d.statusCodeScopes)==null?void 0:D.map((o,n)=>e.jsxs(us,{color:"green",children:[o.min," ~ ",o.max]},n))}):200}),e.jsx(j.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(b,{id:"WVGni2",defaultMessage:[{type:0,value:"错误消息转换字段"}]}),e.jsx(ue,{overlay:e.jsx(b,{id:"Zn1HWG",defaultMessage:[{type:0,value:"根据Restful响应结果中的错误消息字段显示错误信息"}]})})]}),children:(O=s.customRest.responseExtractor)==null?void 0:O.errorMessageJsonpath})]})]})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"rounded-xl mb-4 py-6",children:e.jsxs(i,{form:S,name:"basic",labelCol:{span:5},wrapperCol:{span:11},onFinish:o=>T(o),onFinishFailed:H,autoComplete:"off",validateTrigger:["onBlur","onChange"],labelAlign:"right",className:"ml-3",initialValues:{...s,headers:Object.keys(s.customRest.headers||{}).map(o=>{const n=s.customRest.headers[o];return{key:o,...n.values[0]}})},children:[e.jsx(i.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:a.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]})}),e.jsx(P,{title:a.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]})})]}),rules:[{required:!0,message:a.formatMessage({id:"7nyFdZ",defaultMessage:[{type:0,value:"请输入名称"}]})},...f.name],name:"name",colon:!1,style:{marginBottom:"20px"},children:e.jsx(N,{readOnly:!!s.name,placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})})}),e.jsx(i.Item,{rules:[{required:!0,message:a.formatMessage({id:"1GUffX",defaultMessage:[{type:0,value:"请上传 OAS 文件"}]})}],label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:a.formatMessage({id:"jPMqvu",defaultMessage:[{type:0,value:"指定 OAS"}]})}),e.jsx(P,{title:a.formatMessage({id:"Bjvcv9",defaultMessage:[{type:0,value:"指定OAS"}]})})]}),colon:!1,name:["customRest","oasFilepath"],style:{marginBottom:"20px"},children:e.jsx(N,{placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]}),onClick:()=>E(!0),suffix:e.jsx("a",{onClick:()=>E(!0),children:a.formatMessage({id:"qVDSm2",defaultMessage:[{type:0,value:"浏览"}]})}),readOnly:!0})}),e.jsx(Te,{formItemProps:{label:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:a.formatMessage({id:"1Y05V3",defaultMessage:[{type:0,value:"Rest 端点"}]})}),e.jsx(P,{title:a.formatMessage({id:"1Y05V3",defaultMessage:[{type:0,value:"Rest 端点"}]})})]}),name:["customRest","baseUrl"],colon:!1,style:{marginBottom:"20px"}},required:!0,inputRender:o=>e.jsx(ps,{...o,options:q,filterOption:(n,p)=>!0,placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})})}),e.jsx("div",{className:"tabs-form",children:e.jsx(ce,{defaultActiveKey:"1",className:"ml-3",onChange:r,children:e.jsx(zs,{tab:a.formatMessage({id:"23wB4T",defaultMessage:[{type:0,value:"请求头"}]}),children:e.jsx(i.Item,{wrapperCol:{xs:{span:24},sm:{span:24}},children:e.jsx(i.List,{name:["headers"],children:(o,{add:n,remove:p},{errors:I})=>e.jsxs(e.Fragment,{children:[o.map((y,Q)=>{const Y=S.getFieldValue(["headers",y.name,"kind"]);return e.jsxs(ye,{align:"baseline",className:"w-full",children:[e.jsx(i.Item,{className:"w-52.5",wrapperCol:{span:24},name:[y.name,"key"],children:e.jsx(N,{})}),e.jsx(i.Item,{className:"w-40",wrapperCol:{span:24},name:[y.name,"kind"],children:e.jsxs(Z,{onChange:L,children:[e.jsx(ee,{value:0,children:e.jsxs("div",{className:"flex items-center",children:[ae(0),a.formatMessage({id:"zbqD5q",defaultMessage:[{type:0,value:"值"}]})]})}),e.jsx(ee,{value:1,children:e.jsxs("div",{className:"flex items-center",children:[ae(1),a.formatMessage({id:"txDRJz",defaultMessage:[{type:0,value:"环境变量"}]})]})}),e.jsx(ee,{value:2,children:e.jsxs("div",{className:"flex items-center",children:[ae(2),a.formatMessage({id:"6UDCIR",defaultMessage:[{type:0,value:"转发自客户端"}]})]})})]})}),e.jsx(i.Item,{className:"w-135",wrapperCol:{span:24},name:[y.name,Ae(Y)],children:Y!==1?e.jsx(N,{style:{width:"80%"},placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})}):e.jsx(Z,{className:"w-1/5",style:{width:"80%"},options:t,value:m,onChange:J})}),e.jsx("img",{alt:"guanbi",src:"./assets/iconfont/guanbi.svg",style:{height:"1em",width:"1em"},onClick:()=>p(Q)})]},y.key)}),e.jsxs(i.Item,{wrapperCol:{span:16},children:[e.jsx(M,{type:"dashed",onClick:()=>{g(!0),n({kind:0})},icon:e.jsx(Me,{}),className:"text-gray-500/60 w-1/1",children:a.formatMessage({id:"ZRU2jE",defaultMessage:[{type:0,value:"新增请求头信息"}]})}),e.jsx(i.ErrorList,{errors:I})]})]})})})},"1")})}),e.jsx(i.Item,{label:e.jsx("span",{className:"font-bold",children:e.jsx(b,{id:"7oHvWs",defaultMessage:[{type:0,value:"响应转换"}]})}),tooltip:a.formatMessage({id:"w/qIx8",defaultMessage:[{type:0,value:"将Restful响应结果转换成Graphql通用结构"}]})}),e.jsx(i.Item,{label:e.jsx(b,{id:"wsB6K4",defaultMessage:[{type:0,value:"状态码转换字段"}]}),tooltip:a.formatMessage({id:"eRt6us",defaultMessage:[{type:0,value:"根据Restful响应结果中的状态码字段的值判断该响应是否成功"}]}),name:["customRest","responseExtractor","statusCodeJsonpath"],children:e.jsx(N,{placeholder:"eg: code"})}),k&&e.jsx(i.Item,{label:e.jsx(b,{id:"C96wY8",defaultMessage:[{type:0,value:"正确状态码范围"}]}),tooltip:a.formatMessage({id:"hcvzK7",defaultMessage:[{type:0,value:"左闭右闭的状态码范围，如200~299，不设置默认200"}]}),children:e.jsx(i.List,{name:["customRest","responseExtractor","statusCodeScopes"],children:(o,{add:n,remove:p})=>e.jsxs(e.Fragment,{children:[o.map(I=>e.jsxs(ye,{children:[e.jsx(i.Item,{...I,name:[I.name,"min"],rules:[{required:!0,message:"请输入状态码最小值"}],children:e.jsx(be,{className:"!w-32",placeholder:"200"})}),e.jsx("div",{className:"mb-5",children:"~"}),e.jsx(i.Item,{...I,name:[I.name,"max"],rules:[{required:!0,message:"请输入状态码最大值"}],children:e.jsx(be,{className:"!w-32",placeholder:"299"})}),e.jsx(Ke,{className:"mb-5",onClick:()=>p(I.name)})]},I.key)),e.jsx("div",{children:e.jsx(M,{type:"dashed",onClick:()=>n(),icon:e.jsx(Me,{}),children:"Add"})})]})})}),e.jsx(i.Item,{label:e.jsx(b,{id:"WVGni2",defaultMessage:[{type:0,value:"错误消息转换字段"}]}),tooltip:a.formatMessage({id:"Zn1HWG",defaultMessage:[{type:0,value:"根据Restful响应结果中的错误消息字段显示错误信息"}]}),name:["customRest","responseExtractor","errorMessageJsonpath"],children:e.jsx(N,{placeholder:"eg: msg"})}),e.jsx(i.Item,{wrapperCol:{offset:3,span:16},children:e.jsxs("div",{className:"flex mt-10 w-160px justify-center items-center",children:[e.jsx(M,{className:"btn-cancel  ml-4",onClick:()=>{s.name?C("detail",s.name,s.sourceType):V("/workbench/data-source/new")},children:e.jsx("span",{children:a.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"取消"}]})})}),e.jsx(M,{className:"btn-save ml-4",onClick:()=>S.submit(),loading:W,children:s.name==""?a.formatMessage({id:"BtZh7z",defaultMessage:[{type:0,value:"创建"}]}):a.formatMessage({id:"b5l2vN",defaultMessage:[{type:0,value:"保存"}]})})]})})]})})})]})}function qs({content:s,type:h}){const a=te(),{ruleMap:v}=Fe(),f=fe(),V=me(),{handleSave:C,handleToggleDesigner:x}=c.useContext(re),[S,U]=K({}),[_,z]=K(!0),[g,q]=K(!1),[B,t]=K(!0),m=Ce(),[w,R]=K(""),[E,k]=K(!1),[A]=i.useForm(),{Option:G}=Z,J=/^https?:\/\/[-.\w\d:/]+$/i;c.useEffect(()=>{z(!s.customGraphql.schemaFilepath)},[h]),c.useEffect(()=>{A.resetFields()},[s,h]);const{loading:L,fun:W}=he(async l=>{let{headers:d,agreement:D,...O}=l;O={...s,...O},O.customGraphql.headers=we(d),s.name?await F.put("/datasource",O):await F.post("/datasource",O),C(O)},[s,C]),T=l=>{console.log("Failed:",l)},H=l=>{var d;switch(l){case"0":t(!0),U({pattern:/^.{1,2000}$/g,message:a.formatMessage({id:"mPmxv/",defaultMessage:[{type:0,value:"请输入长度不大于2000的非空值"}]})});return;case"1":t(!1),R(((d=m.at(0))==null?void 0:d.label)??"");return;case"2":t(!0),U({pattern:/^\w+$/g,message:a.formatMessage({id:"aUGOy3",defaultMessage:[{type:0,value:"请输入非空值"}]})});return;default:return}},ee=l=>{R(l)};async function r(){if(await A.validateFields()){const{agreement:l,headers:d,...D}=A.getFieldsValue(),O={...s,...D};O.customGraphql.headers=we(d),F.post("/datasource/checkConnection",O).then(()=>{$.success(a.formatMessage({id:"JDIfhr",defaultMessage:[{type:0,value:"连接成功"}]}))})}}const u=l=>{A.setFieldValue(["customGraphql","schemaFilepath"],l)};return s?e.jsxs(e.Fragment,{children:[h==="detail"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex mb-8 justify-center",children:e.jsxs(j,{bordered:!0,column:1,size:"small",labelStyle:{width:190},children:[e.jsx(j.Item,{label:e.jsx("div",{children:e.jsxs("span",{className:se["label-style"],children:[a.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]}),e.jsx(P,{title:a.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]})})]})}),className:"justify-start",children:s.name}),e.jsx(j.Item,{label:e.jsx("div",{children:e.jsxs("span",{className:se["label-style"],children:[a.formatMessage({id:"oyIdrj",defaultMessage:[{type:0,value:"Graphql 端点"}]}),e.jsx(P,{title:a.formatMessage({id:"oyIdrj",defaultMessage:[{type:0,value:"Graphql 端点"}]})})]})}),className:"justify-start",children:s.customGraphql.endpoint}),s.customGraphql.schemaFilepath?e.jsxs(j.Item,{label:e.jsx("div",{children:e.jsxs("span",{className:se["label-style"],children:[a.formatMessage({id:"CVx5RX",defaultMessage:[{type:0,value:"指定Schema"}]}),e.jsx(P,{title:a.formatMessage({id:"CVx5RX",defaultMessage:[{type:0,value:"指定Schema"}]})})]})}),className:"justify-start",children:[e.jsx("img",{className:"mr-1",alt:"wenjian1",src:"./assets/iconfont/wenjian1.svg",style:{height:"1em",width:"1em"}}),s.customGraphql.schemaFilepath]}):""]})}),e.jsx("div",{className:"tabs-form",children:e.jsx(ce,{defaultActiveKey:"1",items:[{key:"1",label:a.formatMessage({id:"23wB4T",defaultMessage:[{type:0,value:"请求头"}]}),children:e.jsx(j,{className:"mb-8",bordered:!0,column:1,size:"small",labelStyle:{width:190},children:Object.keys(s.customGraphql.headers??{}).map(l=>{const d=s.customGraphql.headers[l];return e.jsx(j.Item,{label:e.jsx("div",{children:e.jsxs("span",{className:se["label-style"],children:[l,e.jsx(P,{title:l})]})}),className:"justify-start",style:{wordBreak:"break-all"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-0px",children:ae(d.values[0].kind)}),e.jsx("div",{className:"flex-1 ml-2 min-w-0",children:oe(d.values[0])})]})},l)})})}]})})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"rounded-xl mb-4 py-6",children:[e.jsxs(i,{form:A,name:"basic",labelCol:{span:3},wrapperCol:{span:11},onFinish:l=>void W(l),onFinishFailed:T,autoComplete:"off",validateTrigger:["onBlur","onChange"],className:"ml-3",labelAlign:"right",initialValues:{...s,agreement:!s.customGraphql.schemaFilepath,headers:Object.keys(s.customGraphql.headers||{}).map(l=>{const d=s.customGraphql.headers[l];return{key:l,...d.values[0]}})},children:[e.jsx(i.Item,{label:e.jsx("div",{children:e.jsxs("span",{className:se["label-style"],children:[a.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]}),":",e.jsx(P,{title:a.formatMessage({id:"ekxzlF",defaultMessage:[{type:0,value:"名称"}]})})]})}),colon:!1,style:{marginBottom:"20px"},name:"name",rules:[{required:!0,message:a.formatMessage({id:"mfZMW6",defaultMessage:[{type:0,value:"名称不能为空"}]})},...v.name],children:e.jsx(N,{placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})})}),e.jsx(i.Item,{label:e.jsx("div",{children:e.jsxs("span",{className:se["label-style"],children:[a.formatMessage({id:"oyIdrj",defaultMessage:[{type:0,value:"Graphql 端点"}]}),":",e.jsx(P,{title:a.formatMessage({id:"oyIdrj",defaultMessage:[{type:0,value:"Graphql 端点"}]})})]})}),colon:!1,required:!0,rules:[{required:!0,message:a.formatMessage({id:"hF6ZoL",defaultMessage:[{type:0,value:"端点不能为空"}]})},{pattern:J,message:a.formatMessage({id:"io7fqu",defaultMessage:[{type:0,value:"请填写规范域名"}]})}],style:{marginBottom:"20px"},name:["customGraphql","endpoint"],children:e.jsx(N,{placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})})}),e.jsx(i.Item,{name:"agreement",label:" ",valuePropName:"checked",children:e.jsx(fs,{onChange:()=>{z(!_)},children:a.formatMessage({id:"jUwANU",defaultMessage:[{type:0,value:"通过发送指令,自动内省Schema"}]})})}),_?"":e.jsx(i.Item,{label:e.jsx("div",{children:e.jsxs("span",{className:se["label-style"],children:[a.formatMessage({id:"CVx5RX",defaultMessage:[{type:0,value:"指定Schema"}]}),":",e.jsx(P,{title:a.formatMessage({id:"CVx5RX",defaultMessage:[{type:0,value:"指定Schema"}]})})]})}),colon:!1,name:["customGraphql","schemaFilepath"],required:!0,style:{marginBottom:"48px"},children:e.jsx(N,{placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]}),onClick:()=>k(!0),suffix:e.jsx("a",{onClick:()=>k(!0),children:a.formatMessage({id:"qVDSm2",defaultMessage:[{type:0,value:"浏览"}]})}),readOnly:!0})}),e.jsx("div",{className:"tabs-form",children:e.jsx(ce,{defaultActiveKey:"1",className:"ml-3",children:e.jsx(ms,{tab:a.formatMessage({id:"23wB4T",defaultMessage:[{type:0,value:"请求头"}]}),children:e.jsx(i.Item,{wrapperCol:{xs:{span:24},sm:{span:24}},children:e.jsx(i.List,{name:["headers"],children:(l,{add:d,remove:D},{errors:O})=>e.jsxs(e.Fragment,{children:[l.map((o,n)=>{const p=A.getFieldValue(["headers",o.name,"kind"]);return e.jsxs(ye,{align:"baseline",className:"w-full",children:[e.jsx(i.Item,{className:"w-52.5",wrapperCol:{span:24},name:[o.name,"key"],children:e.jsx(N,{})}),e.jsx(i.Item,{className:"w-40",wrapperCol:{span:24},name:[o.name,"kind"],children:e.jsxs(Z,{onChange:H,children:[e.jsx(G,{value:0,children:e.jsxs("div",{className:"flex items-center",children:[ae(0),a.formatMessage({id:"zbqD5q",defaultMessage:[{type:0,value:"值"}]})]})}),e.jsx(G,{value:1,children:e.jsxs("div",{className:"flex items-center",children:[ae(1),a.formatMessage({id:"txDRJz",defaultMessage:[{type:0,value:"环境变量"}]})]})}),e.jsx(G,{value:2,children:e.jsxs("div",{className:"flex items-center",children:[ae(2),a.formatMessage({id:"6UDCIR",defaultMessage:[{type:0,value:"转发自客户端"}]})]})})]})}),e.jsx(i.Item,{className:"w-135",wrapperCol:{span:24},name:[o.name,Ae(p)],children:p!==1?e.jsx(N,{style:{width:"80%"},placeholder:a.formatMessage({id:"vr5TVT",defaultMessage:[{type:0,value:"请输入"}]})}):e.jsx(Z,{className:"w-1/5",style:{width:"80%"},options:m,value:w,onChange:ee})}),e.jsx("img",{alt:"guanbi",src:"./assets/iconfont/guanbi.svg",style:{height:"1em",width:"1em"},onClick:()=>D(n)})]},o.key)}),e.jsxs(i.Item,{wrapperCol:{span:16},children:[e.jsx(M,{type:"dashed",onClick:()=>{t(!0),d({kind:0})},icon:e.jsx(Me,{}),className:"text-gray-500/60 w-1/1",children:a.formatMessage({id:"ZRU2jE",defaultMessage:[{type:0,value:"新增请求头信息"}]})}),e.jsx(i.ErrorList,{errors:O})]})]})})})},"1")})})]}),e.jsx(i.Item,{wrapperCol:{offset:3,span:16},children:e.jsxs("div",{className:"flex mt-5 w-40 justify-center items-center",children:[e.jsx(M,{className:"btn-cancel ml-4",onClick:()=>{s.name?x("detail",s.name,s.sourceType):f("/workbench/data-source/new")},children:e.jsx("span",{children:a.formatMessage({id:"2QzYmY",defaultMessage:[{type:0,value:"取消"}]})})}),e.jsx(M,{className:"btn-test ml-4",onClick:()=>{r()},children:a.formatMessage({id:"mPsm6o",defaultMessage:[{type:0,value:"测试"}]})}),e.jsx(M,{loading:L,className:"btn-save ml-4",onClick:()=>{A.submit()},children:s.name==""?a.formatMessage({id:"BtZh7z",defaultMessage:[{type:0,value:"创建"}]}):a.formatMessage({id:"b5l2vN",defaultMessage:[{type:0,value:"保存"}]})})]})})]})}),e.jsx(pe,{className:se.modal,title:null,footer:null,open:E,onOk:()=>k(!1),onCancel:()=>k(!1),width:920,destroyOnClose:!0,children:e.jsx(Ie,{dir:V.graphql,setUploadPath:u,setVisible:k,beforeUpload:l=>{console.log(l.name);const d=l.name.endsWith(".graphql");return d||$.error(a.formatMessage({id:"CP8WcX",defaultMessage:[{type:0,value:"只允许上传 graphql 格式文件"}]})),d||xe.LIST_IGNORE}})}),e.jsx(pe,{title:"GraphiQL",open:g,onOk:()=>q(!1),onCancel:()=>q(!1),footer:null,centered:!0,bodyStyle:{height:"90vh"},width:"90vw"})]}):e.jsx(ge,{})}const Es=({content:s,type:h,actionRef:a})=>{const v=me(),f=te(),V=c.useRef(!1),C=c.useRef(null),x=c.useRef(""),[S,U]=c.useState(!0),_=()=>{V.current=!1,F.get(`/vscode/readFile?uri=${v.prisma}/${s.customDatabase.databaseUrl.staticVariableContent}`,{ignoreError:!0}).then(t=>{var m;x.current=t,(m=C.current)==null||m.setValue(t)}).catch(()=>{var t;x.current="",(t=C.current)==null||t.setValue("")}).then(()=>{V.current=!0})};c.useEffect(()=>{var t,m;(m=(t=s.customDatabase)==null?void 0:t.databaseUrl)!=null&&m.staticVariableContent&&_()},[s.customDatabase.databaseUrl.staticVariableContent,v.prisma]);const z=async()=>{if(!x.current)return $.error(f.formatMessage({id:"WMHDz5",defaultMessage:[{type:0,value:"Prisma 数据源文件不能为空"}]}));try{return await F.post(`/datasource/prisma/${s.name}`,x.current),$.success(f.formatMessage({id:"2t41Pv",defaultMessage:[{type:0,value:"已保存"}]})),!0}catch{return!1}},g=async()=>{var m;const t=await F.get(`/datasource/prisma/${s.name}`);x.current=t,(m=C.current)==null||m.setValue(t)},q=async()=>{F.post("/datasource/checkConnection",{...s,prismaSchema:x.current}).then(()=>{$.success(f.formatMessage({id:"JDIfhr",defaultMessage:[{type:0,value:"连接成功"}]}))})};return a&&(a.current={save:z,test:q,introspection:g}),c.useMemo(()=>e.jsx(hs,{actionRef:C,onUpdateValidate:U,onChange:t=>{V.current&&(x.current=t)},defaultContent:"",onReady:()=>{var t;x.current&&((t=C.current)==null||t.setValue(x.current))}}),[])},Us=Es;function Ps({content:s,showType:h}){var A,G,J,L,W;const{handleSave:a}=c.useContext(re),v=te(),f=me(),{mutate:V}=Xe(),{vscode:C}=c.useContext(ts),{handleToggleDesigner:x}=c.useContext(re),S=De("/sdk/enabledServer",F),[U,_]=Je.useState(!1),z=c.useRef(null),g=fe(),{loading:q,fun:B}=he(async()=>{s&&(await F.put("/datasource",{name:s.name,enabled:!s.enabled}),a({enabled:!s.enabled}))},[s]);if(!s)return null;const t=ss(s),m=()=>{F.post("/datasource/checkConnection",s).then(()=>{$.success(v.formatMessage({id:"JDIfhr",defaultMessage:[{type:0,value:"连接成功"}]}))})},w=async T=>{if(!T.match(/^\w[a-zA-Z0-9_]*$/)){$.error(v.formatMessage({id:"0o/d0Y",defaultMessage:[{type:0,value:"请输入字母、数字或下划线"}]}));return}await F.post("/datasource/rename",{src:s.name,dst:T,overload:!1}),es(),_(!1),await V(["/datasource",s.name]),g(`/workbench/data-source/${T}`)},R=as(s),E=s.kind===X.Graphql&&s.customGraphql&&s.customGraphql.customized,k=e.jsx(M,{className:"btn-test !ml-4",onClick:()=>{g(`/workbench/modeling/${s==null?void 0:s.name}`)},children:e.jsx(b,{id:"esvors",defaultMessage:[{type:0,value:"设计"}]})});return e.jsxs("div",{className:"flex flex-col h-full common-form items-stretch justify-items-stretch",children:[" ",e.jsxs("div",{className:"bg-white flex flex-0 h-54px pl-11 items-center",style:{borderBottom:"1px solid rgba(95,98,105,0.1)"},children:[h==="setting"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cursor-pointer flex bg-[#F9F9F9FF] mr-6 py-0.5 px-2 items-center justify-evenly",onClick:()=>x("detail"),children:[e.jsx(ie,{width:12,height:7,src:"./assets/back.svg",alt:"返回",preview:!1}),e.jsx("span",{className:"ml-1",children:e.jsx(b,{id:"NGs9sO",defaultMessage:[{type:0,value:"返回"}]})})]}),e.jsx("div",{className:"font-medium",children:e.jsx(b,{id:"aUe2XA",defaultMessage:[{type:0,value:"高级设置"}]})})]}):e.jsxs(e.Fragment,{children:[s.name?"":e.jsx("div",{className:"cursor-pointer flex h-5 mr-1 w-5 items-center justify-center",onClick:()=>g(-1),children:e.jsx(ie,{style:{transform:"rotate(90deg)"},width:12,height:12,src:ys,alt:"返回",preview:!1})}),e.jsx("img",{className:"h-14px mr-1.5 w-14px",src:t,alt:"数据源"}),h==="detail"?U?e.jsx(N,{onBlur:T=>w(T.target.value),onPressEnter:T=>w(T.target.value),style:{width:"200px"},defaultValue:s==null?void 0:s.name,autoFocus:!0,placeholder:v.formatMessage({id:"8AtCIp",defaultMessage:[{type:0,value:"请输入数据源名"}]})}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-ellipsis max-w-200px overflow-hidden",title:s==null?void 0:s.name,children:s==null?void 0:s.name}),!s.readonly&&!((A=s.customGraphql)!=null&&A.customized)&&e.jsx("span",{onClick:()=>_(!0),className:"cursor-pointer ml-3",children:e.jsx("img",{alt:"bianji",src:"./assets/iconfont/bianji.svg",style:{height:"1em",width:"1em"}})})]}):(s==null?void 0:s.name)||v.formatMessage({id:"UmVV8s",defaultMessage:[{type:0,value:"新建数据源"}]})]}),e.jsx("div",{className:"flex-1"}),h==="detail"?e.jsxs(e.Fragment,{children:[!((G=s.customGraphql)!=null&&G.customized)&&e.jsx(ke,{disabled:s.readonly,loading:q,checked:s==null?void 0:s.enabled,checkedChildren:v.formatMessage({id:"ZUPzqr",defaultMessage:[{type:0,value:"开启"}]}),unCheckedChildren:v.formatMessage({id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]}),onChange:B,className:"!mr-4"}),R&&(s.enabled?k:e.jsx(Ne,{title:e.jsx(b,{id:"Io9vWO",defaultMessage:[{type:0,value:"请先开启数据源"}]}),children:e.jsx("span",{children:k})})),E?s.customGraphql.customized?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"btn-save !ml-4",onClick:m,children:e.jsx(b,{id:"mPsm6o",defaultMessage:[{type:0,value:"测试"}]})}),e.jsx(M,{className:"btn-save !ml-4 mr-11",onClick:()=>{var T;return C.show(`${f.customize}/${s.name}${(T=S.data)==null?void 0:T.extension}`)},disabled:s.readonly,children:e.jsx(b,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]})})]}):e.jsx(e.Fragment,{}):s.kind===X.Prisma?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"btn-save !ml-4",onClick:(J=z.current)==null?void 0:J.test,disabled:s.readonly,children:e.jsx(b,{id:"mPsm6o",defaultMessage:[{type:0,value:"测试"}]})}),e.jsx(M,{className:"ml-4",ghost:!0,danger:!0,disabled:!s.enabled,onClick:(L=z.current)==null?void 0:L.introspection,children:e.jsx(b,{id:"28CgNL",defaultMessage:[{type:0,value:"内省"}]})}),e.jsx(M,{className:"btn-save !ml-4 mr-11",onClick:(W=z.current)==null?void 0:W.save,children:e.jsx(b,{id:"b5l2vN",defaultMessage:[{type:0,value:"保存"}]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"btn-save !ml-4",onClick:m,disabled:s.readonly,children:e.jsx(b,{id:"mPsm6o",defaultMessage:[{type:0,value:"测试"}]})}),e.jsx(M,{className:"btn-save !ml-4 mr-11",onClick:()=>x("form"),disabled:s.readonly,children:e.jsx(b,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]})})]})]}):null]}),e.jsx("div",{className:"bg-white  flex-1 mx-3 mt-3 min-h-0 px-8 pt-5 overflow-y-auto",style:{border:"1px solid rgba(95,98,105,0.1)",borderBottom:"none",borderRadius:"4px 4px 0 0"},children:s.kind===X.Prisma?e.jsx(Us,{content:s,type:h,actionRef:z}):R?e.jsx(Ds,{content:s,type:h}):s.kind===X.Restful?e.jsx(Os,{content:s,type:h}):s.kind===X.Graphql?s.customGraphql.customized?e.jsx(Ms,{content:s}):e.jsx(qs,{content:s,type:h}):e.jsx(e.Fragment,{})})]})}function Pa(){const{showType:s,content:h}=c.useContext(re);return e.jsx(Ps,{showType:s,content:h})}export{Pa as default};
