import{r as g,aA as J,l as V,u as ee,j as a,Q as c,k as B,a6 as te,a0 as ie,$ as se,M as ae,a7 as re,K as oe}from"./index-85bb8031.js";import{u as Q,Q as S}from"./workbench-83d7cf53.js";import{g as ne}from"./datasource-50247cd6.js";import{E as $}from"./index-b3ff9150.js";import"./dayjs.min-5495be60.js";import"./use-immer.module-b1dfddaf.js";import"./globalContext-c31891b2.js";import"./workbenchContext-7962b30b.js";import"./interface-41bd3122.js";import"./engine-c7e5841f.js";import"./db-ed05e835.js";import"./index-5857d219.js";import"./variable-144a75bf.js";import"./common-7ac8785d.js";import"./auth-8ea2ddcf.js";import"./hotkey-3a258436.js";import"./index-a66fc756.js";import"./PurePanel-25c62dc8.js";import"./index-90ed7434.js";import"./PrismaSchemaContext-02f12971.js";import"./index-9749e2b6.js";import"./LeftOutlined-7ceb1db4.js";import"./index-79ebc17f.js";import"./index-ac112fba.js";import"./useShowArrow-54ebbb87.js";import"./DownOutlined-844f57b8.js";import"./conductUtil-09d91ceb.js";import"./index-cdb771f1.js";import"./validate-904668ce.js";import"./store-e605fef9.js";import"./parser-cf485565.js";import"./index-92948ccf.js";import"./index-1f66e1b5.js";import"./addEventListener-23b0fde6.js";import"./index-8375a6c3.js";import"./index-66168e0d.js";import"./index-f4dd4804.js";import"./WarningOutlined-3c8a6739.js";import"./index-fd877240.js";import"./calcTime-9776a66f.js";import"./index-9649d007.js";import"./utils-9b986f1e.js";import"./ServiceDiscovery-94517c32.js";import"./CopyOutlined-c11c973b.js";import"./index-4129e33c.js";var he=globalThis&&globalThis.__extends||function(){var s=function(o,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},s(o,t)};return function(o,t){s(o,t);function e(){this.constructor=o}o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(s){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(s[r]=o[r])}return s},f.apply(this,arguments)},I={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},q={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},A={width:"20px",height:"20px",position:"absolute"},le={top:f(f({},I),{top:"-5px"}),right:f(f({},q),{left:void 0,right:"-5px"}),bottom:f(f({},I),{top:void 0,bottom:"-5px"}),left:f(f({},q),{left:"-5px"}),topRight:f(f({},A),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:f(f({},A),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:f(f({},A),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:f(f({},A),{left:"-10px",top:"-10px",cursor:"nw-resize"})},pe=function(s){he(o,s);function o(){var t=s!==null&&s.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return o.prototype.render=function(){return g.createElement("div",{className:this.props.className||"",style:f(f({position:"absolute",userSelect:"none"},le[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},o}(g.PureComponent),de=globalThis&&globalThis.__extends||function(){var s=function(o,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},s(o,t)};return function(o,t){s(o,t);function e(){this.constructor=o}o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),j=globalThis&&globalThis.__assign||function(){return j=Object.assign||function(s){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(s[r]=o[r])}return s},j.apply(this,arguments)},ce={width:"auto",height:"auto"},T=function(s,o,t){return Math.max(Math.min(s,t),o)},G=function(s,o){return Math.round(s/o)*o},N=function(s,o){return new RegExp(s,"i").test(o)},P=function(s){return!!(s.touches&&s.touches.length)},ue=function(s){return!!((s.clientX||s.clientX===0)&&(s.clientY||s.clientY===0))},X=function(s,o,t){t===void 0&&(t=0);var e=o.reduce(function(i,h,l){return Math.abs(h-s)<Math.abs(o[i]-s)?l:i},0),r=Math.abs(o[e]-s);return t===0||r<t?o[e]:s},H=function(s){return s=s.toString(),s==="auto"||s.endsWith("px")||s.endsWith("%")||s.endsWith("vh")||s.endsWith("vw")||s.endsWith("vmax")||s.endsWith("vmin")?s:s+"px"},F=function(s,o,t,e){if(s&&typeof s=="string"){if(s.endsWith("px"))return Number(s.replace("px",""));if(s.endsWith("%")){var r=Number(s.replace("%",""))/100;return o*r}if(s.endsWith("vw")){var r=Number(s.replace("vw",""))/100;return t*r}if(s.endsWith("vh")){var r=Number(s.replace("vh",""))/100;return e*r}}return s},fe=function(s,o,t,e,r,i,h){return e=F(e,s.width,o,t),r=F(r,s.height,o,t),i=F(i,s.width,o,t),h=F(h,s.height,o,t),{maxWidth:typeof e>"u"?void 0:Number(e),maxHeight:typeof r>"u"?void 0:Number(r),minWidth:typeof i>"u"?void 0:Number(i),minHeight:typeof h>"u"?void 0:Number(h)}},ge=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Y="__resizable_base__",ve=function(s){de(o,s);function o(t){var e=s.call(this,t)||this;return e.ratio=1,e.resizable=null,e.parentLeft=0,e.parentTop=0,e.resizableLeft=0,e.resizableRight=0,e.resizableTop=0,e.resizableBottom=0,e.targetLeft=0,e.targetTop=0,e.appendBase=function(){if(!e.resizable||!e.window)return null;var r=e.parentNode;if(!r)return null;var i=e.window.document.createElement("div");return i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.transform="scale(0, 0)",i.style.left="0",i.style.flex="0 0 100%",i.classList?i.classList.add(Y):i.className+=Y,r.appendChild(i),i},e.removeBase=function(r){var i=e.parentNode;i&&i.removeChild(r)},e.ref=function(r){r&&(e.resizable=r)},e.state={isResizing:!1,width:typeof(e.propsSize&&e.propsSize.width)>"u"?"auto":e.propsSize&&e.propsSize.width,height:typeof(e.propsSize&&e.propsSize.height)>"u"?"auto":e.propsSize&&e.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},e.onResizeStart=e.onResizeStart.bind(e),e.onMouseMove=e.onMouseMove.bind(e),e.onMouseUp=e.onMouseUp.bind(e),e}return Object.defineProperty(o.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||ce},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){var t=0,e=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,i=this.resizable.offsetHeight,h=this.resizable.style.position;h!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:r,e=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:i,this.resizable.style.position=h}return{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sizeStyle",{get:function(){var t=this,e=this.props.size,r=function(l){if(typeof t.state[l]>"u"||t.state[l]==="auto")return"auto";if(t.propsSize&&t.propsSize[l]&&t.propsSize[l].toString().endsWith("%")){if(t.state[l].toString().endsWith("%"))return t.state[l].toString();var n=t.getParentSize(),d=Number(t.state[l].toString().replace("px","")),p=d/n[l]*100;return p+"%"}return H(t.state[l])},i=e&&typeof e.width<"u"&&!this.state.isResizing?H(e.width):r("width"),h=e&&typeof e.height<"u"&&!this.state.isResizing?H(e.height):r("height");return{width:i,height:h}},enumerable:!1,configurable:!0}),o.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var e=!1,r=this.parentNode.style.flexWrap;r!=="wrap"&&(e=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var i={width:t.offsetWidth,height:t.offsetHeight};return e&&(this.parentNode.style.flexWrap=r),this.removeBase(t),i},o.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},o.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},o.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},o.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},o.prototype.createSizeForCssProperty=function(t,e){var r=this.propsSize&&this.propsSize[e];return this.state[e]==="auto"&&this.state.original[e]===t&&(typeof r>"u"||r==="auto")?"auto":t},o.prototype.calculateNewMaxFromBoundary=function(t,e){var r=this.props.boundsByDirection,i=this.state.direction,h=r&&N("left",i),l=r&&N("top",i),n,d;if(this.props.bounds==="parent"){var p=this.parentNode;p&&(n=h?this.resizableRight-this.parentLeft:p.offsetWidth+(this.parentLeft-this.resizableLeft),d=l?this.resizableBottom-this.parentTop:p.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(n=h?this.resizableRight:this.window.innerWidth-this.resizableLeft,d=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=h?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),d=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(t=t&&t<n?t:n),d&&Number.isFinite(d)&&(e=e&&e<d?e:d),{maxWidth:t,maxHeight:e}},o.prototype.calculateNewSizeFromDirection=function(t,e){var r=this.props.scale||1,i=this.props.resizeRatio||1,h=this.state,l=h.direction,n=h.original,d=this.props,p=d.lockAspectRatio,u=d.lockAspectRatioExtraHeight,R=d.lockAspectRatioExtraWidth,y=n.width,v=n.height,b=u||0,z=R||0;return N("right",l)&&(y=n.width+(t-n.x)*i/r,p&&(v=(y-z)/this.ratio+b)),N("left",l)&&(y=n.width-(t-n.x)*i/r,p&&(v=(y-z)/this.ratio+b)),N("bottom",l)&&(v=n.height+(e-n.y)*i/r,p&&(y=(v-b)*this.ratio+z)),N("top",l)&&(v=n.height-(e-n.y)*i/r,p&&(y=(v-b)*this.ratio+z)),{newWidth:y,newHeight:v}},o.prototype.calculateNewSizeFromAspectRatio=function(t,e,r,i){var h=this.props,l=h.lockAspectRatio,n=h.lockAspectRatioExtraHeight,d=h.lockAspectRatioExtraWidth,p=typeof i.width>"u"?10:i.width,u=typeof r.width>"u"||r.width<0?t:r.width,R=typeof i.height>"u"?10:i.height,y=typeof r.height>"u"||r.height<0?e:r.height,v=n||0,b=d||0;if(l){var z=(R-v)*this.ratio+b,M=(y-v)*this.ratio+b,E=(p-b)/this.ratio+v,m=(u-b)/this.ratio+v,w=Math.max(p,z),W=Math.min(u,M),C=Math.max(R,E),L=Math.min(y,m);t=T(t,w,W),e=T(e,C,L)}else t=T(t,p,u),e=T(e,R,y);return{newWidth:t,newHeight:e}},o.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var t=this.parentNode;if(t){var e=t.getBoundingClientRect();this.parentLeft=e.left,this.parentTop=e.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var r=this.props.bounds.getBoundingClientRect();this.targetLeft=r.left,this.targetTop=r.top}if(this.resizable){var i=this.resizable.getBoundingClientRect(),h=i.left,l=i.top,n=i.right,d=i.bottom;this.resizableLeft=h,this.resizableRight=n,this.resizableTop=l,this.resizableBottom=d}},o.prototype.onResizeStart=function(t,e){if(!(!this.resizable||!this.window)){var r=0,i=0;if(t.nativeEvent&&ue(t.nativeEvent)?(r=t.nativeEvent.clientX,i=t.nativeEvent.clientY):t.nativeEvent&&P(t.nativeEvent)&&(r=t.nativeEvent.touches[0].clientX,i=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var h=this.props.onResizeStart(t,e,this.resizable);if(h===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,n=this.window.getComputedStyle(this.resizable);if(n.flexBasis!=="auto"){var d=this.parentNode;if(d){var p=this.window.getComputedStyle(d).flexDirection;this.flexDir=p.startsWith("row")?"row":"column",l=n.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var u={original:{x:r,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:j(j({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:e,flexBasis:l};this.setState(u)}},o.prototype.onMouseMove=function(t){var e=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&P(t))try{t.preventDefault(),t.stopPropagation()}catch{}var r=this.props,i=r.maxWidth,h=r.maxHeight,l=r.minWidth,n=r.minHeight,d=P(t)?t.touches[0].clientX:t.clientX,p=P(t)?t.touches[0].clientY:t.clientY,u=this.state,R=u.direction,y=u.original,v=u.width,b=u.height,z=this.getParentSize(),M=fe(z,this.window.innerWidth,this.window.innerHeight,i,h,l,n);i=M.maxWidth,h=M.maxHeight,l=M.minWidth,n=M.minHeight;var E=this.calculateNewSizeFromDirection(d,p),m=E.newHeight,w=E.newWidth,W=this.calculateNewMaxFromBoundary(i,h);this.props.snap&&this.props.snap.x&&(w=X(w,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(m=X(m,this.props.snap.y,this.props.snapGap));var C=this.calculateNewSizeFromAspectRatio(w,m,{width:W.maxWidth,height:W.maxHeight},{width:l,height:n});if(w=C.newWidth,m=C.newHeight,this.props.grid){var L=G(w,this.props.grid[0]),K=G(m,this.props.grid[1]),k=this.props.snapGap||0;w=k===0||Math.abs(L-w)<=k?L:w,m=k===0||Math.abs(K-m)<=k?K:m}var Z={width:w-y.width,height:m-y.height};if(v&&typeof v=="string"){if(v.endsWith("%")){var D=w/z.width*100;w=D+"%"}else if(v.endsWith("vw")){var O=w/this.window.innerWidth*100;w=O+"vw"}else if(v.endsWith("vh")){var U=w/this.window.innerHeight*100;w=U+"vh"}}if(b&&typeof b=="string"){if(b.endsWith("%")){var D=m/z.height*100;m=D+"%"}else if(b.endsWith("vw")){var O=m/this.window.innerWidth*100;m=O+"vw"}else if(b.endsWith("vh")){var U=m/this.window.innerHeight*100;m=U+"vh"}}var _={width:this.createSizeForCssProperty(w,"width"),height:this.createSizeForCssProperty(m,"height")};this.flexDir==="row"?_.flexBasis=_.width:this.flexDir==="column"&&(_.flexBasis=_.height),J.flushSync(function(){e.setState(_)}),this.props.onResize&&this.props.onResize(t,R,this.resizable,Z)}},o.prototype.onMouseUp=function(t){var e=this.state,r=e.isResizing,i=e.direction,h=e.original;if(!(!r||!this.resizable)){var l={width:this.size.width-h.width,height:this.size.height-h.height};this.props.onResizeStop&&this.props.onResizeStop(t,i,this.resizable,l),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:j(j({},this.state.backgroundStyle),{cursor:"auto"})})}},o.prototype.updateSize=function(t){this.setState({width:t.width,height:t.height})},o.prototype.renderResizer=function(){var t=this,e=this.props,r=e.enable,i=e.handleStyles,h=e.handleClasses,l=e.handleWrapperStyle,n=e.handleWrapperClass,d=e.handleComponent;if(!r)return null;var p=Object.keys(r).map(function(u){return r[u]!==!1?g.createElement(pe,{key:u,direction:u,onResizeStart:t.onResizeStart,replaceStyles:i&&i[u],className:h&&h[u]},d&&d[u]?d[u]:null):null});return g.createElement("div",{className:n,style:l},p)},o.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce(function(h,l){return ge.indexOf(l)!==-1||(h[l]=t.props[l]),h},{}),r=j(j(j({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(r.flexBasis=this.state.flexBasis);var i=this.props.as||"div";return g.createElement(i,j({ref:this.ref,style:r,className:this.props.className},e),this.state.isResizing&&g.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},o.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},o}(g.PureComponent);const me="_block_tmwd5_1",we="_line_tmwd5_8",be="_icon_tmwd5_16",xe="_name_tmwd5_21",ye="_desc_tmwd5_26",ze="_action_tmwd5_38",x={block:me,line:we,icon:be,name:xe,desc:ye,action:ze};function je(){const[s,o]=g.useState([]),{questions:t}=Q(n=>({questions:n.questions,setQuestions:n.setQuestions}));g.useEffect(()=>{const n=V.groupBy(t,"model"),d=Object.keys(n).map(p=>({key:p,list:n[p].map(u=>(p===S.DataSource?u.icon=ne(u.extra):p===S.Authentication?u.icon="./assets/icon/oidc.svg":(S.Storage,u.icon="./assets/icon/file.svg"),u))}));o(d)},[t]);const e=ee();async function r(n){await B.put("/datasource",{name:n,enabled:!1}),te()}async function i(n){await B.put("/operation",{path:n,enabled:!1}),ie.emit({event:"apiEnableChange",data:{pathList:[n],enabled:!1}}),se()}async function h(n){await B.put("/authentication",{name:n,enabled:!1}),ae()}async function l(n){await B.put("/storage",{name:n,enabled:!1}),re()}return a.jsxs("div",{children:[!s.length&&a.jsx($,{className:"pt-2",image:$.PRESENTED_IMAGE_SIMPLE,description:a.jsx(c,{id:"LwwUFT",defaultMessage:[{type:0,value:"暂无问题"}]})}),s.map((n,d)=>a.jsx("div",{className:x.block,children:n.list.map(p=>a.jsxs("div",{className:x.line,children:[a.jsx("img",{src:p.icon,className:x.icon,alt:""}),a.jsx("div",{className:x.name,children:p.name}),a.jsxs("div",{className:x.desc,children:[a.jsx("span",{children:p.msg}),n.key==S.DataSource&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:x.action,onClick:()=>e(`/workbench/data-source/${p.name}`),children:a.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(c,{id:"3+qPlN",defaultMessage:[{type:0,value:"排查, 或"}]}),a.jsx("span",{className:x.action,onClick:()=>r(p.name),children:a.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(c,{id:"z487Zy",defaultMessage:[{type:0,value:"该数据源"}]})]})}),n.key==S.Operation&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:x.action,onClick:()=>e(`/workbench/apimanage/${p.name}`),children:a.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),p.enabled&&a.jsxs(a.Fragment,{children:[", ",a.jsx(c,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),a.jsx("span",{className:x.action,onClick:()=>i(p.name),children:a.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(c,{id:"f5XT1C",defaultMessage:[{type:0,value:"该API"}]})]})]})}),n.key==S.Authentication&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:x.action,onClick:()=>e(`/workbench/auth/${p.name}`),children:a.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),p.enabled&&a.jsxs(a.Fragment,{children:[", ",a.jsx(c,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),a.jsx("span",{className:x.action,onClick:()=>h(p.name),children:a.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(c,{id:"Ytievw",defaultMessage:[{type:0,value:"该验证器"}]})]})]})}),n.key==S.Storage&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:x.action,onClick:()=>e(`/workbench/storage/${p.name}`),children:a.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),p.enabled&&a.jsxs(a.Fragment,{children:[", ",a.jsx(c,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),a.jsx("span",{className:x.action,onClick:()=>l(p.name),children:a.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(c,{id:"n8v1qP",defaultMessage:[{type:0,value:"该对象存储"}]})]})]})}),n.key===S.Storage&&a.jsx(a.Fragment,{children:a.jsxs("span",{children:[", ",a.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),a.jsx("span",{className:x.action,onClick:()=>e(`/workbench/storage/${p.name}`),children:a.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),a.jsx(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),p.enabled&&a.jsxs(a.Fragment,{children:[", ",a.jsx(c,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),a.jsx("span",{className:x.action,onClick:()=>l(p.name),children:a.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),a.jsx(c,{id:"n8v1qP",defaultMessage:[{type:0,value:"该对象存储"}]})]})]})})]})]},p.name))},d))]})}const Se=({actionRef:s})=>{const o=g.useRef(null),t=g.useRef(null),{logs:e,setLogs:r}=Q(i=>({logs:i.logs,setLogs:i.setLogs}));return g.useEffect(()=>{s&&(s.current={clearLogs(){r([])},downloadLogs(){const i=new File([e.map(n=>JSON.stringify(n)).join(`
`)],"logs.txt",{type:"text/plain"}),h=document.createElement("a"),l=URL.createObjectURL(i);h.href=l,h.download=i.name,document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(l)}}),t.current&&(t.current.scrollTop=1e10)},[s,e]),a.jsx("div",{className:"flex flex-1 w-full h-full overflow-hidden",children:a.jsxs("div",{className:"h-full mb-0 w-10/10 overflow-auto",ref:t,children:[e.map((i,h)=>a.jsxs("div",{className:"font-normal text-xs text-[#333333] leading-25px hover:bg-gray-100",children:[a.jsx("span",{className:"mr-8",children:i.time})," ",a.jsx("span",{className:"mr-1 w-100",style:{color:{INFO:"blue",WARN:"#ffae00",ERROR:"magenta",DPANIC:"red",PANIC:"red",FATAL:"red",DEBUG:"red"}[i.level]||"#333"},children:i.level})," ",a.jsx("span",{style:{whiteSpace:"pre-line"},children:i.msg})]},h)),a.jsx("div",{ref:o})]})})},Re="_active_1cb5p_1",Me="_divider_1cb5p_17",Ne={active:Re,divider:Me},_e=s=>{const[o,t]=g.useState(s.activeKey??s.tabs[0].key),e=g.useCallback(i=>{var h;t(i),(h=s.onTabClick)==null||h.call(s,i)},[s]),r=g.useCallback(i=>s.activeKey?s.activeKey===i:o===i,[s.activeKey,o]);return a.jsx("div",{className:s.className,children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("div",{className:"flex space-x-6",children:s.tabs.map(i=>a.jsx("div",{className:`text-[#252B3A]  cursor-pointer leading-20px ${r(i.key)?Ne.active:""}`,onClick:()=>e(i.key),children:i.title},i.key))}),s.extra]})})},yt=({style:s,toggleWindow:o,defaultTab:t})=>{var d;const e=oe(),r=g.useMemo(()=>[{title:e.formatMessage({id:"608d8o",defaultMessage:[{type:0,value:"日志"}]}),key:"0"},{title:e.formatMessage({id:"gpEzjP",defaultMessage:[{type:0,value:"问题"}]}),key:"1"}],[e]),[i,h]=g.useState(t??"0"),l=g.useRef();g.useRef();const n=a.jsxs("div",{className:"cursor-pointer flex justify-end",children:[a.jsx("div",{onClick:()=>{var p;return(p=l.current)==null?void 0:p.clearLogs()},children:a.jsx("img",{src:"./assets/clear.svg",height:20,width:20,alt:"清空"})}),a.jsx("div",{className:"ml-4",onClick:(d=l.current)==null?void 0:d.downloadLogs,children:a.jsx("img",{src:"./assets/download2.svg",height:20,width:20,alt:"下载"})}),a.jsx("div",{className:"ml-4",onClick:o,children:a.jsx("img",{src:"./assets/close2.svg",height:20,width:20,alt:"关闭"})})]});return a.jsx("div",{className:"bg-[#fff] border-gray-500/50 min-h-80px px-7 pb-5 bottom-36px z-1200  absolute",style:{borderTop:"1px solid #EFEFEFFF",borderRadius:"12px 12px 0 0",overflow:"hidden",...s},children:a.jsxs(ve,{className:"flex flex-col h-full pt-2.5",defaultSize:{width:"100%",height:348},minWidth:"100%",maxWidth:"100%",enable:{top:!0},children:[a.jsx(_e,{tabs:r,onTabClick:h,activeKey:i,extra:n,className:"pb-2.5"}),a.jsxs("div",{className:`w-full overflow-auto ${i==="0"?"":"hidden"}`,children:[a.jsx(Se,{actionRef:l})," "]}),a.jsx("div",{className:`w-full overflow-auto ${i==="1"?"":"hidden"}`,children:a.jsx(je,{})})]})})};export{yt as default};
