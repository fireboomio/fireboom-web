import{C as f}from"./codemirror.es-e193deea.js";import{f as j}from"./forEachState.es-1e367fb2.js";import"./index-0cf8dcc1.js";import"./index-2eb05974.js";import{t as g,R as b,M as N,N as y,v as O,r as D}from"./store-cf1adf45.js";import"./interface-41bd3122.js";import"./engine-50a4074b.js";import"./workbenchContext-2b7a0075.js";import"./index-a78d52d2.js";import"./lock-106bb4c4.js";import"./variable-b69d08ee.js";import"./common-7ac8785d.js";import"./hotkey-3a258436.js";import"./parser-0b83345b.js";import"./Breadcrumb-52a9b0cb.js";import"./DownOutlined-374f1d77.js";import"./index-06504f03.js";import"./LeftOutlined-91dc5901.js";import"./PurePanel-327833dd.js";import"./index-a5647e9f.js";import"./index-5b35cc76.js";import"./EditFilled-5715b2b4.js";import"./index-f6e114c7.js";import"./index-09c103b6.js";import"./index-bd62ba05.js";import"./useShowArrow-f9335512.js";import"./index-0484401a.js";import"./main-7459389b.js";import"./toNumber-e4714f89.js";import"./utils-9cc409ea.js";import"./dayjs.min-3019ccb5.js";import"./utils-9b986f1e.js";import"./DeleteOutlined-a02e45e1.js";import"./index-a38c0e65.js";import"./index-57c9a052.js";import"./index-3320778c.js";import"./index-b93aa7bc.js";import"./index-574a9cc5.js";import"./PlusOutlined-c5dd3421.js";import"./index-232ab716.js";import"./index-6b4188b6.js";import"./index-1e97c44b.js";import"./globalContext-d610aedc.js";var M=Object.defineProperty,m=(n,i)=>M(n,"name",{value:i,configurable:!0});function c(n,i,e){const r=x(e,d(i.string));if(!r)return;const t=i.type!==null&&/"|\w/.test(i.string[0])?i.start:i.end;return{list:r,from:{line:n.line,ch:t},to:{line:n.line,ch:i.end}}}m(c,"hintList");function x(n,i){if(!i)return u(n,o=>!o.isDeprecated);const e=n.map(o=>({proximity:T(d(o.text),i),entry:o}));return u(u(e,o=>o.proximity<=2),o=>!o.entry.isDeprecated).sort((o,p)=>(o.entry.isDeprecated?1:0)-(p.entry.isDeprecated?1:0)||o.proximity-p.proximity||o.entry.text.length-p.entry.text.length).map(o=>o.entry)}m(x,"filterAndSortList");function u(n,i){const e=n.filter(i);return e.length===0?n:e}m(u,"filterNonEmpty");function d(n){return n.toLowerCase().replace(/\W/g,"")}m(d,"normalizeText");function T(n,i){let e=v(i,n);return n.length>i.length&&(e-=n.length-i.length-1,e+=n.indexOf(i)===0?0:.5),e}m(T,"getProximity");function v(n,i){let e,r;const t=[],o=n.length,p=i.length;for(e=0;e<=o;e++)t[e]=[e];for(r=1;r<=p;r++)t[0][r]=r;for(e=1;e<=o;e++)for(r=1;r<=p;r++){const a=n[e-1]===i[r-1]?0:1;t[e][r]=Math.min(t[e-1][r]+1,t[e][r-1]+1,t[e-1][r-1]+a),e>1&&r>1&&n[e-1]===i[r-2]&&n[e-2]===i[r-1]&&(t[e][r]=Math.min(t[e][r],t[e-2][r-2]+a))}return t[o][p]}m(v,"lexicalDistance");f.registerHelper("hint","graphql-variables",(n,i)=>{const e=n.getCursor(),r=n.getTokenAt(e),t=L(e,r,i);return t!=null&&t.list&&t.list.length>0&&(t.from=f.Pos(t.from.line,t.from.ch),t.to=f.Pos(t.to.line,t.to.ch),f.signal(n,"hasCompletion",n,t,r)),t});function L(n,i,e){const r=i.state.kind==="Invalid"?i.state.prevState:i.state,t=r.kind,o=r.step;if(t==="Document"&&o===0)return c(n,i,[{text:"{"}]);const p=e.variableToType;if(!p)return;const a=V(p,i.state);if(t==="Document"||t==="Variable"&&o===0){const s=Object.keys(p);return c(n,i,s.map(l=>({text:`"${l}": `,type:p[l]})))}if((t==="ObjectValue"||t==="ObjectField"&&o===0)&&a.fields){const s=Object.keys(a.fields).map(l=>a.fields[l]);return c(n,i,s.map(l=>({text:`"${l.name}": `,type:l.type,description:l.description})))}if(t==="StringValue"||t==="NumberValue"||t==="BooleanValue"||t==="NullValue"||t==="ListValue"&&o===1||t==="ObjectField"&&o===2||t==="Variable"&&o===2){const s=a.type?g(a.type):void 0;if(s instanceof b)return c(n,i,[{text:"{"}]);if(s instanceof N){const l=s.getValues();return c(n,i,l.map(h=>({text:`"${h.name}"`,type:s,description:h.description})))}else if(s===y)return c(n,i,[{text:"true",type:y,description:"Not false."},{text:"false",type:y,description:"Not true."}])}}m(L,"getVariablesHint");function V(n,i){const e={type:null,fields:null};return j(i,r=>{if(r.kind==="Variable")e.type=n[r.name];else if(r.kind==="ListValue"){const t=e.type?O(e.type):void 0;e.type=t instanceof D?t.ofType:null}else if(r.kind==="ObjectValue"){const t=e.type?g(e.type):void 0;e.fields=t instanceof b?t.getFields():null}else if(r.kind==="ObjectField"){const t=r.name&&e.fields?e.fields[r.name]:null;e.type=t==null?void 0:t.type}}),e}m(V,"getTypeInfo");
