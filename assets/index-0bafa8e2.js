import{r as g,aA as ae,l as re,u as oe,j as s,Q as c,k as B,a6 as ne,a0 as he,$ as le,M as pe,a7 as de,K as ce}from"./index-ad349acb.js";import{u as Z,Q as _}from"./workbench-28ee53d2.js";import{g as ue}from"./datasource-1fa3c707.js";import{E as I}from"./index-536f9a7b.js";import"./dayjs.min-91c5b649.js";import"./use-immer.module-2da27013.js";import"./globalContext-dfbccd26.js";import"./workbenchContext-ac20f237.js";import"./interface-41bd3122.js";import"./engine-a3893078.js";import"./db-05315029.js";import"./index-9731e7a5.js";import"./variable-a0aa3bcc.js";import"./common-7ac8785d.js";import"./auth-1b22e7c7.js";import"./hotkey-3a258436.js";import"./index-6c944f7a.js";import"./PurePanel-695a6042.js";import"./index-7a4e7af5.js";import"./PrismaSchemaContext-e714ed20.js";import"./index-66f56d77.js";import"./LeftOutlined-c77d4031.js";import"./index-c96b6e91.js";import"./index-19ffdad1.js";import"./useShowArrow-8e7fa44f.js";import"./DownOutlined-333f089d.js";import"./conductUtil-7166729c.js";import"./index-dc5320e5.js";import"./validate-f728e0b0.js";import"./store-d3181bd4.js";import"./parser-cf485565.js";import"./index-5593b6cb.js";import"./index-0ba4c887.js";import"./addEventListener-67ce8172.js";import"./index-91b0c0cc.js";import"./index-b3bd5699.js";import"./index-591b4665.js";import"./WarningOutlined-8bd8cb22.js";import"./index-6fe05239.js";import"./calcTime-c214dda2.js";import"./index-f1022f7b.js";import"./utils-9b986f1e.js";import"./ServiceDiscovery-ac84fe4e.js";import"./CopyOutlined-b7398d05.js";import"./index-9080cb40.js";var fe=globalThis&&globalThis.__extends||function(){var i=function(o,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])},i(o,t)};return function(o,t){i(o,t);function e(){this.constructor=o}o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(i){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])}return i},f.apply(this,arguments)},q={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},G={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},A={width:"20px",height:"20px",position:"absolute"},ge={top:f(f({},q),{top:"-5px"}),right:f(f({},G),{left:void 0,right:"-5px"}),bottom:f(f({},q),{top:void 0,bottom:"-5px"}),left:f(f({},G),{left:"-5px"}),topRight:f(f({},A),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:f(f({},A),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:f(f({},A),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:f(f({},A),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ve=function(i){fe(o,i);function o(){var t=i!==null&&i.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return o.prototype.render=function(){return g.createElement("div",{className:this.props.className||"",style:f(f({position:"absolute",userSelect:"none"},ge[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},o}(g.PureComponent),me=globalThis&&globalThis.__extends||function(){var i=function(o,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])},i(o,t)};return function(o,t){i(o,t);function e(){this.constructor=o}o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),S=globalThis&&globalThis.__assign||function(){return S=Object.assign||function(i){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])}return i},S.apply(this,arguments)},we={width:"auto",height:"auto"},T=function(i,o,t){return Math.max(Math.min(i,t),o)},X=function(i,o){return Math.round(i/o)*o},E=function(i,o){return new RegExp(i,"i").test(o)},P=function(i){return!!(i.touches&&i.touches.length)},xe=function(i){return!!((i.clientX||i.clientX===0)&&(i.clientY||i.clientY===0))},Y=function(i,o,t){t===void 0&&(t=0);var e=o.reduce(function(r,n,p){return Math.abs(n-i)<Math.abs(o[r]-i)?p:r},0),a=Math.abs(o[e]-i);return t===0||a<t?o[e]:i},H=function(i){return i=i.toString(),i==="auto"||i.endsWith("px")||i.endsWith("%")||i.endsWith("vh")||i.endsWith("vw")||i.endsWith("vmax")||i.endsWith("vmin")?i:i+"px"},F=function(i,o,t,e){if(i&&typeof i=="string"){if(i.endsWith("px"))return Number(i.replace("px",""));if(i.endsWith("%")){var a=Number(i.replace("%",""))/100;return o*a}if(i.endsWith("vw")){var a=Number(i.replace("vw",""))/100;return t*a}if(i.endsWith("vh")){var a=Number(i.replace("vh",""))/100;return e*a}}return i},be=function(i,o,t,e,a,r,n){return e=F(e,i.width,o,t),a=F(a,i.height,o,t),r=F(r,i.width,o,t),n=F(n,i.height,o,t),{maxWidth:typeof e>"u"?void 0:Number(e),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof r>"u"?void 0:Number(r),minHeight:typeof n>"u"?void 0:Number(n)}},ye=function(i){return Array.isArray(i)?i:[i,i]},ze=["as","ref","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Q="__resizable_base__",je=function(i){me(o,i);function o(t){var e=i.call(this,t)||this;return e.ratio=1,e.resizable=null,e.parentLeft=0,e.parentTop=0,e.resizableLeft=0,e.resizableRight=0,e.resizableTop=0,e.resizableBottom=0,e.targetLeft=0,e.targetTop=0,e.appendBase=function(){if(!e.resizable||!e.window)return null;var a=e.parentNode;if(!a)return null;var r=e.window.document.createElement("div");return r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.style.transform="scale(0, 0)",r.style.left="0",r.style.flex="0 0 100%",r.classList?r.classList.add(Q):r.className+=Q,a.appendChild(r),r},e.removeBase=function(a){var r=e.parentNode;r&&r.removeChild(a)},e.ref=function(a){a&&(e.resizable=a)},e.state={isResizing:!1,width:typeof(e.propsSize&&e.propsSize.width)>"u"?"auto":e.propsSize&&e.propsSize.width,height:typeof(e.propsSize&&e.propsSize.height)>"u"?"auto":e.propsSize&&e.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},e.onResizeStart=e.onResizeStart.bind(e),e.onMouseMove=e.onMouseMove.bind(e),e.onMouseUp=e.onMouseUp.bind(e),e}return Object.defineProperty(o.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||we},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){var t=0,e=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,r=this.resizable.offsetHeight,n=this.resizable.style.position;n!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,e=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:r,this.resizable.style.position=n}return{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sizeStyle",{get:function(){var t=this,e=this.props.size,a=function(p){if(typeof t.state[p]>"u"||t.state[p]==="auto")return"auto";if(t.propsSize&&t.propsSize[p]&&t.propsSize[p].toString().endsWith("%")){if(t.state[p].toString().endsWith("%"))return t.state[p].toString();var l=t.getParentSize(),d=Number(t.state[p].toString().replace("px","")),h=d/l[p]*100;return h+"%"}return H(t.state[p])},r=e&&typeof e.width<"u"&&!this.state.isResizing?H(e.width):a("width"),n=e&&typeof e.height<"u"&&!this.state.isResizing?H(e.height):a("height");return{width:r,height:n}},enumerable:!1,configurable:!0}),o.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var e=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(e=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var r={width:t.offsetWidth,height:t.offsetHeight};return e&&(this.parentNode.style.flexWrap=a),this.removeBase(t),r},o.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},o.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},o.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},o.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},o.prototype.createSizeForCssProperty=function(t,e){var a=this.propsSize&&this.propsSize[e];return this.state[e]==="auto"&&this.state.original[e]===t&&(typeof a>"u"||a==="auto")?"auto":t},o.prototype.calculateNewMaxFromBoundary=function(t,e){var a=this.props.boundsByDirection,r=this.state.direction,n=a&&E("left",r),p=a&&E("top",r),l,d;if(this.props.bounds==="parent"){var h=this.parentNode;h&&(l=n?this.resizableRight-this.parentLeft:h.offsetWidth+(this.parentLeft-this.resizableLeft),d=p?this.resizableBottom-this.parentTop:h.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=n?this.resizableRight:this.window.innerWidth-this.resizableLeft,d=p?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=n?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),d=p?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(t=t&&t<l?t:l),d&&Number.isFinite(d)&&(e=e&&e<d?e:d),{maxWidth:t,maxHeight:e}},o.prototype.calculateNewSizeFromDirection=function(t,e){var a=this.props.scale||1,r=ye(this.props.resizeRatio||1),n=r[0],p=r[1],l=this.state,d=l.direction,h=l.original,u=this.props,j=u.lockAspectRatio,M=u.lockAspectRatioExtraHeight,y=u.lockAspectRatioExtraWidth,v=h.width,b=h.height,z=M||0,R=y||0;return E("right",d)&&(v=h.width+(t-h.x)*n/a,j&&(b=(v-R)/this.ratio+z)),E("left",d)&&(v=h.width-(t-h.x)*n/a,j&&(b=(v-R)/this.ratio+z)),E("bottom",d)&&(b=h.height+(e-h.y)*p/a,j&&(v=(b-z)*this.ratio+R)),E("top",d)&&(b=h.height-(e-h.y)*p/a,j&&(v=(b-z)*this.ratio+R)),{newWidth:v,newHeight:b}},o.prototype.calculateNewSizeFromAspectRatio=function(t,e,a,r){var n=this.props,p=n.lockAspectRatio,l=n.lockAspectRatioExtraHeight,d=n.lockAspectRatioExtraWidth,h=typeof r.width>"u"?10:r.width,u=typeof a.width>"u"||a.width<0?t:a.width,j=typeof r.height>"u"?10:r.height,M=typeof a.height>"u"||a.height<0?e:a.height,y=l||0,v=d||0;if(p){var b=(j-y)*this.ratio+v,z=(M-y)*this.ratio+v,R=(h-v)/this.ratio+y,m=(u-v)/this.ratio+y,w=Math.max(h,b),C=Math.min(u,z),W=Math.max(j,R),L=Math.min(M,m);t=T(t,w,C),e=T(e,W,L)}else t=T(t,h,u),e=T(e,j,M);return{newWidth:t,newHeight:e}},o.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var t=this.parentNode;if(t){var e=t.getBoundingClientRect();this.parentLeft=e.left,this.parentTop=e.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var a=this.props.bounds.getBoundingClientRect();this.targetLeft=a.left,this.targetTop=a.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),n=r.left,p=r.top,l=r.right,d=r.bottom;this.resizableLeft=n,this.resizableRight=l,this.resizableTop=p,this.resizableBottom=d}},o.prototype.onResizeStart=function(t,e){if(!(!this.resizable||!this.window)){var a=0,r=0;if(t.nativeEvent&&xe(t.nativeEvent)?(a=t.nativeEvent.clientX,r=t.nativeEvent.clientY):t.nativeEvent&&P(t.nativeEvent)&&(a=t.nativeEvent.touches[0].clientX,r=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var n=this.props.onResizeStart(t,e,this.resizable);if(n===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var p,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var d=this.parentNode;if(d){var h=this.window.getComputedStyle(d).flexDirection;this.flexDir=h.startsWith("row")?"row":"column",p=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var u={original:{x:a,y:r,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:S(S({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:e,flexBasis:p};this.setState(u)}},o.prototype.onMouseMove=function(t){var e=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&P(t))try{t.preventDefault(),t.stopPropagation()}catch{}var a=this.props,r=a.maxWidth,n=a.maxHeight,p=a.minWidth,l=a.minHeight,d=P(t)?t.touches[0].clientX:t.clientX,h=P(t)?t.touches[0].clientY:t.clientY,u=this.state,j=u.direction,M=u.original,y=u.width,v=u.height,b=this.getParentSize(),z=be(b,this.window.innerWidth,this.window.innerHeight,r,n,p,l);r=z.maxWidth,n=z.maxHeight,p=z.minWidth,l=z.minHeight;var R=this.calculateNewSizeFromDirection(d,h),m=R.newHeight,w=R.newWidth,C=this.calculateNewMaxFromBoundary(r,n);this.props.snap&&this.props.snap.x&&(w=Y(w,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(m=Y(m,this.props.snap.y,this.props.snapGap));var W=this.calculateNewSizeFromAspectRatio(w,m,{width:C.maxWidth,height:C.maxHeight},{width:p,height:l});if(w=W.newWidth,m=W.newHeight,this.props.grid){var L=X(w,this.props.grid[0]),K=X(m,this.props.grid[1]),k=this.props.snapGap||0,J=k===0||Math.abs(L-w)<=k?L:w,V=k===0||Math.abs(K-m)<=k?K:m;w=J,m=V}var ee={width:w-M.width,height:m-M.height};if(y&&typeof y=="string"){if(y.endsWith("%")){var D=w/b.width*100;w=D+"%"}else if(y.endsWith("vw")){var O=w/this.window.innerWidth*100;w=O+"vw"}else if(y.endsWith("vh")){var U=w/this.window.innerHeight*100;w=U+"vh"}}if(v&&typeof v=="string"){if(v.endsWith("%")){var D=m/b.height*100;m=D+"%"}else if(v.endsWith("vw")){var O=m/this.window.innerWidth*100;m=O+"vw"}else if(v.endsWith("vh")){var U=m/this.window.innerHeight*100;m=U+"vh"}}var N={width:this.createSizeForCssProperty(w,"width"),height:this.createSizeForCssProperty(m,"height")};this.flexDir==="row"?N.flexBasis=N.width:this.flexDir==="column"&&(N.flexBasis=N.height);var te=this.state.width!==N.width,ie=this.state.height!==N.height,se=this.state.flexBasis!==N.flexBasis,$=te||ie||se;$&&ae.flushSync(function(){e.setState(N)}),this.props.onResize&&$&&this.props.onResize(t,j,this.resizable,ee)}},o.prototype.onMouseUp=function(t){var e=this.state,a=e.isResizing,r=e.direction,n=e.original;if(!(!a||!this.resizable)){var p={width:this.size.width-n.width,height:this.size.height-n.height};this.props.onResizeStop&&this.props.onResizeStop(t,r,this.resizable,p),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:S(S({},this.state.backgroundStyle),{cursor:"auto"})})}},o.prototype.updateSize=function(t){this.setState({width:t.width,height:t.height})},o.prototype.renderResizer=function(){var t=this,e=this.props,a=e.enable,r=e.handleStyles,n=e.handleClasses,p=e.handleWrapperStyle,l=e.handleWrapperClass,d=e.handleComponent;if(!a)return null;var h=Object.keys(a).map(function(u){return a[u]!==!1?g.createElement(ve,{key:u,direction:u,onResizeStart:t.onResizeStart,replaceStyles:r&&r[u],className:n&&n[u]},d&&d[u]?d[u]:null):null});return g.createElement("div",{className:l,style:p},h)},o.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce(function(n,p){return ze.indexOf(p)!==-1||(n[p]=t.props[p]),n},{}),a=S(S(S({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return g.createElement(r,S({ref:this.ref,style:a,className:this.props.className},e),this.state.isResizing&&g.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},o.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},o}(g.PureComponent);const Se="_block_tmwd5_1",Re="_line_tmwd5_8",Me="_icon_tmwd5_16",Ne="_name_tmwd5_21",_e="_desc_tmwd5_26",Ee="_action_tmwd5_38",x={block:Se,line:Re,icon:Me,name:Ne,desc:_e,action:Ee};function Ce(){const[i,o]=g.useState([]),{questions:t}=Z(l=>({questions:l.questions,setQuestions:l.setQuestions}));g.useEffect(()=>{const l=re.groupBy(t,"model"),d=Object.keys(l).map(h=>({key:h,list:l[h].map(u=>(h===_.DataSource?u.icon=ue(u.extra):h===_.Authentication?u.icon="./assets/icon/oidc.svg":(_.Storage,u.icon="./assets/icon/file.svg"),u))}));o(d)},[t]);const e=oe();async function a(l){await B.put("/datasource",{name:l,enabled:!1}),ne()}async function r(l){await B.put("/operation",{path:l,enabled:!1}),he.emit({event:"apiEnableChange",data:{pathList:[l],enabled:!1}}),le()}async function n(l){await B.put("/authentication",{name:l,enabled:!1}),pe()}async function p(l){await B.put("/storage",{name:l,enabled:!1}),de()}return s.jsxs("div",{children:[!i.length&&s.jsx(I,{className:"pt-2",image:I.PRESENTED_IMAGE_SIMPLE,description:s.jsx(c,{id:"LwwUFT",defaultMessage:[{type:0,value:"暂无问题"}]})}),i.map((l,d)=>s.jsx("div",{className:x.block,children:l.list.map(h=>s.jsxs("div",{className:x.line,children:[s.jsx("img",{src:h.icon,className:x.icon,alt:""}),s.jsx("div",{className:x.name,children:h.name}),s.jsxs("div",{className:x.desc,children:[s.jsx("span",{children:h.msg}),l.key==_.DataSource&&s.jsx(s.Fragment,{children:s.jsxs("span",{children:[", ",s.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),s.jsx("span",{className:x.action,onClick:()=>e(`/workbench/data-source/${h.name}`),children:s.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),s.jsx(c,{id:"3+qPlN",defaultMessage:[{type:0,value:"排查, 或"}]}),s.jsx("span",{className:x.action,onClick:()=>a(h.name),children:s.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),s.jsx(c,{id:"z487Zy",defaultMessage:[{type:0,value:"该数据源"}]})]})}),l.key==_.Operation&&s.jsx(s.Fragment,{children:s.jsxs("span",{children:[", ",s.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),s.jsx("span",{className:x.action,onClick:()=>e(`/workbench/apimanage/${h.name}`),children:s.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),s.jsx(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),h.enabled&&s.jsxs(s.Fragment,{children:[", ",s.jsx(c,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),s.jsx("span",{className:x.action,onClick:()=>r(h.name),children:s.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),s.jsx(c,{id:"f5XT1C",defaultMessage:[{type:0,value:"该API"}]})]})]})}),l.key==_.Authentication&&s.jsx(s.Fragment,{children:s.jsxs("span",{children:[", ",s.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),s.jsx("span",{className:x.action,onClick:()=>e(`/workbench/auth/${h.name}`),children:s.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),s.jsx(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),h.enabled&&s.jsxs(s.Fragment,{children:[", ",s.jsx(c,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),s.jsx("span",{className:x.action,onClick:()=>n(h.name),children:s.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),s.jsx(c,{id:"Ytievw",defaultMessage:[{type:0,value:"该验证器"}]})]})]})}),l.key==_.Storage&&s.jsx(s.Fragment,{children:s.jsxs("span",{children:[", ",s.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),s.jsx("span",{className:x.action,onClick:()=>e(`/workbench/storage/${h.name}`),children:s.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),s.jsx(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),h.enabled&&s.jsxs(s.Fragment,{children:[", ",s.jsx(c,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),s.jsx("span",{className:x.action,onClick:()=>p(h.name),children:s.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),s.jsx(c,{id:"n8v1qP",defaultMessage:[{type:0,value:"该对象存储"}]})]})]})}),l.key===_.Storage&&s.jsx(s.Fragment,{children:s.jsxs("span",{children:[", ",s.jsx(c,{id:"m9wKUI",defaultMessage:[{type:0,value:"可"}]}),s.jsx("span",{className:x.action,onClick:()=>e(`/workbench/storage/${h.name}`),children:s.jsx(c,{id:"sLFK3g",defaultMessage:[{type:0,value:"前往"}]})}),s.jsx(c,{id:"CLqPBU",defaultMessage:[{type:0,value:"编辑"}]}),h.enabled&&s.jsxs(s.Fragment,{children:[", ",s.jsx(c,{id:"fv+irj",defaultMessage:[{type:0,value:"或"}]}),s.jsx("span",{className:x.action,onClick:()=>p(h.name),children:s.jsx(c,{id:"47GdDb",defaultMessage:[{type:0,value:"关闭"}]})}),s.jsx(c,{id:"n8v1qP",defaultMessage:[{type:0,value:"该对象存储"}]})]})]})})]})]},h.name))},d))]})}const We=({actionRef:i})=>{const o=g.useRef(null),t=g.useRef(null),{logs:e,setLogs:a}=Z(r=>({logs:r.logs,setLogs:r.setLogs}));return g.useEffect(()=>{i&&(i.current={clearLogs(){a([])},downloadLogs(){const r=new File([e.map(l=>JSON.stringify(l)).join(`
`)],"logs.txt",{type:"text/plain"}),n=document.createElement("a"),p=URL.createObjectURL(r);n.href=p,n.download=r.name,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(p)}}),t.current&&(t.current.scrollTop=1e10)},[i,e]),s.jsx("div",{className:"flex flex-1 w-full h-full overflow-hidden",children:s.jsxs("div",{className:"h-full mb-0 w-10/10 overflow-auto",ref:t,children:[e.map((r,n)=>s.jsxs("div",{className:"font-normal text-xs text-[#333333] leading-25px hover:bg-gray-100",children:[s.jsx("span",{className:"mr-8",children:r.time})," ",s.jsx("span",{className:"mr-1 w-100",style:{color:{INFO:"blue",WARN:"#ffae00",ERROR:"magenta",DPANIC:"red",PANIC:"red",FATAL:"red",DEBUG:"red"}[r.level]||"#333"},children:r.level})," ",s.jsx("span",{style:{whiteSpace:"pre-line"},children:r.msg})]},n)),s.jsx("div",{ref:o})]})})},Le="_active_1cb5p_1",ke="_divider_1cb5p_17",Be={active:Le,divider:ke},Ae=i=>{const[o,t]=g.useState(i.activeKey??i.tabs[0].key),e=g.useCallback(r=>{var n;t(r),(n=i.onTabClick)==null||n.call(i,r)},[i]),a=g.useCallback(r=>i.activeKey?i.activeKey===r:o===r,[i.activeKey,o]);return s.jsx("div",{className:i.className,children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{className:"flex space-x-6",children:i.tabs.map(r=>s.jsx("div",{className:`text-[#252B3A]  cursor-pointer leading-20px ${a(r.key)?Be.active:""}`,onClick:()=>e(r.key),children:r.title},r.key))}),i.extra]})})},_t=({style:i,toggleWindow:o,defaultTab:t})=>{var d;const e=ce(),a=g.useMemo(()=>[{title:e.formatMessage({id:"608d8o",defaultMessage:[{type:0,value:"日志"}]}),key:"0"},{title:e.formatMessage({id:"gpEzjP",defaultMessage:[{type:0,value:"问题"}]}),key:"1"}],[e]),[r,n]=g.useState(t??"0"),p=g.useRef();g.useRef();const l=s.jsxs("div",{className:"cursor-pointer flex justify-end",children:[s.jsx("div",{onClick:()=>{var h;return(h=p.current)==null?void 0:h.clearLogs()},children:s.jsx("img",{src:"./assets/clear.svg",height:20,width:20,alt:"清空"})}),s.jsx("div",{className:"ml-4",onClick:(d=p.current)==null?void 0:d.downloadLogs,children:s.jsx("img",{src:"./assets/download2.svg",height:20,width:20,alt:"下载"})}),s.jsx("div",{className:"ml-4",onClick:o,children:s.jsx("img",{src:"./assets/close2.svg",height:20,width:20,alt:"关闭"})})]});return s.jsx("div",{className:"bg-[#fff] border-gray-500/50 min-h-80px px-7 pb-5 bottom-36px z-1200  absolute",style:{borderTop:"1px solid #EFEFEFFF",borderRadius:"12px 12px 0 0",overflow:"hidden",...i},children:s.jsxs(je,{className:"flex flex-col h-full pt-2.5",defaultSize:{width:"100%",height:348},minWidth:"100%",maxWidth:"100%",enable:{top:!0},children:[s.jsx(Ae,{tabs:a,onTabClick:n,activeKey:r,extra:l,className:"pb-2.5"}),s.jsxs("div",{className:`w-full overflow-auto ${r==="0"?"":"hidden"}`,children:[s.jsx(We,{actionRef:p})," "]}),s.jsx("div",{className:`w-full overflow-auto ${r==="1"?"":"hidden"}`,children:s.jsx(Ce,{})})]})})};export{_t as default};
