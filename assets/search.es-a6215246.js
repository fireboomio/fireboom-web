import{a as z}from"./codemirror.es-cd7ce507.js";import{a as K}from"./searchcursor.es-2cb54d33.js";import{a as U}from"./dialog.es-1a390d8a.js";import"./index-2f454274.js";import"./index-0c7e8d7d.js";import"./interface-41bd3122.js";import"./engine-08eda274.js";import"./workbenchContext-bf63acf0.js";import"./index-e1a71c89.js";import"./lock-3a97aa67.js";import"./variable-55825bbf.js";import"./common-7ac8785d.js";import"./hotkey-3a258436.js";import"./store-8cee08ac.js";import"./parser-0b83345b.js";import"./Breadcrumb-ec8171b6.js";import"./DownOutlined-7f6a39b1.js";import"./index-d41fe3a1.js";import"./LeftOutlined-2fe2174d.js";import"./PurePanel-b8585a50.js";import"./index-09a86a4a.js";import"./index-daaccdc7.js";import"./EditFilled-dba5dcb7.js";import"./index-74c28314.js";import"./index-da7ccb38.js";import"./index-1faff6af.js";import"./useShowArrow-96b13a20.js";import"./index-2e322739.js";import"./main-7459389b.js";import"./toNumber-ddd3da05.js";import"./utils-9cc409ea.js";import"./dayjs.min-5b923f71.js";import"./utils-9b986f1e.js";import"./DeleteOutlined-341c7ff2.js";import"./index-7ede27b0.js";import"./index-6c7843e7.js";import"./index-25f28a2e.js";import"./index-d1c5fe19.js";import"./index-4abc1e70.js";import"./PlusOutlined-32be0653.js";import"./index-5d1e7203.js";import"./index-d7f1d062.js";import"./index-a915b81c.js";import"./globalContext-06a871a5.js";var k=Object.defineProperty,i=(v,w)=>k(v,"name",{value:w,configurable:!0});function V(v,w){return w.forEach(function(a){a&&typeof a!="string"&&!Array.isArray(a)&&Object.keys(a).forEach(function(m){if(m!=="default"&&!(m in v)){var O=Object.getOwnPropertyDescriptor(a,m);Object.defineProperty(v,m,O.get?O:{enumerable:!0,get:function(){return a[m]}})}})}),Object.freeze(Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}))}i(V,"_mergeNamespaces");var L={exports:{}};(function(v,w){(function(a){a(z.exports,K.exports,U.exports)})(function(a){a.defineOption("search",{bottom:!1});function m(e,t){return typeof e=="string"?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(r){e.lastIndex=r.pos;var o=e.exec(r.string);if(o&&o.index==r.pos)return r.pos+=o[0].length||1,"searching";o?r.pos=o.index:r.skipToEnd()}}}i(m,"searchOverlay");function O(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}i(O,"SearchState");function x(e){return e.state.search||(e.state.search=new O)}i(x,"getSearchState");function N(e){return typeof e=="string"&&e==e.toLowerCase()}i(N,"queryCaseInsensitive");function S(e,t,r){return e.getSearchCursor(t,r,{caseFold:N(t),multiline:!0})}i(S,"getSearchCursor");function $(e,t,r,o,n){e.openDialog(t,o,{value:r,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){b(e)},onKeyDown:n,bottom:e.options.search.bottom})}i($,"persistentDialog");function P(e,t,r,o,n){e.openDialog?e.openDialog(t,n,{value:o,selectValueOnOpen:!0,bottom:e.options.search.bottom}):n(prompt(r,o))}i(P,"dialog");function F(e,t,r,o){e.openConfirm?e.openConfirm(t,o):confirm(r)&&o[0]()}i(F,"confirmDialog");function _(e){return e.replace(/\\([nrt\\])/g,function(t,r){return r=="n"?`
`:r=="r"?"\r":r=="t"?"	":r=="\\"?"\\":t})}i(_,"parseString");function C(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],t[2].indexOf("i")==-1?"":"i")}catch{}else e=_(e);return(typeof e=="string"?e=="":e.test(""))&&(e=/x^/),e}i(C,"parseQuery");function R(e,t,r){t.queryText=r,t.query=C(r),e.removeOverlay(t.overlay,N(t.query)),t.overlay=m(t.query,N(t.query)),e.addOverlay(t.overlay),e.showMatchesOnScrollbar&&(t.annotate&&(t.annotate.clear(),t.annotate=null),t.annotate=e.showMatchesOnScrollbar(t.query,N(t.query)))}i(R,"startSearch");function d(e,t,r,o){var n=x(e);if(n.query)return D(e,t);var s=e.getSelection()||n.lastQuery;if(s instanceof RegExp&&s.source=="x^"&&(s=null),r&&e.openDialog){var c=null,f=i(function(p,y){a.e_stop(y),p&&(p!=n.queryText&&(R(e,n,p),n.posFrom=n.posTo=e.getCursor()),c&&(c.style.opacity=1),D(e,y.shiftKey,function(h,g){var u;g.line<3&&document.querySelector&&(u=e.display.wrapper.querySelector(".CodeMirror-dialog"))&&u.getBoundingClientRect().bottom-4>e.cursorCoords(g,"window").top&&((c=u).style.opacity=.4)}))},"searchNext");$(e,Q(e),s,f,function(p,y){var h=a.keyName(p),g=e.getOption("extraKeys"),u=g&&g[h]||a.keyMap[e.getOption("keyMap")][h];u=="findNext"||u=="findPrev"||u=="findPersistentNext"||u=="findPersistentPrev"?(a.e_stop(p),R(e,x(e),y),e.execCommand(u)):(u=="find"||u=="findPersistent")&&(a.e_stop(p),f(y,p))}),o&&s&&(R(e,n,s),D(e,t))}else P(e,Q(e),"Search for:",s,function(p){p&&!n.query&&e.operation(function(){R(e,n,p),n.posFrom=n.posTo=e.getCursor(),D(e,t)})})}i(d,"doSearch");function D(e,t,r){e.operation(function(){var o=x(e),n=S(e,o.query,t?o.posFrom:o.posTo);!n.find(t)&&(n=S(e,o.query,t?a.Pos(e.lastLine()):a.Pos(e.firstLine(),0)),!n.find(t))||(e.setSelection(n.from(),n.to()),e.scrollIntoView({from:n.from(),to:n.to()},20),o.posFrom=n.from(),o.posTo=n.to(),r&&r(n.from(),n.to()))})}i(D,"findNext");function b(e){e.operation(function(){var t=x(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}i(b,"clearSearch");function l(e,t){var r=e?document.createElement(e):document.createDocumentFragment();for(var o in t)r[o]=t[o];for(var n=2;n<arguments.length;n++){var s=arguments[n];r.appendChild(typeof s=="string"?document.createTextNode(s):s)}return r}i(l,"el");function Q(e){return l("",null,l("span",{className:"CodeMirror-search-label"},e.phrase("Search:"))," ",l("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",l("span",{style:"color: #888",className:"CodeMirror-search-hint"},e.phrase("(Use /re/ syntax for regexp search)")))}i(Q,"getQueryDialog");function j(e){return l("",null," ",l("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",l("span",{style:"color: #888",className:"CodeMirror-search-hint"},e.phrase("(Use /re/ syntax for regexp search)")))}i(j,"getReplaceQueryDialog");function A(e){return l("",null,l("span",{className:"CodeMirror-search-label"},e.phrase("With:"))," ",l("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}i(A,"getReplacementQueryDialog");function I(e){return l("",null,l("span",{className:"CodeMirror-search-label"},e.phrase("Replace?"))," ",l("button",{},e.phrase("Yes"))," ",l("button",{},e.phrase("No"))," ",l("button",{},e.phrase("All"))," ",l("button",{},e.phrase("Stop")))}i(I,"getDoReplaceConfirm");function T(e,t,r){e.operation(function(){for(var o=S(e,t);o.findNext();)if(typeof t!="string"){var n=e.getRange(o.from(),o.to()).match(t);o.replace(r.replace(/\$(\d)/g,function(s,c){return n[c]}))}else o.replace(r)})}i(T,"replaceAll");function E(e,t){if(!e.getOption("readOnly")){var r=e.getSelection()||x(e).lastQuery,o=t?e.phrase("Replace all:"):e.phrase("Replace:"),n=l("",null,l("span",{className:"CodeMirror-search-label"},o),j(e));P(e,n,o,r,function(s){s&&(s=C(s),P(e,A(e),e.phrase("Replace with:"),"",function(c){if(c=_(c),t)T(e,s,c);else{b(e);var f=S(e,s,e.getCursor("from")),p=i(function(){var h=f.from(),g;!(g=f.findNext())&&(f=S(e,s),!(g=f.findNext())||h&&f.from().line==h.line&&f.from().ch==h.ch)||(e.setSelection(f.from(),f.to()),e.scrollIntoView({from:f.from(),to:f.to()}),F(e,I(e),e.phrase("Replace?"),[function(){y(g)},p,function(){T(e,s,c)}]))},"advance"),y=i(function(h){f.replace(typeof s=="string"?c:c.replace(/\$(\d)/g,function(g,u){return h[u]})),p()},"doReplace");p()}}))})}}i(E,"replace"),a.commands.find=function(e){b(e),d(e)},a.commands.findPersistent=function(e){b(e),d(e,!1,!0)},a.commands.findPersistentNext=function(e){d(e,!1,!0,!0)},a.commands.findPersistentPrev=function(e){d(e,!0,!0,!0)},a.commands.findNext=d,a.commands.findPrev=function(e){d(e,!0)},a.commands.clearSearch=b,a.commands.replace=E,a.commands.replaceAll=function(e){E(e,!0)}})})();var B=L.exports,je=V({__proto__:null,default:B},[L.exports]);export{je as s};
