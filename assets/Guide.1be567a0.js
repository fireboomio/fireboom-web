import{u as N,r as m,c as F,f as l,j as i}from"./index.e5e6c754.js";import{I as g}from"./index.60d20720.js";import{i as v}from"./use-immer.module.1d9a0526.js";import{s as e}from"./index.ed5f3744.js";import"./css.7dd30b7b.js";import"./DialogWrap.947e0e2f.js";import"./KeyCode.9c493596.js";import"./pickAttrs.c5bbb5fc.js";import"./RightOutlined.73e4cc97.js";import"./calcTime.a918c2eb.js";import"./dayjs.min.fccffbb3.js";import"./duration.1c0302a6.js";function j({handleToggleDesigner:B}){const[s,h]=v(localStorage.getItem("GuideFinishMap")?JSON.parse(localStorage.getItem("GuideFinishMap")):{}),E=N(),[o,k]=m.exports.useState();m.exports.useEffect(()=>{F.get("/storageBucket").then(t=>{k(t[0].id)})},[]);const w=()=>{B("notice")},c=[{blockName:"\u6570\u636E\u6E90",optional:!1,state:1,lineUp:"",lineDown:"",subTasks:[{key:"connectDB",title:"\u8FDE\u63A5\u6570\u636E\u5E93",date:"08.12 14:00 \u5B8C\u6210",state:1,lineUp:"",lineDown:"",link:"/workbench/data-source/new"},{key:"connectREST",title:"\u8FDE\u63A5REST API",date:"08.12 14:00 \u5B8C\u6210",state:1,lineUp:"",lineDown:"",link:"/workbench/data-source/new"},{key:"connectGraphQL",title:"\u8FDE\u63A5GraphQL API",date:"08.12 14:00 \u5B8C\u6210",state:1,lineUp:"",lineDown:"",link:"/workbench/data-source/new"}]},{blockName:"OSS\u5B58\u50A8",optional:!0,state:2,lineUp:"",lineDown:"",subTasks:[{key:"addOSS",title:"\u8BBE\u7F6E\u5B58\u50A8\u63D0\u4F9B\u5546",date:"08.12 14:00 \u5B8C\u6210",state:1,lineUp:"",lineDown:"",link:"/workbench/storage/new"},{key:"uploadFile",title:"\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6",date:"\u5FEB\u53BB\u5B8C\u6210\u5427",state:0,lineUp:"",lineDown:"",link:o?`/workbench/storage/${o}/manage`:"/workbench/storage/new"}]},{blockName:"\u8EAB\u4EFD\u9A8C\u8BC1",optional:!0,state:0,lineUp:"",lineDown:"",subTasks:[{key:"addAuth",title:"\u8BBE\u7F6E\u8EAB\u4EFD\u63D0\u4F9B\u5546",date:"\u5FEB\u53BB\u5B8C\u6210\u5427",state:0,lineUp:"",lineDown:"",link:"/workbench/auth/new"},{key:"authRegister",title:"\u6CE8\u518C\u8D26\u6237\u5E76\u767B\u5F55",date:"\u5FEB\u53BB\u5B8C\u6210\u5427",state:0,lineUp:"",lineDown:"",link:"/workbench/auth/new"}]},{blockName:"\u5BF9\u5916API",optional:!1,state:0,lineUp:"",lineDown:"",subTasks:[{key:"addAPI",title:"\u53EF\u89C6\u5316\u7F16\u5199\u63A5\u53E3",date:"\u5FEB\u53BB\u5B8C\u6210\u5427",state:0,lineUp:"",lineDown:"",link:"/workbench/apimanage/crud"},{key:"downloadSDK",title:"\u4E0B\u8F7D\u63A5\u53E3SDK",date:"\u5FEB\u53BB\u5B8C\u6210\u5427",state:0,lineUp:"",lineDown:"",link:"/workbench/rapi"}]}];let u="transparent";const r="#3ED98F",d="#EBEBEB";return c.forEach(t=>{t.lineUp=u,t.state=t.subTasks.find(a=>!s[a.key])?0:1,t.lineDown=u=t.state?r:d,t.subTasks.forEach(a=>{const n=s[a.key];a.state=n?1:0,a.date=n?`${n}\u5B8C\u6210`:"\u5FEB\u53BB\u5B8C\u6210\u5427",a.lineUp=u,a.lineDown=u=a.state===1?r:d})}),l("div",{className:e.guideContainer,children:[l("div",{className:"flex flex-0 h-62px pr-8px pl-23px justify-between items-center",children:[i("span",{className:"font-bold text-17px text-[#222]",children:"\u65B0\u624B\u6307\u5F15"}),i("div",{className:"cursor-pointer p-3 text-0px",children:i(g,{width:15,height:15,preview:!1,alt:"\u5173\u95ED",src:"/assets/guide/icon-close.png",onClick:w})})]}),i("div",{className:e.guideList,children:c.map((t,a)=>l("div",{className:e.block,children:[l("div",{className:e.head,children:[l("div",{className:[e.icon,e[`icon${t.state||0}`]].join(" "),children:[i("div",{className:e.lineUp,style:{background:t.lineUp}}),i("div",{className:e.lineDown,style:{background:t.lineDown}})]}),i("div",{className:e.title,children:t.blockName}),t.optional?i("div",{className:e.tip,children:"(\u53EF\u9009)"}):null,i("div",{className:"flex-1"}),i("div",{className:e.docIcon}),i("div",{className:e.doc,children:"\u6587\u6863"})]}),t.subTasks.map((n,D)=>l("div",{className:e.item,children:[l("div",{className:[e.icon,e[`icon${n.state||0}`]].join(" "),children:[i("div",{className:e.lineUp,style:{background:n.lineUp}}),i("div",{className:e.lineDown,style:{background:n.lineDown}})]}),l("div",{className:e.info,children:[i("div",{className:e.title,children:`${a+1}.${D+1} ${n.title}`}),i("div",{className:e.status,children:n.state?n.date:"\u5FEB\u53BB\u5B8C\u6210\u5427"})]}),l("div",{className:e.btn,onClick:()=>{h(p=>{p[n.key]=new Date().toLocaleString(),localStorage.setItem("GuideFinishMap",JSON.stringify(p))}),n.link&&E(n.link)},children:[n.state?"\u4FEE\u6539":"\u524D\u5F80",i("div",{className:e.arrow})]})]},n.title))]},t.blockName))})]})}export{j as default};
