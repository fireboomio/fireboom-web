import{a as d,r as o,C as p,b as f,j as m,g as i}from"./index-91e91fd5.js";import{u as h}from"./variable-b5ce5247.js";import"./common-7ac8785d.js";if(window&&document){const r=document.createElement("script"),e=document.getElementsByTagName("body")[0];r.src="https://cdn.fireboom.io/rapidoc/9.3.5-beta/rapidoc-min.js",e.appendChild(r)}const l="rapi-frame";function x(){const[r]=d(),{globalSetting:e}=o.useContext(p),{search:u}=f(),{getConfigurationValue:c}=h(),s=o.useMemo(()=>c(e.nodeOptions.publicNodeUrl),[c,e.nodeOptions.publicNodeUrl]),a=o.useRef("");if(o.useEffect(()=>{if(e!=null&&e.enableCSRFProtect){const n=document.getElementById(l);if(!n)return;n.addEventListener("spec-loaded",()=>{fetch(`${s}/auth/cookie/csrf`,{credentials:"include"}).then(t=>t.text()).then(t=>{a.current=t})}),n.addEventListener("before-try",t=>{t.detail.request.method==="POST"&&a.current&&t.detail.request.headers.append("X-CSRF-Token",a.current)})}},[e,s]),!!e)return m.jsx("rapi-doc",{id:l,theme:r.get("theme")||"light","spec-url":r.get("url")+(i()?`?auth-key=${i()}`:""),"server-url":s,"default-api-server":s,"show-header":"false","show-info":"false","allow-authentication":"true","allow-server-selection":"false","allow-api-list-style-selection":"false","render-style":"focused","fetch-credentials":"include","persist-auth":"true","schema-style":"table","schema-expand-level":"1"},u)}export{x as default};
