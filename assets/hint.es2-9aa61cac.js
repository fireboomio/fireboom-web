import{C as f}from"./codemirror.es-1efc98fd.js";import{f as j}from"./forEachState.es-1e367fb2.js";import"./index-3eee2545.js";import"./index-d217b560.js";import{t as g,R as b,M as N,N as y,v as O,r as D}from"./store-5a00e33e.js";import"./interface-41bd3122.js";import"./engine-82bc90ca.js";import"./workbenchContext-bc727aa4.js";import"./index-4dd74302.js";import"./lock-f08fc4bb.js";import"./variable-3a19c39e.js";import"./common-7ac8785d.js";import"./hotkey-3a258436.js";import"./parser-0b83345b.js";import"./Breadcrumb-9a93b0ae.js";import"./DownOutlined-d1046583.js";import"./index-f0608a4b.js";import"./LeftOutlined-97627fde.js";import"./PurePanel-abcd1dc9.js";import"./index-b67ad132.js";import"./index-a1efea6c.js";import"./EditFilled-af345257.js";import"./index-a5eb5d08.js";import"./index-46c69c30.js";import"./index-a027c4a9.js";import"./useShowArrow-a349b582.js";import"./index-1adeffca.js";import"./main-7459389b.js";import"./toNumber-4a57392b.js";import"./utils-9cc409ea.js";import"./dayjs.min-5ec5dd15.js";import"./utils-9b986f1e.js";import"./DeleteOutlined-22a01ed5.js";import"./index-d2cf0db2.js";import"./index-5c1b11ed.js";import"./index-9540bb3c.js";import"./index-b6ac869b.js";import"./index-8f267ac3.js";import"./PlusOutlined-ded280f6.js";import"./index-59afefb4.js";import"./index-cd2029b9.js";import"./index-26f4cbf5.js";import"./globalContext-b5cf5f6a.js";var M=Object.defineProperty,m=(n,i)=>M(n,"name",{value:i,configurable:!0});function c(n,i,e){const r=x(e,d(i.string));if(!r)return;const t=i.type!==null&&/"|\w/.test(i.string[0])?i.start:i.end;return{list:r,from:{line:n.line,ch:t},to:{line:n.line,ch:i.end}}}m(c,"hintList");function x(n,i){if(!i)return u(n,o=>!o.isDeprecated);const e=n.map(o=>({proximity:T(d(o.text),i),entry:o}));return u(u(e,o=>o.proximity<=2),o=>!o.entry.isDeprecated).sort((o,p)=>(o.entry.isDeprecated?1:0)-(p.entry.isDeprecated?1:0)||o.proximity-p.proximity||o.entry.text.length-p.entry.text.length).map(o=>o.entry)}m(x,"filterAndSortList");function u(n,i){const e=n.filter(i);return e.length===0?n:e}m(u,"filterNonEmpty");function d(n){return n.toLowerCase().replace(/\W/g,"")}m(d,"normalizeText");function T(n,i){let e=v(i,n);return n.length>i.length&&(e-=n.length-i.length-1,e+=n.indexOf(i)===0?0:.5),e}m(T,"getProximity");function v(n,i){let e,r;const t=[],o=n.length,p=i.length;for(e=0;e<=o;e++)t[e]=[e];for(r=1;r<=p;r++)t[0][r]=r;for(e=1;e<=o;e++)for(r=1;r<=p;r++){const a=n[e-1]===i[r-1]?0:1;t[e][r]=Math.min(t[e-1][r]+1,t[e][r-1]+1,t[e-1][r-1]+a),e>1&&r>1&&n[e-1]===i[r-2]&&n[e-2]===i[r-1]&&(t[e][r]=Math.min(t[e][r],t[e-2][r-2]+a))}return t[o][p]}m(v,"lexicalDistance");f.registerHelper("hint","graphql-variables",(n,i)=>{const e=n.getCursor(),r=n.getTokenAt(e),t=L(e,r,i);return t!=null&&t.list&&t.list.length>0&&(t.from=f.Pos(t.from.line,t.from.ch),t.to=f.Pos(t.to.line,t.to.ch),f.signal(n,"hasCompletion",n,t,r)),t});function L(n,i,e){const r=i.state.kind==="Invalid"?i.state.prevState:i.state,t=r.kind,o=r.step;if(t==="Document"&&o===0)return c(n,i,[{text:"{"}]);const p=e.variableToType;if(!p)return;const a=V(p,i.state);if(t==="Document"||t==="Variable"&&o===0){const s=Object.keys(p);return c(n,i,s.map(l=>({text:`"${l}": `,type:p[l]})))}if((t==="ObjectValue"||t==="ObjectField"&&o===0)&&a.fields){const s=Object.keys(a.fields).map(l=>a.fields[l]);return c(n,i,s.map(l=>({text:`"${l.name}": `,type:l.type,description:l.description})))}if(t==="StringValue"||t==="NumberValue"||t==="BooleanValue"||t==="NullValue"||t==="ListValue"&&o===1||t==="ObjectField"&&o===2||t==="Variable"&&o===2){const s=a.type?g(a.type):void 0;if(s instanceof b)return c(n,i,[{text:"{"}]);if(s instanceof N){const l=s.getValues();return c(n,i,l.map(h=>({text:`"${h.name}"`,type:s,description:h.description})))}else if(s===y)return c(n,i,[{text:"true",type:y,description:"Not false."},{text:"false",type:y,description:"Not true."}])}}m(L,"getVariablesHint");function V(n,i){const e={type:null,fields:null};return j(i,r=>{if(r.kind==="Variable")e.type=n[r.name];else if(r.kind==="ListValue"){const t=e.type?O(e.type):void 0;e.type=t instanceof D?t.ofType:null}else if(r.kind==="ObjectValue"){const t=e.type?g(e.type):void 0;e.fields=t instanceof b?t.getFields():null}else if(r.kind==="ObjectField"){const t=r.name&&e.fields?e.fields[r.name]:null;e.type=t==null?void 0:t.type}}),e}m(V,"getTypeInfo");
